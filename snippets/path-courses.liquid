{% if courses.size == 0 %}
  <div class="alert alert-warning">
    {{ 'path.no_courses' | t }}
  </div>
{% else %}
  <div class="courses-filter">
    <form accept-charset="UTF-8"
          method="get" action="/enrollments/{{ enrollment.id }}/paths/{{ path.id }}"
          data-turbolinks-scroll="false">
      <div class="input-group">
        <span class="input-group-addon">
          <i class="icon-magnifier"></i>
        </span>
        <input type="text" name="name"
               class="form-control"
               placeholder="{{ 'path.filter_by_name' | t }}"
               value="{{ current_search.name }}">
          <span class="input-group-btn">
        <input type="submit" value="{{ 'general.search' | t }}" class="btn btn-default">
        </span>
      </div>
    </form>
  </div>

  <div class="courses-list">
    {% paginate courses by 6 %}
      <div class="row">
        <div id="js-course-list">
          {% for course in courses %}
            <div id="course-{{ course.id }}" class="col-sm-6 col-md-4 active-enrollments">
              {% assign progress = enrollment | course_progress_card: course %}

              {% assign available_time_message = enrollment | available_time_message %}
              {% assign total_max_attendance_message = enrollment | total_max_attendance_message %}
              {% assign use_max_attendance_message = enrollment | use_max_attendance_message %}
              {% assign status_message = enrollment | status_message %}
    
              {% assign detail_path = enrollment | course_path:course.id %}
              {% assign detail_label = 'enrollment.go_course' | t %}
    
              {% include 'course/course-card', detail_path: detail_path, detail_label: detail_label,
                title: course.name, logo: course.image_url, progress: progress,
                available_time_message: available_time_message, total_max_attendance_message: total_max_attendance_message,
                use_max_attendance_message: use_max_attendance_message, status_message: status_message%}
            </div>
          {% endfor %}
        </div>
      </div>
        
      {% if paginate.next.is_link %}
        <div id="course-more" class="col-xs-12 text-center" data-turbolinks-temporary>
          <a id="js-course-more-link" class="btn btn-default" href="{{ paginate.next.url }}">
            <span class="bold">{{ 'course.load_more' | t }}</span>
          </a>
          <div class="js-paginate-spinner" style="display: none;">
            <i class='busy busy-md'></i>
          </div>
        </div>
      {% endif %}
    {% endpaginate %}
  </div>
{% endif %}