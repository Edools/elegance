{"version":3,"sources":["theme.base.min.js","app.js","blazy.js","checkout.js","ckeditor.js","colaborativeDiscussion.js","datepicker.js","examQuestionForm.js","fixOnScroll.js","follow.js","lessonSidebar.js","lessonSidebarAjax.js","mask.js","pagarme.js","postsForm.js","readmore.js","timezone.js","main.js"],"names":["window","app","bindGlobal","FastClick","attach","document","body","$","timeago","trigger","bindOpenOnLoad","toOpen","length","each","i","elem","open","attr","bindTooltips","tooltip","checkFormValidity","event","form","currentTarget","submitButton","find","checkValidity","removeAttr","init","pagarme","bindBlazy","bindMasks","bindReadMore","bindDatepicker","bindFixOnScroll","ckeditor","bindCkeditor","bindCheckout","lessonSidebarAjax","bindExamQuestionForm","changeTimeZone","followBind","bindPostsForm","on","bindCollaborativeDiscussion","e","Blazy","change","this","is","removeClass","addClass","src","loadAsset","config","language","skin","index","ckeditorObj","id","placeholder","CKEDITOR","replace","bindCkeditorSubmit","editor","$editor","$form","parents","editorId","$submitButton","instances","getData","commentId","data","$comment","fn","datepicker","defaults","el","$el","$hidden","insertBefore","parent","frontDate","moment","val","utc","format","serverDate","date","optionIndex","assertionId","innerWidth","wrap","$wrapper","offset","size","width","outerWidth","height","outerHeight","scrollTop","top","css","position","left","z-index","mouseenter","mouseleave","lessonSidebar","nextButton","nextLesson","prevButton","prevLesson","toggleButton","toggleSidebar","lessons","preventDefault","changeLesson","lazyLoadButtons","resetTooltips","handleButtons","handleLessons","$courseContent","$firstModule","first","toggleChildren","m","off","hasClass","lessonSidebarPanel","$next","currentLesson","nextAll","$prev","prevAll","expandParentModule","originalEvent","$html","$new","html","direction","lesson","$targetLesson","click","getModuleIndex","sub","split","x","indexOf","parseInt","parentModules","gotTop","push","filter","module","reverse","mode","cb","$module","$children","nextUntil","$childModules","toggleClass","self","isActive","courseTree","course","enrollment","courseContent","userType","lessonActions","downloadAction","currentLessonId","apiKey","translations","bindClicks","loadTopModules","target","stopPropagation","loadChildren","getLessonIcon","lessonIcon","type","activity","media","getContentPath","content","enrollmentId","courseId","path","getContentDownloadPath","checkLessonAvailability","releaseAt","release_at","releaseAfter","release_after","enrollmentActivatedAt","activated_at","releaseTime","add","fetchModules","$parent","level","$list","ajax","url","CORE_HOST","method","headers","Authorization","success","res","modules","_","sortBy","course_modules","allModules","available","course_content_ids","$modules","map","name","append","fetchChildren","courseContents","course_contents","$courseContents","active","hideInProgressIcon","hideCompletedIcon","lessonReleased","releaseType","releaseDate","progress","lessons_info","completed","in_progress","lessons_progresses","lesson_id","title","views","max_attendance_length","max_attendance_type","zone","tz","guess","downloadable","topModules","parent_course_module","prev","fadeOut","fadeIn","expandParentModules","parent_modules_hash","opacity","appendTo","when","then","slideDown","slideUp","loopModule","course_module","parent_module","async","eachSeries","moduleId","phoneMaskBehavior","phoneMaskOptions","onKeyPress","field","options","mask","apply","arguments","buildCreditCard","creditCard","PagarMe","expiration","cardExpirationMonth","cardExpirationYear","cardHolderName","cardNumber","cardCVV","submitFormCreditCardHash","paymentForm","fieldErrors","hasErrors","console","log","creditCardTest","generateHash","cardHash","get","submit","pagarmeKey","encryption_key","post","speed","collapsedHeight","moreText","lessText","currHeight","innerHeight","showLink","readmore","moreLink","lessLink","time","ready"],"mappings":"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","file":"theme.base.min.js","sourcesContent":["'use strict';\n\n(function () {\n  'use strict';\n\n  window.app = {\n    bindGlobal: function bindGlobal() {\n      FastClick.attach(document.body);\n\n      $('.timeago').timeago();\n\n      $(document).trigger('app:bind:global');\n    },\n\n    bindOpenOnLoad: function bindOpenOnLoad() {\n      var toOpen = $('.js-open-on-load');\n      if (toOpen.length > 0) {\n        $.each(toOpen, function (i, elem) {\n          window.open($(elem).attr('href'));\n        });\n      }\n\n      $(document).trigger('app:bind:open_on_load');\n    },\n\n    bindTooltips: function bindTooltips() {\n      $(\"[data-toggle='tooltip']\").tooltip(\"destroy\").tooltip();\n\n      $(document).trigger('app:bind:tooltips');\n    },\n\n    checkFormValidity: function checkFormValidity(event) {\n      var form = event.currentTarget;\n      var submitButton = $(form).find('button[type=\"submit\"]');\n\n      if (form.checkValidity()) {\n        submitButton.removeAttr('disabled');\n      } else {\n        submitButton.attr('disabled', 'disabled');\n      }\n\n      $(document).trigger('app:bind:check_form_validity');\n    },\n\n    init: function init() {\n      app.pagarme.init();\n\n      app.bindGlobal();\n      app.bindBlazy();\n      app.bindOpenOnLoad();\n      app.bindMasks();\n      app.bindTooltips();\n      app.bindReadMore();\n      app.bindDatepicker();\n      app.bindFixOnScroll();\n      app.ckeditor.bindCkeditor();\n      app.bindCheckout();\n      app.lessonSidebarAjax.init();\n      app.bindExamQuestionForm();\n      app.changeTimeZone();\n      app.followBind();\n      app.bindPostsForm();\n\n      $(document).on('app:bind:ckeditor_submit', app.bindCollaborativeDiscussion);\n    }\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.bindBlazy = function (e) {\n    new Blazy();\n\n    $(document).trigger('app:bind:blazy');\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.bindCheckout = function () {\n    $('#js-terms-of-use-check').change(function () {\n      if ($(this).is(\":checked\") === true) {\n        $('.cta-checkout-cart').removeClass('disabled');\n      } else {\n        $('.cta-checkout-cart').addClass('disabled');\n      }\n    });\n\n    $(document).trigger('app:bind:checkout');\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.ckeditor = {\n    bindCkeditor: function bindCkeditor() {\n      var src = '//cdn.edools.com/libs/ckeditor/4.5.10/ckeditor.js';\n\n      if ($('.js-ckeditor').length) {\n        loadAsset('window.CKEDITOR', src, function () {\n          var config = {\n            language: 'pt-br',\n            skin: 'bootstrapck'\n          };\n\n          $('.js-ckeditor').each(function (index, ckeditorObj) {\n            if (!$('#cke_' + ckeditorObj.id).length) {\n              config.placeholder = ckeditorObj.placeholder; // TODO: fix it\n\n              CKEDITOR.replace(ckeditorObj.id, config);\n            }\n          });\n\n          app.ckeditor.bindCkeditorSubmit();\n          $(document).trigger('app:bind:ckeditor');\n        });\n      }\n    },\n\n    bindCkeditorSubmit: function bindCkeditorSubmit() {\n      $.each($('.js-ckeditor'), function (index, editor) {\n        var $editor = $(editor);\n        var $form = $editor.parents('form');\n        var editorId = $editor.attr('id');\n\n        if ($form) {\n          var $submitButton = $form.find('button[type=\"submit\"]');\n\n          CKEDITOR.instances[editorId].on('change', function () {\n            if (this.getData().length) {\n              $submitButton.attr('disabled', false);\n            } else {\n              $submitButton.attr('disabled', true);\n            }\n          });\n        }\n      });\n\n      $(document).trigger('app:bind:ckeditor_submit');\n    }\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.bindCollaborativeDiscussion = function () {\n    $(document).on('click', '#collaborative-discussion .js-edit-button', function () {\n      var commentId = $(this).data('comment-id');\n      var $comment = $('#js-comment-' + commentId);\n\n      $comment.find('.js-show-comment').addClass('hide');\n      $comment.find('.js-edit-container').removeClass('hide');\n    });\n\n    $(document).on('click', '#collaborative-discussion .js-cancel-button', function () {\n      var commentId = $(this).data('comment-id');\n      var $comment = $('#js-comment-' + commentId);\n\n      $comment.find('.js-show-comment').removeClass('hide');\n      $comment.find('.js-edit-container').addClass('hide');\n    });\n\n    $(document).trigger('app:bind:collaborative_discussion');\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.bindDatepicker = function () {\n    // TODO: Handle i18n\n    $.fn.datepicker.defaults.language = 'pt-BR';\n\n    $('.datepicker').each(function (i, el) {\n      var $el = $(el);\n      var $hidden = $('<input type=\"hidden\" />').insertBefore($el.parent());\n      var frontDate = moment($el.val()).utc().format('DD/MM/YYYY');\n      var serverDate = moment($el.val()).utc().format('YYYY-MM-DD');\n      serverDate = serverDate === 'Invalid date' ? null : serverDate;\n\n      $hidden.attr('id', $el.attr('id'));\n      $hidden.attr('name', $el.attr('name'));\n      $hidden.attr('value', serverDate);\n\n      $el.removeAttr('id');\n      $el.removeAttr('name');\n\n      if ($el.val() !== \"\") {\n        $el.val(frontDate);\n      }\n\n      $(el).datepicker().on('change', function () {\n        var date = moment($el.val(), 'DD/MM/YYYY').utc().format('YYYY-MM-DD');\n        date = date === 'Invalid date' ? null : date;\n        $hidden.val(date);\n      });\n    });\n\n    $(document).trigger('app:bind:datepicker');\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.bindExamQuestionForm = function () {\n    $(document).on('click', '#js-remake-exam', function () {\n      $('#answers-container').addClass('hide');\n      $('#form-container').removeClass('hide');\n    });\n\n    $(document).on('click', '#js-clean-associative-options', function (e) {\n      $('.js-associative-select option:selected').removeAttr('selected');\n    });\n\n    $(document).on('change', '.js-associative-select', function (e) {\n      var optionIndex = $(this).data('option-index');\n      var assertionId = $(this).find('option:selected').data('first-assertion-id');\n\n      $('.js-associate-assertion[data-option-index=\"' + optionIndex + '\"]').val(assertionId);\n    });\n\n    // bind all form's inputs\n    $(document).on('change', '#exam_answer_form', app.checkFormValidity);\n    // bind all form's textareas for all types of typing\n    $(document).on('input propertychange', '#exam_answer_form', app.checkFormValidity);\n\n    $(document).trigger('app:bind:bind_exam_question_form');\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.bindFixOnScroll = function () {\n    if (window.innerWidth < 992) return;\n\n    $('.js-fix-on-scroll').each(function (i, el) {\n      var $el = $(el);\n      $el.wrap('<div class=\"js-fix-scroll-wrapper\"/>');\n      var $wrapper = $el.parent('.js-fix-scroll-wrapper');\n\n      var offset = $el.offset();\n      var size = {\n        width: $el.outerWidth(),\n        height: $el.outerHeight()\n      };\n\n      $wrapper.width(size.width);\n      $wrapper.height(size.height);\n\n      $(document).on('scroll', function (e) {\n        var scrollTop = $(document).scrollTop();\n\n        if (scrollTop >= offset.top) {\n          if ($el.css('position') === 'fixed') return;\n\n          $el.addClass('scroll');\n          $el.css({\n            position: 'fixed',\n            left: offset.left,\n            top: 0,\n            width: size.width,\n            height: size.height,\n            'z-index': '10000'\n          });\n        } else {\n          if ($el.css('position') === 'static') return;\n\n          $el.removeClass('scroll');\n          $el.css({\n            position: 'static',\n            left: 'auto',\n            top: 'auto',\n            width: 'auto',\n            height: 'auto'\n          });\n        }\n      });\n    });\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.followBind = function () {\n    $(document).on({\n      mouseenter: function mouseenter() {\n        $(this).addClass('hidden');\n        $('#js-unfollow').removeClass('hidden');\n      }\n    }, '#js-following');\n\n    $(document).on({\n      mouseleave: function mouseleave() {\n        $('#js-following').removeClass('hidden');\n        $(this).addClass('hidden');\n      }\n    }, '#js-unfollow');\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.lessonSidebar = {\n    init: function init() {\n      this.nextButton().on('click', this.nextLesson);\n      this.prevButton().on('click', this.prevLesson);\n      this.toggleButton().on('click', this.toggleSidebar);\n      this.lessons().find('a').on('click', function (e) {\n        e.preventDefault();\n        app.lessonSidebar.changeLesson(null, $(this).parents('.js-content'));\n      });\n      this.lazyLoadButtons().on('click', app.lessonSidebar.resetTooltips);\n\n      this.handleButtons();\n      this.handleLessons();\n\n      var $courseContent = $('.course-content');\n      if ($courseContent.length <= 0) {\n        $(document).trigger('app:bind:lesson_sidebar');\n        return;\n      }\n\n      // Expand first item\n      var $firstModule = $courseContent.find('.module.sub-1').first();\n      app.lessonSidebar.toggleChildren($firstModule, 'expand');\n\n      $(document).on('page:change', function () {\n        $courseContent.find('.module.expanded').each(function (i, m) {\n          app.lessonSidebar.toggleChildren($(m), 'collapse', function () {\n            app.lessonSidebar.toggleChildren($(m), 'expand');\n          });\n        });\n      });\n\n      $courseContent.off(\"click\").on('click', '.module', function () {\n        if ($(this).hasClass('expanded')) {\n          app.lessonSidebar.toggleChildren($(this), 'collapse');\n        } else {\n          app.lessonSidebar.toggleChildren($(this), 'expand');\n        }\n      });\n\n      $(document).trigger('app:bind:lesson_sidebar');\n    },\n\n    lazyLoadButtons: function lazyLoadButtons() {\n      return $('#js-course-content-more-link, #js-course-content-prev-link');\n    },\n\n    prevButton: function prevButton() {\n      return $('#js-lesson-content-player').find('.js-btn-prev');\n    },\n\n    nextButton: function nextButton() {\n      return $('#js-lesson-content-player').find('.js-btn-next');\n    },\n\n    toggleButton: function toggleButton() {\n      return $('.lesson-sidebar-toggle .btn');\n    },\n\n    lessonSidebarPanel: function lessonSidebarPanel() {\n      return $('.lesson-sidebar-panel');\n    },\n\n    handleButtons: function handleButtons() {\n      var $next = this.currentLesson().nextAll('.js-content');\n      var $prev = this.currentLesson().prevAll('.js-content');\n\n      if ($next.length <= 0 || $next.find('a').length <= 0) {\n        app.lessonSidebar.nextButton().attr('disabled', 'disabled');\n      } else {\n        app.lessonSidebar.nextButton().removeAttr('disabled');\n      }\n\n      if ($prev.length <= 0 || $prev.find('a').length <= 0) {\n        app.lessonSidebar.prevButton().attr('disabled', 'disabled');\n      } else {\n        app.lessonSidebar.prevButton().removeAttr('disabled');\n      }\n    },\n\n    handleLessons: function handleLessons() {\n      app.lessonSidebar.expandParentModule(app.lessonSidebar.currentLesson());\n\n      $(document).on('page:load page:restore', function (e) {\n\n        if (!e.originalEvent.data || e.originalEvent.data.length == 0) return;\n\n        var $html = $(e.originalEvent.data[0]);\n        app.lessonSidebar.lessons().each(function (i, el) {\n          var $el = $(el);\n          var $new = $html.find('#' + $el.attr('id'));\n          $el.html($new.html());\n        });\n      });\n    },\n\n    lessons: function lessons() {\n      return $('.lesson-page #js-course-tree').find('.js-content');\n    },\n\n    currentLesson: function currentLesson() {\n      return $($('.lesson-page #js-course-tree').find('.js-content.active')[0]);\n    },\n\n    changeLesson: function changeLesson(direction, lesson) {\n      var $targetLesson = $(lesson);\n\n      if (direction == 'prev') {\n        var $prev = app.lessonSidebar.currentLesson().prevAll('.js-content');\n\n        if ($prev.length > 0 && $prev.find('a').length > 0) $targetLesson = $($prev[0]);\n      } else if (direction == 'next') {\n        var $next = app.lessonSidebar.currentLesson().nextAll('.js-content');\n\n        if ($next.length > 0 && $next.find('a').length > 0) $targetLesson = $($next[0]);\n      }\n\n      app.lessonSidebar.expandParentModule($targetLesson);\n      $targetLesson.find('a')[0].click();\n    },\n\n    prevLesson: function prevLesson() {\n      app.lessonSidebar.changeLesson('prev');\n    },\n\n    nextLesson: function nextLesson() {\n      app.lessonSidebar.changeLesson('next');\n    },\n\n    getModuleIndex: function getModuleIndex(el) {\n      var sub = null;\n      $(el.attr('class').split(' ')).each(function (i, x) {\n        if (x.indexOf('sub-') > -1) {\n          sub = parseInt(x.replace('sub-', ''));\n        }\n      });\n\n      return sub;\n    },\n\n    expandParentModule: function expandParentModule(el) {\n      var parentModules = [];\n\n      var gotTop = false;\n      $(el).prevAll('.module').each(function (i, el) {\n        var $el = $(el);\n\n        if (!gotTop) {\n          parentModules.push($el);\n        }\n\n        if (app.lessonSidebar.getModuleIndex($el) == 1) {\n          gotTop = true;\n        }\n      });\n\n      parentModules = parentModules.filter(function (module, i) {\n        return i == 0 || app.lessonSidebar.getModuleIndex($(module)) < app.lessonSidebar.getModuleIndex($(el)) - 1;\n      });\n\n      parentModules = parentModules.reverse();\n\n      $(parentModules).each(function (i, el) {\n        app.lessonSidebar.toggleChildren(el, 'expand');\n      });\n    },\n\n    toggleChildren: function toggleChildren(module, mode, cb) {\n      if (module.length <= 0) return;\n\n      var $module = $(module);\n      var sub = app.lessonSidebar.getModuleIndex($module);\n\n      var $children = $module.nextUntil('.sub-' + sub).filter(function () {\n        return app.lessonSidebar.getModuleIndex($(this)) == app.lessonSidebar.getModuleIndex($module) + 1;\n      });\n\n      var $childModules = $children.filter(function () {\n        return $(this).hasClass('module');\n      });\n\n      if (mode == 'expand') {\n        $module.addClass('expanded');\n        $children.removeClass('hidden');\n      } else if (mode == 'collapse') {\n        $module.removeClass('expanded');\n        $children.addClass('hidden');\n      }\n\n      $childModules.each(function (i, el) {\n        app.lessonSidebar.toggleChildren(el, 'collapse');\n      });\n\n      if (cb) {\n        cb();\n      }\n    },\n\n    toggleSidebar: function toggleSidebar() {\n      app.lessonSidebar.toggleButton().toggleClass('active');\n      app.lessonSidebar.lessonSidebarPanel().toggleClass('active');\n    }\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.lessonSidebarAjax = {\n    init: function init() {\n      var self = this;\n\n      self.isActive = self.courseTree().data('is-active');\n      self.course = self.courseTree().data('course');\n      self.enrollment = self.courseTree().data('enrollment');\n      self.courseContent = self.courseTree().data('course-content');\n      self.userType = self.courseTree().data('user-type');\n      self.lessonActions = self.courseTree().data('lesson-actions');\n      self.downloadAction = self.courseTree().data('download-action');\n      self.currentLessonId = parseInt(self.courseTree().data('current-lesson-id'));\n      self.apiKey = self.courseTree().data('api-key');\n\n      self.translations = {};\n      self.translations['lesson.release_at'] = self.courseTree().data('translation-release-at');\n      self.translations['lesson.release_after'] = self.courseTree().data('translation-release-after');\n      self.translations['product.course_content.views'] = self.courseTree().data('translation-course_content-views');\n\n      if (!self.isActive) {\n        self.bindClicks();\n        self.handleLessons();\n        self.loadTopModules();\n\n        $(document).trigger('app:bind:lesson_sidebar');\n      }\n    },\n\n    // Props\n\n    courseTree: function courseTree() {\n      return $('.course-content-ajax #js-course-tree-ajax');\n    },\n\n    lazyLoadButtons: function lazyLoadButtons() {\n      return $('.course-content-ajax #js-course-content-more-link, .course-content-ajax #js-course-content-prev-link');\n    },\n\n    lessons: function lessons() {\n      return this.courseTree().find('.js-content');\n    },\n\n    currentLesson: function currentLesson() {\n      return $(this.courseTree().find('.js-content.active')[0]);\n    },\n\n    toggleButton: function toggleButton() {\n      return $('.lesson-sidebar-toggle .btn');\n    },\n\n    lessonSidebarPanel: function lessonSidebarPanel() {\n      return $('.lesson-sidebar-panel');\n    },\n\n    // Actions\n\n    bindClicks: function bindClicks() {\n      var self = this;\n\n      self.lessons().find('a').on('click', function (e) {\n        e.preventDefault();\n        app.lessonSidebar.changeLesson(null, $(this).parents('.js-content'));\n      });\n\n      self.courseTree().on('click', '.module', function (e) {\n        if (!$(e.target).hasClass('module') && !$(e.target).parent().hasClass('module')) {\n          return;\n        }\n\n        e.stopPropagation();\n        self.loadChildren($(this));\n      });\n\n      self.courseTree().data('is-active', true);\n\n      self.toggleButton().on('click', this.toggleSidebar);\n    },\n\n    getLessonIcon: function getLessonIcon(lesson) {\n      var lessonIcon = '';\n\n      if (lesson.type == 'ExamLesson') {\n        switch (lesson.activity.type) {\n          case 'Quiz':\n            {\n              lessonIcon = 'icon-puzzle';\n              break;\n            }\n          case 'FileUpload':\n            {\n              lessonIcon = 'icon-arrow-up-circle';\n              break;\n            }\n          case 'CollaborativeDiscussion':\n            {\n              lessonIcon = 'icon-people';\n              break;\n            }\n          default:\n            {\n              lessonIcon = 'icon-puzzle';\n            }\n        }\n      } else {\n        switch (lesson.media) {\n          case 'Video':\n            {\n              lessonIcon = 'icon-camrecorder';\n              break;\n            }\n          case 'Audio':\n            {\n              lessonIcon = 'icon-microphone';\n              break;\n            }\n          case 'Slide':\n            {\n              lessonIcon = 'icon-chart';\n              break;\n            }\n          case 'Document':\n            {\n              lessonIcon = 'fa fa-file-text-o';\n              break;\n            }\n          case 'Image':\n            {\n              lessonIcon = 'icon-picture';\n              break;\n            }\n          case 'Text':\n            {\n              lessonIcon = 'fa fa-file-text-o';\n              break;\n            }\n          case 'LiveStream':\n            {\n              lessonIcon = 'icon-control-play';\n              break;\n            }\n          case 'VideoSlide':\n            {\n              lessonIcon = 'icon-film';\n              break;\n            }\n          case 'ScormPackage':\n            {\n              lessonIcon = 'icon-layers';\n              break;\n            }\n          case 'Html':\n            {\n              lessonIcon = 'icon-doc';\n              break;\n            }\n          default:\n            {\n              lessonIcon = 'icon-camrecorder';\n            }\n\n        }\n      }\n\n      return lessonIcon;\n    },\n\n    getContentPath: function getContentPath(content) {\n      var self = this;\n\n      var enrollmentId = self.enrollment.id;\n      var courseId = self.course.id;\n\n      var path = enrollmentId ? '/enrollments/' + enrollmentId : '/admin_view';\n      path = path + '/courses/' + courseId + '/course_contents/' + content.id;\n\n      return path;\n    },\n\n    getContentDownloadPath: function getContentDownloadPath(content) {\n      var self = this;\n      return self.getContentPath(content) + '/download';\n    },\n\n    checkLessonAvailability: function checkLessonAvailability(lesson) {\n      var releaseAt = lesson.release_at;\n      var releaseAfter = lesson.release_after;\n\n      if (!releaseAt && !releaseAfter) {\n        return true;\n      }\n\n      var enrollmentActivatedAt = moment(this.enrollment.activated_at);\n\n      var releaseTime = releaseAt ? moment(releaseAt) : enrollmentActivatedAt.add(releaseAfter, 'days');\n\n      return moment() > releaseTime;\n    },\n\n    fetchModules: function fetchModules($parent) {\n      var self = this;\n      var id = $parent.data('id');\n      var level = $parent.data('level');\n      var $list = $parent.find('.list-group').first();\n\n      return $.ajax({\n        url: window.CORE_HOST + '/course_modules/' + id,\n        method: 'GET',\n        headers: {\n          'Authorization': 'Token token=' + self.apiKey\n        },\n        success: function success(res) {\n          var modules = _.sortBy(res.course_modules, 'order');\n\n          modules = _.filter(modules, function (m) {\n            var module = _.find(self.allModules, { id: m.id });\n            return module.available != false && (module.course_content_ids.length > 0 || module.course_modules.length > 0);\n          });\n\n          var $modules = _.map(modules, function (module) {\n            return $('<li class=\"list-group-item module\" ' + 'data-id=\"' + module.id + '\"' + 'data-level=\"' + (level + 1) + '\">' + '<i class=\"icon icon-arrow-right\"></i>' + '<span>' + module.name + '</span>' + '<i class=\"busy\"></i>' + '</li>');\n          });\n\n          $list.append($modules);\n        }\n      });\n    },\n\n    fetchChildren: function fetchChildren($parent) {\n      var self = this;\n      var id = $parent.data('id');\n      var level = $parent.data('level');\n      var $list = $parent.find('.list-group').first();\n\n      return $.ajax({\n        url: window.CORE_HOST + '/course_modules/' + id + '/course_contents',\n        method: 'GET',\n        headers: {\n          'Authorization': 'Token token=' + self.apiKey\n        },\n        success: function success(res) {\n          var courseContents = _.filter(res.course_contents, function (lesson) {\n            return lesson.available != false;\n          });\n\n          courseContents = _.sortBy(courseContents, 'order');\n\n          var $courseContents = _.map(courseContents, function (content) {\n            var active = self.currentLessonId == content.lesson.id ? 'active js' : '';\n            var lesson = content.lesson;\n            var lessonIcon = self.getLessonIcon(lesson);\n            var hideInProgressIcon = 'hide';\n            var hideCompletedIcon = 'hide';\n            var lessonReleased = null;\n            var releaseType = null;\n            var releaseDate = null;\n            var progress = null;\n\n            if (self.enrollment) {\n              lessonReleased = self.checkLessonAvailability(lesson);\n\n              if (self.enrollment.lessons_info && self.enrollment.lessons_info.completed.indexOf(lesson.id) > -1) {\n                hideInProgressIcon = 'hide';\n                hideCompletedIcon = null;\n              } else {\n                if (self.enrollment.lessons_info && self.enrollment.lessons_info.in_progress.indexOf(lesson.id) > -1) {\n                  hideInProgressIcon = null;\n                  hideCompletedIcon = 'hide';\n                } else {\n                  hideInProgressIcon = 'hide';\n                  hideCompletedIcon = 'hide';\n                }\n              }\n\n              if (lesson.release_at) {\n                releaseType = 'release_at';\n                releaseDate = lesson.release_at;\n              } else if (lesson.release_after) {\n                releaseType = 'release_after';\n                releaseDate = moment(self.enrollment.activated_at).add(lesson.release_after, 'days');\n              }\n\n              if (self.lessonActions) {\n                progress = _.find(self.enrollment.lessons_progresses, { lesson_id: lesson.id });\n              }\n            }\n\n            var html = '<li class=\"list-group-item content-lesson js-content list-group-item lesson module-item ' + active + '\" ' + 'id=\"content-' + content.id + '\" ' + 'data-id=\"' + content.lesson.id + '\"' + 'data-level=\"1\">' + '<div id=\"lesson-' + lesson.id + '\" class=\"js-lesson content-lesson class ' + active + '\" data-lesson-id=\"' + lesson.id + '\">' + '<div class=\"class-info\">' + '<div class=\"left\"><i class=\"' + lessonIcon + '\"></i></div>' + '<div class=\"center\">' + (self.lessonActions && lessonReleased && self.userType == 'Student' ? '<a class=\"lesson-title\" href=\"' + self.getContentPath(content) + '\"><span>' + lesson.title + '</span></a>' : '<span class=\"lesson-title\"><span class=\"disabled\">' + lesson.title + '</span></span>') + '</div>' + '<div class=\"right\">' + '<span class=\"progress-icon js-progress-icons\">' + '<i class=\"icon-check js-completed-icon ' + hideCompletedIcon + '\"></i>' + '<i class=\"icon-clock js-in-progress-icon ' + hideInProgressIcon + '\"></i>' + '</span>';\n\n            if (self.lessonActions) {\n              if (progress && progress.views <= self.enrollment.max_attendance_length && self.enrollment.max_attendance_type == 'attempts') {\n                html += '<span class=\"lesson-views attempt js-attendance\" title=\"' + self.translations['product.course_content.views'] + '\" data-tooltip-placement=\"left\" data-toggle=\"tooltip\">' + '<span>' + progress.views + '/' + self.enrollment.max_attendance_length + '</span>';\n              }\n\n              if (!lessonReleased) {\n                var zone = moment.tz.guess();\n                html += '<span class=\"release-date badge\">' + self.translations['lesson.' + releaseType] + '<span> ' + moment.tz(releaseDate, zone).format('DD/MM/YYYY') + '</span>' + '</span>';\n              }\n\n              if (self.downloadAction && content.downloadable) {\n                html += '<a class=\"download-link\" href=\"' + self.getContentDownloadPath(content) + '\" data-no-turbolink>' + '<i class=\"icon-cloud-download\"></i>' + '</a>';\n              }\n            }\n\n            html += '</div>' + '</div>' + '</li>';\n\n            return $(html);\n          });\n\n          $list.append($courseContents);\n        }\n      });\n    },\n\n    loadTopModules: function loadTopModules() {\n      var self = this;\n\n      if (!self.course) return;\n\n      $.ajax({\n        url: window.CORE_HOST + '/courses/' + self.course.id + '/course_modules',\n        method: 'GET',\n        headers: {\n          'Authorization': 'Token token=' + self.apiKey\n        },\n        success: function success(res) {\n          if (!res.course_modules || res.course_modules.length <= 0) return;\n\n          self.allModules = res.course_modules;\n\n          self.topModules = _.filter(res.course_modules, function (x) {\n            return x.parent_course_module == null && x.available != false && (x.course_content_ids.length > 0 || x.course_modules.length > 0);\n          });\n\n          self.topModules = _.sortBy(self.topModules, 'order');\n\n          var $modules = _.map(self.topModules, function (module) {\n            return $('<li class=\"list-group-item module\" ' + 'data-id=\"' + module.id + '\"' + 'data-level=\"1\">' + '<i class=\"icon icon-arrow-right\"></i>' + '<span>' + module.name + '</span>' + '<i class=\"busy\"></i>' + '</li>');\n          });\n\n          self.courseTree().prev('.busy').fadeOut('fast', function () {\n            self.courseTree().css('display', 'none');\n            self.courseTree().html($modules);\n            self.courseTree().fadeIn('fast');\n\n            if (self.courseContent) {\n              self.expandParentModules(self.courseContent.parent_modules_hash);\n            }\n          });\n        }\n      });\n    },\n\n    loadChildren: function loadChildren(parent, cb) {\n      var self = this;\n      var $parent = $(parent);\n\n      var id = $parent.data('id');\n      var level = $parent.data('level');\n      var $list = $parent.find('.list-group').first();\n\n      if ($list.length <= 0) {\n        $parent.find('.busy').css({ opacity: 1 });\n        $list = $('<div class=\"list-group\"></div>');\n        $list.appendTo($parent);\n\n        $.when(self.fetchModules($parent), self.fetchChildren($parent)).then(function () {\n          $parent.addClass('expanded');\n          $parent.find('.busy').css({ opacity: 0 });\n\n          $list.slideDown('fast');\n\n          if (typeof cb == 'function') {\n            cb();\n          }\n        });\n      } else {\n        if ($parent.hasClass('expanded')) {\n          $parent.removeClass('expanded');\n          $list.slideUp('fast');\n        } else {\n          $parent.addClass('expanded');\n          $list.slideDown('fast');\n        }\n\n        if (typeof cb == 'function') {\n          cb();\n        }\n      }\n    },\n\n    handleLessons: function handleLessons() {\n      $(document).on('page:load page:restore', function (e) {\n\n        if (e.originalEvent.data.length == 0) return;\n\n        var $html = $(e.originalEvent.data[0]);\n        app.lessonSidebar.lessons().each(function (i, el) {\n          var $el = $(el);\n          var $new = $html.find('#' + $el.attr('id'));\n          $el.html($new.html());\n        });\n      });\n    },\n\n    changeLesson: function changeLesson(direction, lesson) {\n      var $targetLesson = $(lesson);\n\n      if (direction == 'prev') {\n        var $prev = app.lessonSidebar.currentLesson().prevAll('.js-content');\n\n        if ($prev.length > 0 && $prev.find('a').length > 0) $targetLesson = $($prev[0]);\n      } else if (direction == 'next') {\n        var $next = app.lessonSidebar.currentLesson().nextAll('.js-content');\n\n        if ($next.length > 0 && $next.find('a').length > 0) $targetLesson = $($next[0]);\n      }\n\n      $targetLesson.find('a')[0].click();\n    },\n\n    prevLesson: function prevLesson() {\n      app.lessonSidebar.changeLesson('prev');\n    },\n\n    nextLesson: function nextLesson() {\n      app.lessonSidebar.changeLesson('next');\n    },\n\n    expandParentModules: function expandParentModules(parentModules) {\n      var self = this;\n\n      var modules = [];\n      var loopModule = parentModules.course_module;\n      modules.push(loopModule.id);\n\n      while (loopModule.parent_module) {\n        loopModule = loopModule.parent_module;\n        modules.push(loopModule.id);\n      }\n\n      modules = modules.reverse();\n\n      async.eachSeries(modules, function (moduleId, cb) {\n        var $module = $('.module[data-id=\"' + moduleId + '\"]');\n        self.loadChildren($module, cb);\n      });\n    },\n\n    toggleSidebar: function toggleSidebar() {\n      app.lessonSidebar.toggleButton().toggleClass('active');\n      app.lessonSidebar.lessonSidebarPanel().toggleClass('active');\n    }\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.bindMasks = function () {\n    var phoneMaskBehavior = function phoneMaskBehavior(val) {\n      return val.replace(/\\D/g, '').length === 11 ? '(00) 00000-0000' : '(00) 0000-00009';\n    };\n\n    var phoneMaskOptions = {\n      onKeyPress: function onKeyPress(val, e, field, options) {\n        field.mask(phoneMaskBehavior.apply({}, arguments), options);\n      }\n    };\n\n    $('#user-phone').mask(phoneMaskBehavior, phoneMaskOptions);\n    $('#user-cpf').mask('999.999.999-99');\n    $('#user-cep').mask('99.999-999');\n\n    $(document).trigger('app:bind:masks');\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.pagarme = {\n    buildCreditCard: function buildCreditCard() {\n      var creditCard = new PagarMe.creditCard();\n      var expiration = $(\"#card-form #card-expiration\").val().split('/');\n\n      creditCard.cardExpirationMonth = parseInt(expiration[0]);\n      creditCard.cardExpirationYear = parseInt(expiration[1]);\n      creditCard.cardHolderName = $(\"#card-form #card-holder-name\").val();\n      creditCard.cardNumber = $(\"#card-form #card-number\").val();\n      creditCard.cardCVV = $(\"#card-form #card-cvc\").val();\n\n      return creditCard;\n    },\n\n    submitFormCreditCardHash: function submitFormCreditCardHash(paymentForm) {\n      var creditCard = app.pagarme.buildCreditCard();\n      var fieldErrors = creditCard.fieldErrors();\n      var hasErrors = false;\n      for (var field in fieldErrors) {\n        hasErrors = true;break;\n      }\n\n      console.log(1);\n      window.creditCardTest = creditCard;\n\n      if (hasErrors) {\n        window.fieldErrors = fieldErrors;\n\n        console.log(window.fieldErrors);\n      } else {\n        creditCard.generateHash(function (cardHash) {\n          $('#card_hash').val(cardHash);\n\n          paymentForm.get(0).submit();\n        });\n      }\n    },\n\n    init: function init() {\n      var src = 'https://assets.pagar.me/js/pagarme.min.js',\n          paymentForm = $('#card-form'),\n          pagarmeKey = $(\"#pagarme\").val();\n\n      if (paymentForm.length && pagarmeKey) {\n        loadAsset('PagarMe', src, function () {\n          PagarMe.encryption_key = pagarmeKey;\n\n          paymentForm.submit(function (event) {\n            event.preventDefault();\n\n            app.pagarme.submitFormCreditCardHash(paymentForm);\n          });\n\n          $(document).trigger('app:bind:pagarme');\n        });\n      }\n    }\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.bindPostsForm = function () {\n    $(document).on('click', '.js-post-edit', function () {\n      var post = $(this).parents('.js-post');\n\n      post.find('.js-post-body').addClass('hidden');\n      post.find('.js-post-form').removeClass('hidden');\n    });\n\n    $(document).on('click', '.js-post-cancel', function (e) {\n      var post = $(this).parents('.js-post');\n\n      post.find('.js-post-body').removeClass('hidden');\n      post.find('.js-post-form').addClass('hidden');\n    });\n\n    $(document).trigger('app:bind:bind_posts_form');\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.bindReadMore = function () {\n    $('[role=\"readmore\"]').each(function (i, el) {\n      var speed = $(el).data('speed') || 100;\n      var collapsedHeight = $(el).data('collapsed-height') || 200;\n      var moreText = $(el).data('more-text') || 'Leia Mais';\n      var lessText = $(el).data('less-text') || 'Fechar';\n\n      var currHeight = $(el).innerHeight();\n      var showLink = currHeight <= collapsedHeight;\n\n      $(el).readmore({\n        speed: speed,\n        collapsedHeight: collapsedHeight,\n        moreLink: '<a href=\"#\" class=\"' + (showLink ? 'hidden' : 'readmore-link') + '\">' + moreText + '</a>',\n        lessLink: '<a href=\"#\" class=\"' + (showLink ? 'hidden' : 'readmore-link') + '\">' + lessText + '</a>'\n      });\n    });\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.changeTimeZone = function () {\n    $('.js-to-client-timezone').each(function (i, el) {\n      var $el = $(el);\n      var format = $el.data('format');\n      var zone = moment.tz.guess();\n      var time = $el.data('timezone');\n\n      $el.html(moment.tz(time, zone).format(format));\n    });\n\n    $(document).trigger('app:change:timezone');\n  };\n\n  // TODO: FIXME: Essa chamada é para funcionar no primeiro load. Não deveria\n  // ser assim, parece ser algum erro com a inserção de cod no tema\n  app.changeTimeZone();\n})();\n\n(function () {\n  $(document).on('page:load', function () {\n    app.init();\n  });\n\n  $(document).on('page:partial-load', function () {\n    app.bindBlazy();\n  });\n\n  $(document).ready(function () {\n    app.init();\n  });\n})();","(function () {\n  'use strict';\n\n  window.app = {\n    bindGlobal: function () {\n      FastClick.attach(document.body);\n\n      $('.timeago').timeago();\n\n      $(document).trigger('app:bind:global');\n    },\n\n    bindOpenOnLoad: function () {\n      var toOpen = $('.js-open-on-load');\n      if (toOpen.length > 0) {\n        $.each(toOpen, function (i, elem) {\n          window.open($(elem).attr('href'));\n        });\n      }\n\n      $(document).trigger('app:bind:open_on_load');\n    },\n\n    bindTooltips: function () {\n      $(\"[data-toggle='tooltip']\")\n        .tooltip(\"destroy\")\n        .tooltip();\n\n      $(document).trigger('app:bind:tooltips');\n    },\n\n    checkFormValidity: function (event) {\n      var form = event.currentTarget;\n      var submitButton = $(form).find('button[type=\"submit\"]');\n\n      if (form.checkValidity()) {\n        submitButton.removeAttr('disabled');\n      } else {\n        submitButton.attr('disabled', 'disabled');\n      }\n\n      $(document).trigger('app:bind:check_form_validity');\n    },\n\n    init: function () {\n      app.pagarme.init();\n\n      app.bindGlobal();\n      app.bindBlazy();\n      app.bindOpenOnLoad();\n      app.bindMasks();\n      app.bindTooltips();\n      app.bindReadMore();\n      app.bindDatepicker();\n      app.bindFixOnScroll();\n      app.ckeditor.bindCkeditor();\n      app.bindCheckout();\n      app.lessonSidebarAjax.init();\n      app.bindExamQuestionForm();\n      app.changeTimeZone();\n      app.followBind();\n      app.bindPostsForm();\n\n      $(document).on('app:bind:ckeditor_submit', app.bindCollaborativeDiscussion);\n    }\n  }\n})();\n","(function () {\n  'use strict';\n\n  app.bindBlazy = function (e) {\n    new Blazy();\n\n    $(document).trigger('app:bind:blazy');\n  };\n})();\n","(function () {\n  'use strict';\n\n  app.bindCheckout = function () {\n    $('#js-terms-of-use-check').change(function () {\n      if ($(this).is(\":checked\") === true) {\n        $('.cta-checkout-cart').removeClass('disabled');\n      } else {\n        $('.cta-checkout-cart').addClass('disabled');\n      }\n    });\n\n    $(document).trigger('app:bind:checkout');\n  };\n})();\n","(function () {\n  'use strict';\n\n  app.ckeditor = {\n    bindCkeditor: function () {\n      var src = '//cdn.edools.com/libs/ckeditor/4.5.10/ckeditor.js';\n\n      if ($('.js-ckeditor').length) {\n        loadAsset('window.CKEDITOR', src, function () {\n          var config = {\n            language: 'pt-br',\n            skin: 'bootstrapck'\n          };\n\n          $('.js-ckeditor').each(function (index, ckeditorObj) {\n            if (!$('#cke_' + ckeditorObj.id).length) {\n              config.placeholder = ckeditorObj.placeholder; // TODO: fix it\n\n              CKEDITOR.replace(ckeditorObj.id, config);\n            }\n          });\n\n          app.ckeditor.bindCkeditorSubmit();\n          $(document).trigger('app:bind:ckeditor');\n        });\n      }\n    },\n\n    bindCkeditorSubmit: function () {\n      $.each($('.js-ckeditor'), function (index, editor) {\n        var $editor = $(editor);\n        var $form = $editor.parents('form');\n        var editorId = $editor.attr('id');\n\n        if ($form) {\n          var $submitButton = $form.find('button[type=\"submit\"]');\n\n          CKEDITOR.instances[editorId].on('change', function () {\n            if (this.getData().length) {\n              $submitButton.attr('disabled', false);\n            } else {\n              $submitButton.attr('disabled', true);\n            }\n          });\n        }\n      });\n\n      $(document).trigger('app:bind:ckeditor_submit');\n    }\n  }\n})();\n","(function () {\n  'use strict';\n\n  app.bindCollaborativeDiscussion = function() {\n    $(document).on('click', '#collaborative-discussion .js-edit-button' ,function () {\n      var commentId = $(this).data('comment-id');\n      var $comment = $('#js-comment-' + commentId);\n\n      $comment.find('.js-show-comment').addClass('hide');\n      $comment.find('.js-edit-container').removeClass('hide');\n    });\n\n    $(document).on('click', '#collaborative-discussion .js-cancel-button' ,function () {\n      var commentId = $(this).data('comment-id');\n      var $comment = $('#js-comment-' + commentId);\n\n      $comment.find('.js-show-comment').removeClass('hide');\n      $comment.find('.js-edit-container').addClass('hide');\n    });\n\n\n    $(document).trigger('app:bind:collaborative_discussion');\n  };\n})();\n","(function () {\n  'use strict';\n\n  app.bindDatepicker = function () {\n    // TODO: Handle i18n\n    $.fn.datepicker.defaults.language = 'pt-BR';\n\n    $('.datepicker').each(function (i, el) {\n      var $el = $(el);\n      var $hidden = $('<input type=\"hidden\" />').insertBefore($el.parent());\n      var frontDate = moment($el.val()).utc().format('DD/MM/YYYY');\n      var serverDate = moment($el.val()).utc().format('YYYY-MM-DD');\n      serverDate = (serverDate === 'Invalid date') ? null : serverDate;\n\n      $hidden.attr('id', $el.attr('id'));\n      $hidden.attr('name', $el.attr('name'));\n      $hidden.attr('value', serverDate);\n\n      $el.removeAttr('id');\n      $el.removeAttr('name');\n\n      if ($el.val() !== \"\") {\n        $el.val(frontDate);\n      }\n\n      $(el).datepicker()\n        .on('change', function () {\n          var date = moment($el.val(), 'DD/MM/YYYY').utc().format('YYYY-MM-DD');\n          date = (date === 'Invalid date') ? null : date;\n          $hidden.val(date);\n        });\n    });\n\n    $(document).trigger('app:bind:datepicker');\n  };\n\n})();\n","(function () {\n  'use strict';\n\n  app.bindExamQuestionForm = function () {\n    $(document).on('click', '#js-remake-exam', function () {\n      $('#answers-container').addClass('hide');\n      $('#form-container').removeClass('hide');\n    });\n\n    $(document).on('click', '#js-clean-associative-options', function (e) {\n      $('.js-associative-select option:selected').removeAttr('selected')\n    });\n\n    $(document).on('change', '.js-associative-select', function (e) {\n      var optionIndex = $(this).data('option-index');\n      var assertionId = $(this).find('option:selected').data('first-assertion-id');\n\n      $('.js-associate-assertion[data-option-index=\"'+optionIndex+'\"]').val(assertionId);\n    });\n\n    // bind all form's inputs\n    $(document).on('change', '#exam_answer_form', app.checkFormValidity);\n    // bind all form's textareas for all types of typing\n    $(document).on('input propertychange', '#exam_answer_form', app.checkFormValidity);\n\n    $(document).trigger('app:bind:bind_exam_question_form');\n  };\n})();\n","(function () {\n  'use strict';\n\n  app.bindFixOnScroll = function () {\n    if (window.innerWidth < 992) return;\n\n    $('.js-fix-on-scroll').each(function (i, el) {\n      var $el = $(el);\n      $el.wrap('<div class=\"js-fix-scroll-wrapper\"/>');\n      var $wrapper = $el.parent('.js-fix-scroll-wrapper');\n\n      var offset = $el.offset();\n      var size = {\n        width: $el.outerWidth(),\n        height: $el.outerHeight()\n      };\n\n      $wrapper.width(size.width);\n      $wrapper.height(size.height);\n\n      $(document).on('scroll', function (e) {\n        var scrollTop = $(document).scrollTop();\n\n        if (scrollTop >= offset.top) {\n          if ($el.css('position') === 'fixed') return;\n\n          $el.addClass('scroll');\n          $el.css({\n            position: 'fixed',\n            left: offset.left,\n            top: 0,\n            width: size.width,\n            height: size.height,\n            'z-index': '10000'\n          });\n        } else {\n          if ($el.css('position') === 'static') return;\n\n          $el.removeClass('scroll');\n          $el.css({\n            position: 'static',\n            left: 'auto',\n            top: 'auto',\n            width: 'auto',\n            height: 'auto'\n          });\n        }\n      })\n\n    });\n  }\n})();\n","(function () {\n  'use strict';\n\n  app.followBind = function () {\n    $(document).on({\n        mouseenter: function(){\n          $(this).addClass('hidden');\n          $('#js-unfollow').removeClass('hidden');\n        }\n    }, '#js-following');\n\n    $(document).on({\n        mouseleave: function(){\n          $('#js-following').removeClass('hidden');\n          $(this).addClass('hidden');\n        }\n    }, '#js-unfollow');\n  };\n})();\n","(function () {\n  'use strict';\n\n  app.lessonSidebar = {\n    init: function () {\n      this.nextButton().on('click', this.nextLesson);\n      this.prevButton().on('click', this.prevLesson);\n      this.toggleButton().on('click', this.toggleSidebar);\n      this.lessons().find('a').on('click', function (e) {\n        e.preventDefault();\n        app.lessonSidebar.changeLesson(null, $(this).parents('.js-content'));\n      });\n      this.lazyLoadButtons().on('click', app.lessonSidebar.resetTooltips);\n\n      this.handleButtons();\n      this.handleLessons();\n\n      var $courseContent = $('.course-content');\n      if ($courseContent.length <= 0) {\n        $(document).trigger('app:bind:lesson_sidebar');\n        return;\n      }\n\n      // Expand first item\n      var $firstModule = $courseContent.find('.module.sub-1').first();\n      app.lessonSidebar.toggleChildren($firstModule, 'expand');\n\n      $(document).on('page:change', function () {\n        $courseContent.find('.module.expanded').each(function (i, m) {\n          app.lessonSidebar.toggleChildren($(m), 'collapse', function () {\n            app.lessonSidebar.toggleChildren($(m), 'expand');\n          });\n        })\n      });\n\n      $courseContent\n        .off(\"click\")\n        .on('click', '.module', function () {\n          if ($(this).hasClass('expanded')) {\n            app.lessonSidebar.toggleChildren($(this), 'collapse');\n          } else {\n            app.lessonSidebar.toggleChildren($(this), 'expand');\n          }\n        });\n\n      $(document).trigger('app:bind:lesson_sidebar');\n    },\n\n    lazyLoadButtons: function () {\n      return $('#js-course-content-more-link, #js-course-content-prev-link');\n    },\n\n    prevButton: function () {\n      return $('#js-lesson-content-player').find('.js-btn-prev');\n    },\n\n    nextButton: function () {\n      return $('#js-lesson-content-player').find('.js-btn-next');\n    },\n\n    toggleButton: function () {\n      return $('.lesson-sidebar-toggle .btn');\n    },\n\n    lessonSidebarPanel: function () {\n      return $('.lesson-sidebar-panel');\n    },\n\n    handleButtons: function () {\n      var $next = this.currentLesson().nextAll('.js-content');\n      var $prev = this.currentLesson().prevAll('.js-content');\n\n      if ($next.length <= 0 || $next.find('a').length <= 0) {\n        app.lessonSidebar\n          .nextButton().attr('disabled', 'disabled');\n      } else {\n        app.lessonSidebar\n          .nextButton().removeAttr('disabled');\n      }\n\n      if ($prev.length <= 0 || $prev.find('a').length <= 0) {\n        app.lessonSidebar\n          .prevButton().attr('disabled', 'disabled');\n      } else {\n        app.lessonSidebar\n          .prevButton().removeAttr('disabled');\n      }\n    },\n\n    handleLessons: function () {\n      app.lessonSidebar.expandParentModule(app.lessonSidebar.currentLesson());\n\n      $(document).on('page:load page:restore', function (e) {\n\n        if (!e.originalEvent.data || e.originalEvent.data.length == 0) return;\n\n        var $html = $(e.originalEvent.data[0]);\n        app.lessonSidebar.lessons().each(function (i, el) {\n          var $el = $(el);\n          var $new = $html.find('#' + $el.attr('id'));\n          $el.html($new.html());\n        });\n      })\n    },\n\n    lessons: function () {\n      return $('.lesson-page #js-course-tree').find('.js-content');\n    },\n\n    currentLesson: function () {\n      return $($('.lesson-page #js-course-tree')\n        .find('.js-content.active')[0]);\n    },\n\n    changeLesson: function (direction, lesson) {\n      var $targetLesson = $(lesson);\n\n      if (direction == 'prev') {\n        var $prev = app.lessonSidebar\n          .currentLesson()\n          .prevAll('.js-content');\n\n        if ($prev.length > 0 && $prev.find('a').length > 0)\n          $targetLesson = $($prev[0]);\n      } else if (direction == 'next') {\n        var $next = app.lessonSidebar\n          .currentLesson()\n          .nextAll('.js-content');\n\n        if ($next.length > 0 && $next.find('a').length > 0)\n          $targetLesson = $($next[0]);\n      }\n\n      app.lessonSidebar.expandParentModule($targetLesson);\n      $targetLesson.find('a')[0].click();\n    },\n\n    prevLesson: function () {\n      app.lessonSidebar.changeLesson('prev');\n    },\n\n    nextLesson: function () {\n      app.lessonSidebar.changeLesson('next');\n    },\n\n    getModuleIndex: function (el) {\n      var sub = null;\n      $(el.attr('class').split(' '))\n        .each(function (i, x) {\n          if (x.indexOf('sub-') > -1) {\n            sub = parseInt(x.replace('sub-', ''));\n          }\n        });\n\n      return sub;\n    },\n\n    expandParentModule: function (el) {\n      var parentModules = [];\n\n      var gotTop = false;\n      $(el).prevAll('.module')\n        .each(function (i, el) {\n          var $el = $(el);\n\n          if (!gotTop) {\n            parentModules.push($el);\n          }\n\n          if (app.lessonSidebar.getModuleIndex($el) == 1) {\n            gotTop = true;\n          }\n        });\n\n      parentModules = parentModules.filter(function (module, i) {\n        return i == 0 || app.lessonSidebar.getModuleIndex($(module)) < (app.lessonSidebar.getModuleIndex($(el)) - 1);\n      });\n\n      parentModules = parentModules.reverse();\n\n      $(parentModules).each(function (i, el) {\n        app.lessonSidebar.toggleChildren(el, 'expand');\n      });\n    },\n\n    toggleChildren: function (module, mode, cb) {\n      if (module.length <= 0) return;\n\n      var $module = $(module);\n      var sub = app.lessonSidebar.getModuleIndex($module);\n\n      var $children = $module\n        .nextUntil('.sub-' + sub)\n        .filter(function () {\n          return app.lessonSidebar.getModuleIndex($(this)) == app.lessonSidebar.getModuleIndex($module) + 1;\n        });\n\n      var $childModules = $children.filter(function () {\n        return $(this).hasClass('module');\n      });\n\n      if (mode == 'expand') {\n        $module.addClass('expanded');\n        $children.removeClass('hidden');\n\n      } else if (mode == 'collapse') {\n        $module.removeClass('expanded');\n        $children.addClass('hidden');\n      }\n\n      $childModules.each(function (i, el) {\n        app.lessonSidebar.toggleChildren(el, 'collapse');\n      })\n\n      if (cb) {\n        cb();\n      }\n    },\n\n    toggleSidebar: function () {\n      app.lessonSidebar.toggleButton().toggleClass('active');\n      app.lessonSidebar.lessonSidebarPanel().toggleClass('active');\n    }\n  };\n\n})();\n","(function () {\n  'use strict';\n\n  app.lessonSidebarAjax = {\n    init: function () {\n      var self = this;\n\n      self.isActive = self.courseTree().data('is-active');\n      self.course = self.courseTree().data('course');\n      self.enrollment = self.courseTree().data('enrollment');\n      self.courseContent = self.courseTree().data('course-content');\n      self.userType = self.courseTree().data('user-type');\n      self.lessonActions = self.courseTree().data('lesson-actions');\n      self.downloadAction = self.courseTree().data('download-action');\n      self.currentLessonId = parseInt(self.courseTree().data('current-lesson-id'));\n      self.apiKey = self.courseTree().data('api-key');\n\n      self.translations = {};\n      self.translations['lesson.release_at'] = self.courseTree().data('translation-release-at');\n      self.translations['lesson.release_after'] = self.courseTree().data('translation-release-after');\n      self.translations['product.course_content.views'] = self.courseTree().data('translation-course_content-views');\n\n      if (!self.isActive) {\n        self.bindClicks();\n        self.handleLessons();\n        self.loadTopModules();\n\n        $(document).trigger('app:bind:lesson_sidebar');\n      }\n    },\n\n    // Props\n\n    courseTree: function () {\n      return $('.course-content-ajax #js-course-tree-ajax');\n    },\n\n    lazyLoadButtons: function () {\n      return $('.course-content-ajax #js-course-content-more-link, .course-content-ajax #js-course-content-prev-link');\n    },\n\n    lessons: function () {\n      return this.courseTree().find('.js-content');\n    },\n\n    currentLesson: function () {\n      return $(this.courseTree().find('.js-content.active')[0]);\n    },\n\n    toggleButton: function () {\n      return $('.lesson-sidebar-toggle .btn');\n    },\n\n    lessonSidebarPanel: function () {\n      return $('.lesson-sidebar-panel');\n    },\n\n    // Actions\n\n    bindClicks: function () {\n      var self = this;\n\n      self.lessons().find('a').on('click', function (e) {\n        e.preventDefault();\n        app.lessonSidebar.changeLesson(null, $(this).parents('.js-content'));\n      });\n\n      self.courseTree().on('click', '.module', function (e) {\n        if (!$(e.target).hasClass('module') && !$(e.target).parent().hasClass('module')) {\n          return;\n        }\n\n        e.stopPropagation();\n        self.loadChildren($(this));\n      });\n\n      self.courseTree().data('is-active', true);\n\n      self.toggleButton().on('click', this.toggleSidebar);\n    },\n\n    getLessonIcon: function (lesson) {\n      var lessonIcon = '';\n\n      if (lesson.type == 'ExamLesson') {\n        switch (lesson.activity.type) {\n          case 'Quiz': {\n            lessonIcon = 'icon-puzzle';\n            break;\n          }\n          case 'FileUpload': {\n            lessonIcon = 'icon-arrow-up-circle';\n            break;\n          }\n          case 'CollaborativeDiscussion': {\n            lessonIcon = 'icon-people';\n            break;\n          }\n          default: {\n            lessonIcon = 'icon-puzzle'\n          }\n        }\n      } else {\n        switch (lesson.media) {\n          case 'Video': {\n            lessonIcon = 'icon-camrecorder';\n            break;\n          }\n          case 'Audio': {\n            lessonIcon = 'icon-microphone';\n            break;\n          }\n          case 'Slide': {\n            lessonIcon = 'icon-chart';\n            break;\n          }\n          case 'Document': {\n            lessonIcon = 'fa fa-file-text-o';\n            break;\n          }\n          case 'Image': {\n            lessonIcon = 'icon-picture';\n            break;\n          }\n          case 'Text': {\n            lessonIcon = 'fa fa-file-text-o';\n            break;\n          }\n          case 'LiveStream': {\n            lessonIcon = 'icon-control-play';\n            break;\n          }\n          case 'VideoSlide': {\n            lessonIcon = 'icon-film';\n            break;\n          }\n          case 'ScormPackage': {\n            lessonIcon = 'icon-layers';\n            break;\n          }\n          case 'Html': {\n            lessonIcon = 'icon-doc';\n            break;\n          }\n          default: {\n            lessonIcon = 'icon-camrecorder';\n          }\n\n        }\n      }\n\n      return lessonIcon;\n    },\n\n    getContentPath: function (content) {\n      var self = this;\n\n      var enrollmentId = self.enrollment.id;\n      var courseId = self.course.id;\n\n      var path = enrollmentId ? '/enrollments/' + enrollmentId : '/admin_view';\n      path = path + '/courses/' + courseId + '/course_contents/' + content.id;\n\n      return path;\n    },\n\n    getContentDownloadPath: function (content) {\n      var self = this;\n      return self.getContentPath(content) + '/download';\n    },\n\n    checkLessonAvailability: function (lesson) {\n      var releaseAt = lesson.release_at;\n      var releaseAfter = lesson.release_after;\n\n      if (!releaseAt && !releaseAfter) {\n        return true;\n      }\n\n      var enrollmentActivatedAt = moment(this.enrollment.activated_at);\n\n      var releaseTime = releaseAt ? moment(releaseAt) : enrollmentActivatedAt.add(releaseAfter, 'days');\n\n      return moment() > releaseTime;\n    },\n\n    fetchModules: function ($parent) {\n      var self = this;\n      var id = $parent.data('id');\n      var level = $parent.data('level');\n      var $list = $parent.find('.list-group').first();\n\n      return $.ajax({\n        url: window.CORE_HOST + '/course_modules/' + id,\n        method: 'GET',\n        headers: {\n          'Authorization': 'Token token=' + self.apiKey\n        },\n        success: function (res) {\n          var modules = _.sortBy(res.course_modules, 'order');\n\n          modules = _.filter(modules, function (m) {\n            var module = _.find(self.allModules, {id: m.id});\n            return module.available != false && (module.course_content_ids.length > 0 || module.course_modules.length > 0);\n          });\n\n          var $modules = _.map(modules, function (module) {\n            return $(\n              '<li class=\"list-group-item module\" ' +\n              'data-id=\"' + module.id + '\"' +\n              'data-level=\"' + (level + 1) + '\">' +\n              '<i class=\"icon icon-arrow-right\"></i>' +\n              '<span>' + module.name + '</span>' +\n              '<i class=\"busy\"></i>' +\n              '</li>');\n          });\n\n          $list.append($modules);\n        }\n      })\n    },\n\n    fetchChildren: function ($parent) {\n      var self = this;\n      var id = $parent.data('id');\n      var level = $parent.data('level');\n      var $list = $parent.find('.list-group').first();\n\n      return $.ajax({\n        url: window.CORE_HOST + '/course_modules/' + id + '/course_contents',\n        method: 'GET',\n        headers: {\n          'Authorization': 'Token token=' + self.apiKey\n        },\n        success: function (res) {\n          var courseContents = _.filter(res.course_contents, function (lesson) {\n            return lesson.available != false;\n          });\n\n          courseContents = _.sortBy(courseContents, 'order');\n\n          var $courseContents = _.map(courseContents, function (content) {\n              var active = (self.currentLessonId == content.lesson.id ? 'active js' : '');\n              var lesson = content.lesson;\n              var lessonIcon = self.getLessonIcon(lesson);\n              var hideInProgressIcon = 'hide';\n              var hideCompletedIcon = 'hide';\n              var lessonReleased = null;\n              var releaseType = null;\n              var releaseDate = null;\n              var progress = null;\n\n              if (self.enrollment) {\n                lessonReleased = self.checkLessonAvailability(lesson);\n\n                if (self.enrollment.lessons_info && self.enrollment.lessons_info.completed.indexOf(lesson.id) > -1) {\n                  hideInProgressIcon = 'hide';\n                  hideCompletedIcon = null;\n                } else {\n                  if (self.enrollment.lessons_info && self.enrollment.lessons_info.in_progress.indexOf(lesson.id) > -1) {\n                    hideInProgressIcon = null;\n                    hideCompletedIcon = 'hide';\n                  } else {\n                    hideInProgressIcon = 'hide';\n                    hideCompletedIcon = 'hide';\n                  }\n                }\n\n                if (lesson.release_at) {\n                  releaseType = 'release_at';\n                  releaseDate = lesson.release_at;\n                } else if (lesson.release_after) {\n                  releaseType = 'release_after';\n                  releaseDate = moment(self.enrollment.activated_at).add(lesson.release_after, 'days');\n                }\n\n                if (self.lessonActions) {\n                  progress = _.find(self.enrollment.lessons_progresses, {lesson_id: lesson.id});\n                }\n              }\n\n              var html = '<li class=\"list-group-item content-lesson js-content list-group-item lesson module-item ' + active + '\" ' +\n                'id=\"content-' + content.id + '\" ' +\n                'data-id=\"' + content.lesson.id + '\"' +\n                'data-level=\"1\">' +\n                '<div id=\"lesson-' + lesson.id + '\" class=\"js-lesson content-lesson class ' + active + '\" data-lesson-id=\"' + lesson.id + '\">' +\n                '<div class=\"class-info\">' +\n\n                '<div class=\"left\"><i class=\"' + lessonIcon + '\"></i></div>' +\n\n                '<div class=\"center\">' +\n                (self.lessonActions && lessonReleased && self.userType == 'Student' ?\n                  '<a class=\"lesson-title\" href=\"' + self.getContentPath(content) + '\"><span>' + lesson.title + '</span></a>' :\n                  '<span class=\"lesson-title\"><span class=\"disabled\">' + lesson.title + '</span></span>') +\n                '</div>' +\n\n                '<div class=\"right\">' +\n                '<span class=\"progress-icon js-progress-icons\">' +\n                '<i class=\"icon-check js-completed-icon ' + hideCompletedIcon + '\"></i>' +\n                '<i class=\"icon-clock js-in-progress-icon ' + hideInProgressIcon + '\"></i>' +\n                '</span>';\n\n              if (self.lessonActions) {\n                if (progress && progress.views <= self.enrollment.max_attendance_length && self.enrollment.max_attendance_type == 'attempts') {\n                  html += '<span class=\"lesson-views attempt js-attendance\" title=\"' + self.translations['product.course_content.views'] + '\" data-tooltip-placement=\"left\" data-toggle=\"tooltip\">' +\n                    '<span>' + progress.views + '/' + self.enrollment.max_attendance_length +\n                    '</span>';\n                }\n\n                if (!lessonReleased) {\n                  var zone = moment.tz.guess();\n                  html += '<span class=\"release-date badge\">' + self.translations['lesson.' + releaseType] + '<span> ' + moment.tz(releaseDate, zone).format('DD/MM/YYYY') + '</span>' + '</span>';\n                }\n\n                if (self.downloadAction && content.downloadable) {\n                  html += '<a class=\"download-link\" href=\"' + self.getContentDownloadPath(content) + '\" data-no-turbolink>' +\n                    '<i class=\"icon-cloud-download\"></i>' +\n                    '</a>';\n                }\n              }\n\n              html += '</div>' +\n                '</div>' +\n                '</li>';\n\n              return $(html);\n            }\n          );\n\n          $list.append($courseContents);\n        }\n      });\n    },\n\n    loadTopModules: function () {\n      var self = this;\n\n      if (!self.course) return;\n\n      $.ajax({\n        url: window.CORE_HOST + '/courses/' + self.course.id + '/course_modules',\n        method: 'GET',\n        headers: {\n          'Authorization': 'Token token=' + self.apiKey\n        },\n        success: function (res) {\n          if (!res.course_modules || res.course_modules.length <= 0) return;\n\n          self.allModules = res.course_modules;\n\n          self.topModules = _.filter(res.course_modules, function (x) {\n            return (x.parent_course_module == null && x.available != false) &&\n              (x.course_content_ids.length > 0 || x.course_modules.length > 0);\n          });\n\n          self.topModules = _.sortBy(self.topModules, 'order');\n\n          var $modules = _.map(self.topModules, function (module) {\n            return $(\n              '<li class=\"list-group-item module\" ' +\n              'data-id=\"' + module.id + '\"' +\n              'data-level=\"1\">' +\n              '<i class=\"icon icon-arrow-right\"></i>' +\n              '<span>' + module.name + '</span>' +\n              '<i class=\"busy\"></i>' +\n              '</li>');\n          });\n\n          self.courseTree().prev('.busy').fadeOut('fast', function () {\n            self.courseTree().css('display', 'none');\n            self.courseTree().html($modules);\n            self.courseTree().fadeIn('fast');\n\n            if (self.courseContent) {\n              self.expandParentModules(self.courseContent.parent_modules_hash);\n            }\n          });\n\n        }\n      })\n    },\n\n    loadChildren: function (parent, cb) {\n      var self = this;\n      var $parent = $(parent);\n\n      var id = $parent.data('id');\n      var level = $parent.data('level');\n      var $list = $parent.find('.list-group').first();\n\n      if ($list.length <= 0) {\n        $parent.find('.busy').css({opacity: 1});\n        $list = $('<div class=\"list-group\"></div>');\n        $list.appendTo($parent);\n\n        $.when(self.fetchModules($parent), self.fetchChildren($parent))\n          .then(function () {\n            $parent.addClass('expanded');\n            $parent.find('.busy').css({opacity: 0});\n\n            $list.slideDown('fast');\n\n            if (typeof cb == 'function') {\n              cb();\n            }\n          });\n      } else {\n        if ($parent.hasClass('expanded')) {\n          $parent.removeClass('expanded');\n          $list.slideUp('fast');\n        } else {\n          $parent.addClass('expanded');\n          $list.slideDown('fast');\n        }\n\n        if (typeof cb == 'function') {\n          cb();\n        }\n      }\n    },\n\n    handleLessons: function () {\n      $(document).on('page:load page:restore', function (e) {\n\n        if (e.originalEvent.data.length == 0) return;\n\n        var $html = $(e.originalEvent.data[0]);\n        app.lessonSidebar.lessons().each(function (i, el) {\n          var $el = $(el);\n          var $new = $html.find('#' + $el.attr('id'));\n          $el.html($new.html());\n        });\n      })\n    },\n\n    changeLesson: function (direction, lesson) {\n      var $targetLesson = $(lesson);\n\n      if (direction == 'prev') {\n        var $prev = app.lessonSidebar\n          .currentLesson()\n          .prevAll('.js-content');\n\n        if ($prev.length > 0 && $prev.find('a').length > 0)\n          $targetLesson = $($prev[0]);\n      } else if (direction == 'next') {\n        var $next = app.lessonSidebar\n          .currentLesson()\n          .nextAll('.js-content');\n\n        if ($next.length > 0 && $next.find('a').length > 0)\n          $targetLesson = $($next[0]);\n      }\n\n      $targetLesson.find('a')[0].click();\n    },\n\n    prevLesson: function () {\n      app.lessonSidebar.changeLesson('prev');\n    },\n\n    nextLesson: function () {\n      app.lessonSidebar.changeLesson('next');\n    },\n\n    expandParentModules: function (parentModules) {\n      var self = this;\n\n      var modules = [];\n      var loopModule = parentModules.course_module;\n      modules.push(loopModule.id);\n\n      while (loopModule.parent_module) {\n        loopModule = loopModule.parent_module;\n        modules.push(loopModule.id);\n      }\n\n      modules = modules.reverse();\n\n      async.eachSeries(modules, function (moduleId, cb) {\n        var $module = $('.module[data-id=\"' + moduleId + '\"]');\n        self.loadChildren($module, cb);\n      });\n\n    },\n\n    toggleSidebar: function () {\n      app.lessonSidebar.toggleButton().toggleClass('active');\n      app.lessonSidebar.lessonSidebarPanel().toggleClass('active');\n    }\n  };\n\n})();\n","(function () {\n  'use strict';\n\n  app.bindMasks = function () {\n    var phoneMaskBehavior = function (val) {\n      return val.replace(/\\D/g, '').length === 11 ? '(00) 00000-0000' : '(00) 0000-00009';\n    };\n\n    var phoneMaskOptions = {\n      onKeyPress: function (val, e, field, options) {\n        field.mask(phoneMaskBehavior.apply({}, arguments), options);\n      }\n    };\n\n    $('#user-phone').mask(phoneMaskBehavior, phoneMaskOptions);\n    $('#user-cpf').mask('999.999.999-99');\n    $('#user-cep').mask('99.999-999');\n\n    $(document).trigger('app:bind:masks');\n  };\n})();\n","(function () {\n  'use strict';\n\n  app.pagarme = {\n    buildCreditCard: function () {\n      var creditCard = new PagarMe.creditCard();\n      var expiration = $(\"#card-form #card-expiration\").val().split('/');\n\n      creditCard.cardExpirationMonth = parseInt(expiration[0]);\n      creditCard.cardExpirationYear  = parseInt(expiration[1]);\n      creditCard.cardHolderName      = $(\"#card-form #card-holder-name\").val();\n      creditCard.cardNumber          = $(\"#card-form #card-number\").val();\n      creditCard.cardCVV             = $(\"#card-form #card-cvc\").val();\n\n      return creditCard;\n    },\n\n    submitFormCreditCardHash: function (paymentForm) {\n      var creditCard  = app.pagarme.buildCreditCard();\n      var fieldErrors = creditCard.fieldErrors();\n      var hasErrors   = false;\n      for(var field in fieldErrors) { hasErrors = true; break; }\n\n      console.log(1);\n      window.creditCardTest = creditCard;\n\n      if(hasErrors) {\n        window.fieldErrors = fieldErrors;\n\n        console.log(window.fieldErrors);\n      } else {\n        creditCard.generateHash(function(cardHash) {\n          $('#card_hash').val(cardHash);\n\n          paymentForm.get(0).submit();\n        });\n      }\n    },\n\n    init: function () {\n      var src = 'https://assets.pagar.me/js/pagarme.min.js',\n        paymentForm = $('#card-form'),\n        pagarmeKey  = $(\"#pagarme\").val();\n\n      if (paymentForm.length && pagarmeKey) {\n        loadAsset('PagarMe', src, function () {\n          PagarMe.encryption_key = pagarmeKey;\n\n          paymentForm.submit(function(event) {\n            event.preventDefault();\n\n            app.pagarme.submitFormCreditCardHash(paymentForm);\n          });\n\n          $(document).trigger('app:bind:pagarme');\n        });\n      }\n    }\n  }\n})();\n","(function () {\n  'use strict';\n\n  app.bindPostsForm = function () {\n    $(document).on('click', '.js-post-edit', function () {\n      var post = $(this).parents('.js-post');\n\n      post.find('.js-post-body').addClass('hidden');\n      post.find('.js-post-form').removeClass('hidden');\n    });\n\n    $(document).on('click', '.js-post-cancel', function (e) {\n      var post = $(this).parents('.js-post');\n\n      post.find('.js-post-body').removeClass('hidden');\n      post.find('.js-post-form').addClass('hidden');\n    });\n\n    $(document).trigger('app:bind:bind_posts_form');\n  };\n})();\n","(function () {\n  'use strict';\n\n  app.bindReadMore = function () {\n    $('[role=\"readmore\"]').each(function (i, el) {\n      var speed = $(el).data('speed') || 100;\n      var collapsedHeight = $(el).data('collapsed-height') || 200;\n      var moreText = $(el).data('more-text') || 'Leia Mais';\n      var lessText = $(el).data('less-text') || 'Fechar';\n\n      var currHeight = $(el).innerHeight();\n      var showLink = currHeight <= collapsedHeight;\n\n      $(el).readmore({\n        speed: speed,\n        collapsedHeight: collapsedHeight,\n        moreLink: '<a href=\"#\" class=\"' + (showLink ? 'hidden' : 'readmore-link') + '\">' + moreText + '</a>',\n        lessLink: '<a href=\"#\" class=\"' + (showLink ? 'hidden' : 'readmore-link') + '\">' + lessText + '</a>'\n      })\n    });\n  }\n})();\n","(function () {\n  'use strict';\n\n  app.changeTimeZone = function () {\n    $('.js-to-client-timezone').each(function (i, el) {\n      var $el = $(el);\n      var format = $el.data('format');\n      var zone = moment.tz.guess();\n      var time = $el.data('timezone');\n\n      $el.html(moment.tz(time, zone).format(format));\n    });\n\n    $(document).trigger('app:change:timezone');\n  };\n\n  // TODO: FIXME: Essa chamada é para funcionar no primeiro load. Não deveria\n  // ser assim, parece ser algum erro com a inserção de cod no tema\n  app.changeTimeZone();\n})();\n","(function () {\n  $(document).on('page:load', function () {\n    app.init();\n  });\n\n  $(document).on('page:partial-load', function () {\n    app.bindBlazy();\n  });\n\n  $(document).ready(function () {\n    app.init();\n  });\n})();\n"],"sourceRoot":"/source/"}