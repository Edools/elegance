{"version":3,"sources":["theme.base.min.js","app.js","blazy.js","categoryList.js","chat.js","checkout.js","ckeditor.js","colaborativeDiscussion.js","contrastMode.js","courseRating.js","datepicker.js","examQuestionForm.js","fixOnScroll.js","follow.js","forumFeed.js","lessonList.js","lessonPage.js","mask.js","notepad.js","postsForm.js","readmore.js","recaptcha.js","simpleEditor.js","studentDoubts.js","timetags.js","timezone.js","main.js"],"names":["_toConsumableArray","arr","Array","isArray","i","arr2","length","from","window","app","bindGlobal","FastClick","attach","document","body","$","timeago","trigger","bindOpenOnLoad","toOpen","each","elem","open","attr","bindTooltips","tooltip","selector","checkFormValidity","event","form","currentTarget","submitButton","find","checkValidity","removeAttr","init","bindRecaptcha","bindBlazy","bindMasks","bindReadMore","bindDatepicker","bindFixOnScroll","ckeditor","bindCkeditor","bindCheckout","bindForumFeed","bindCourseRating","lessonList","chat","studentDoubts","notepad","categoryList","bindExamQuestionForm","changeTimeZone","followBind","lessonPage","timeTags","bindPostsForm","accessibility","on","bindCollaborativeDiscussion","e","Blazy","self","this","$categoryList","isActive","data","bindClicks","expandParents","expandParent","parent","$parent","animate","$nextListGroup","first","$parentCategoryItem","stop","slideToggle","toggle","toggleClass","$loopItem","parents","groupsPagination","page","perPage","totalPages","collaboratorsPagination","followsPagination","$chat","$groups","$students","$roomTitle","$roomUsersCount","$text","$messagesContainer","$messagesScroll","$sendForm","$loadMoreGroupsButton","$loadMoreCollaboratorsButton","$loadMoreStudentsButton","$generalChatGroup","user","schoolId","apiKey","userId","id","chatType","chatLesson","bindScroll","empty","keyup","code","keyCode","which","shiftKey","submitMessage","simpleEditor","firebase","apps","initializeApp","CHAT_CONFIG","database","authenticate","lessonRoomUsers","ref","hide","changeRoom","registerCurrentUser","loadRoomOnlineUsers","off","userFirebase","remove","loadSchoolGroup","loadGroups","loadCollaborators","loadFollows","listenConnectionChanges","ajax","url","CHAT_FIREBASE_SERVICE_HOST","method","headers","Authorization","success","auth","signInWithCustomToken","firebase_token","then","response","monitorConnectionState","error","console","userRef","child","uid","snap","val","onDisconnect","set","onIdle","onAway","onBack","connectionsRef","updateStatus","key","status","$element","orderByChild","equalTo","Number","once","snapshot","hasChildren","forEach","html","height","parentHeight","isPercentHeight","indexOf","replace","chatHeight","scrollbar","sanitizeHtml","$root","children","el","$el","tagName","last","get","pad","n","preventDefault","$html","text","focus","date","Date","messages","push","name","first_name","avatar_url","cover_image_url","timestamp","moment","unix","schedule","getHours","getMinutes","scrollToEnd","scrollTop","scrollHeight","renderMessage","renderTemplate","avatar","format","append","liquid","template","Liquid","parse","render","loadMessages","setMessage","bind","limitToLast","setUser","removeUser","CORE_HOST","is_school","prepend","total_pages","groups","_","sortBy","map","g","group","selectFirstRoomAvailable","addProfileItems","collaborators","users","divClass","removeClass","roomName","title","addClass","ids","parseInt","sort","$selectedRoom","click","change","is","src","loadAsset","config","language","skin","index","ckeditorObj","placeholder","CKEDITOR","bindCkeditorSubmit","editor","$editor","$form","editorId","$submitButton","instances","getData","commentId","$comment","toggleHighContrast","arrayOfPrices","concat","element","price","String","innerHTML","R$Position","hasPor","commaPosition","substring","posAfterComma","slice","setAttribute","log","hasClass","fadeOut","fadeIn","checkAccessibiltyFunction","possibleAddresses","","cart","sign_in","enrollments","forums","products","edit","certificates","channels","orders","address","location","href","lastIndexOf","undefined","search","adress","selectedElement","offset","top","keydown","courseId","modal","fn","datepicker","defaults","$hidden","insertBefore","frontDate","utc","serverDate","$question","optionIndex","assertionId","innerWidth","wrap","$wrapper","size","width","outerWidth","outerHeight","css","position","left","z-index","mouseenter","mouseleave","$this","openText","closeText","$accordionBody","collapse","fixForumFeed","topicId","$postsCounter","$postsCounterSize","counter","courseTreeExists","courseTree","course","enrollment","courseContent","userType","lessonActions","downloadAction","currentLessonId","translations","lessonProgress","completed","handleLessons","loadTopModules","bindChangeLesson","$mediaControls","enrollmentId","enrollment_id","progressIcon","requirementsExists","$item","content_id","checkLessonCompleted","lazyLoadButtons","lessons","currentLesson","toggleButton","lessonListPanel","type","iconType","progress","cb","requirementsElements","filter","item","requirementsUnified","idx","requirements","toArray","exists","lesson_id","lessons_progresses","bindChangeLessonActive","course_path_regex","lesson_path_regex","path","pathname","lesson_path","test","path_array","split","changeLesson","target","stopPropagation","loadChildren","toggleSidebar","getLessonIcon","lesson","lessonIcon","activity","media","getContentPath","content","getContentDownloadPath","checkLessonAvailability","releaseAt","release_at","releaseAfter","release_after","enrollmentActivatedAt","activated_at","releaseTime","add","checkTrialByType","$tree","constrains_name","payment_method","constrains_tree","trial_constrains","constrains","hasOwnProperty","fetchModules","level","$list","res","modules","course_modules","m","module","allModules","available","course_content_ids","$modules","fetchChildren","courseContents","course_contents","lessons_info","$courseContents","active","hideInProgressIcon","hideCompletedIcon","lessonReleased","releaseType","releaseDate","in_progress","requirement","JSON","stringify","views","max_attendance_length","max_attendance_type","translation","zone","tz","guess","isDownloadableMedia","downloadable","checkNextButtonUnlocked","topModules","x","parent_course_module","disabled","prev","expandParentModules","parent_modules_hash","opacity","appendTo","when","slideDown","slideUp","originalEvent","$new","direction","$targetLesson","$prev","prevAll","$next","nextAll","parentModules","loopModule","course_module","parent_module","reverse","async","eachSeries","moduleId","$module","REGEX_COLLABORATIVE_DISCUSSIONS","REGEX_EXAM_ANSWERS","isCollaborativeDiscuttion","value","isExamAnswer","ajaxSuccess","xhr","settings","$currentItemIcon","phoneMaskBehavior","phoneMaskOptions","onKeyPress","field","options","mask","apply","arguments","noteContainer","loadNote","saveNote","note","note_id","$button","buttonLabel","prop","_id","post","speed","collapsedHeight","moreText","lessText","currHeight","innerHeight","showLink","readmore","moreLink","lessLink","onLoadRecaptcha","$recaptcha","grecaptcha","sitekey","elId","disableButton","buttonSelector","$formButton","callback","createShortcut","bindKey","isMac","navigator","platform","toUpperCase","bindFunction","character","fromCharCode","ctrl","ctrlKey","meta","metaKey","score","handleDrag","handleDrop","clientX","y","clientY","file","dataTransfer","files","URLObj","URL","webkitURL","source","createObjectURL","match","img","createElement","range","caretPositionFromPoint","pos","createRange","setStart","offsetNode","insertNode","caretRangeFromPoint","updateButtons","bold","queryCommandState","italic","underline","container","$container","$input","$btnAction","registerTriggers","registerDropZone","registerShortcuts","action","execCommand","dropZone","doubtsContainer","expandButton","hideButton","loadMoreButton","loadDoubts","per_page","complete","$btn","$edoolsPlayerContainer","edoolsPlayer","time","setTime","ready"],"mappings":"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","file":"theme.base.min.js","sourcesContent":["'use strict';\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n(function () {\n  'use strict';\n\n  window.app = {\n    bindGlobal: function bindGlobal() {\n      FastClick.attach(document.body);\n\n      $('.timeago').timeago();\n\n      $(document).trigger('app:bind:global');\n    },\n\n    bindOpenOnLoad: function bindOpenOnLoad() {\n      var toOpen = $('.js-open-on-load');\n      if (toOpen.length > 0) {\n        $.each(toOpen, function (i, elem) {\n          window.open($(elem).attr('href'));\n        });\n      }\n\n      $(document).trigger('app:bind:open_on_load');\n    },\n\n    bindTooltips: function bindTooltips() {\n      $(\"body\").tooltip(\"destroy\").tooltip({\n        selector: '[data-toggle=\"tooltip\"]'\n      });\n\n      $(document).trigger('app:bind:tooltips');\n    },\n\n    checkFormValidity: function checkFormValidity(event) {\n      var form = event.currentTarget;\n      var submitButton = $(form).find('button[type=\"submit\"]');\n\n      if (form.checkValidity()) {\n        submitButton.removeAttr('disabled');\n      } else {\n        submitButton.attr('disabled', 'disabled');\n      }\n\n      $(document).trigger('app:bind:check_form_validity');\n    },\n\n    init: function init() {\n      app.bindGlobal();\n      app.bindRecaptcha();\n      app.bindBlazy();\n      app.bindOpenOnLoad();\n      app.bindMasks();\n      app.bindTooltips();\n      app.bindReadMore();\n      app.bindDatepicker();\n      app.bindFixOnScroll();\n      app.ckeditor.bindCkeditor();\n      app.bindCheckout();\n      app.bindForumFeed();\n      app.bindCourseRating();\n      app.lessonList.init();\n      app.chat.init();\n      app.studentDoubts.init();\n      app.notepad.init();\n      app.categoryList.init();\n      app.bindExamQuestionForm();\n      app.changeTimeZone();\n      app.followBind();\n      app.lessonPage();\n      app.timeTags();\n      app.bindPostsForm();\n      app.accessibility();\n\n      $(document).on('app:bind:ckeditor_submit', app.bindCollaborativeDiscussion);\n    }\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.bindBlazy = function (e) {\n    new Blazy();\n\n    $(document).trigger('app:bind:blazy');\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.categoryList = {\n    init: function init() {\n      var self = this;\n      self.$categoryList = $('#js-category-list');\n\n      if (self.$categoryList.length == 0) return;\n\n      self.isActive = self.$categoryList.data('is-active') || self.isActive;\n\n      if (!self.isActive) {\n        self.bindClicks();\n        self.$categoryList.attr('data-is-active', true);\n        self.isActive = true;\n      }\n\n      self.expandParents();\n    },\n\n    bindClicks: function bindClicks() {\n      var self = this;\n\n      $(document).on('click', '#js-category-list .category-item .toggle-btn', function () {\n        self.expandParent($(this).parent('.category-item'), true);\n      });\n    },\n\n    expandParent: function expandParent($parent, animate) {\n      var $nextListGroup = $parent.find('.list-group').first();\n      var $parentCategoryItem = $parent;\n\n      if (animate) {\n        $nextListGroup.stop().slideToggle('fast');\n      } else {\n        $nextListGroup.stop().toggle();\n      }\n\n      $parentCategoryItem.toggleClass('expanded');\n    },\n\n    expandParents: function expandParents() {\n      var self = this;\n      var $loopItem = self.$categoryList.find('.category-item.current').first();\n\n      while ($loopItem) {\n        self.expandParent($loopItem, false);\n\n        var $parent = $loopItem.parents('.category-item').first();\n\n        if ($parent.length > 0) {\n          $loopItem = $parent;\n        } else {\n          $loopItem = null;\n        }\n      }\n    }\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.chat = {\n    groupsPagination: {\n      page: 0,\n      perPage: 5,\n      totalPages: 0\n    },\n    collaboratorsPagination: {\n      page: 0,\n      perPage: 5,\n      totalPages: 0\n    },\n    followsPagination: {\n      page: 0,\n      perPage: 5,\n      totalPages: 0\n    },\n\n    init: function init() {\n      var self = this;\n\n      self.$chat = $('.js-chat');\n\n      if (self.$chat.length <= 0) {\n        return;\n      }\n\n      self.$groups = $('.js-groups', self.$chat);\n      self.$students = $('.js-students', self.$chat);\n      self.$roomTitle = $('#js-room-title');\n      self.$roomUsersCount = $('#js-room-users-count');\n      self.$text = $('.js-chat-text');\n      self.$messagesContainer = $('.js-chat-messages .js-content');\n      self.$messagesScroll = $('.js-chat-messages .js-scroll');\n      self.$sendForm = $('#js-send-messages');\n      self.$loadMoreGroupsButton = self.$chat.find('.js-load-more-groups');\n      self.$loadMoreCollaboratorsButton = self.$chat.find('.js-load-more-collaborators');\n      self.$loadMoreStudentsButton = self.$chat.find('.js-load-more-students');\n      self.$generalChatGroup = self.$chat.find('.js-chat-group-general');\n\n      self.user = self.$chat.data('user');\n      self.schoolId = self.$chat.data('school-id');\n      self.apiKey = self.$chat.data('api-key');\n      self.userId = self.user.id;\n      self.chatType = self.$chat.data('type');\n      self.chatLesson = self.$chat.data('lesson');\n\n      self.bindScroll();\n\n      self.$messagesContainer.empty();\n\n      // bind form\n      self.$text.keyup(function (e) {\n        var code = e.keyCode ? e.keyCode : e.which;\n        if (code === 13 && !e.shiftKey) {\n          self.submitMessage(e);\n        }\n      });\n\n      app.simpleEditor.init('#js-send-messages');\n      self.$sendForm.on('submit', self.submitMessage);\n\n      if (firebase.apps.length <= 0) {\n        firebase.initializeApp(window.CHAT_CONFIG);\n      }\n\n      self.database = firebase.database();\n\n      self.authenticate();\n\n      if (self.chatType === 'lesson-chat') {\n        self.lessonRoomUsers = self.database.ref('lesson_room_users/' + self.chatLesson.id);\n        self.$loadMoreStudentsButton.hide();\n        self.changeRoom(null);\n        self.registerCurrentUser();\n        self.loadRoomOnlineUsers();\n\n        $(document).off('page:before-change').on('page:before-change', function () {\n          if (self.userFirebase) {\n            self.userFirebase.remove();\n          }\n        });\n      } else {\n        self.loadSchoolGroup();\n        self.loadGroups();\n        self.loadCollaborators();\n        self.loadFollows();\n\n        self.$loadMoreGroupsButton.on('click', function () {\n          self.loadGroups();\n        });\n\n        self.$loadMoreCollaboratorsButton.on('click', function () {\n          self.loadCollaborators();\n        });\n\n        self.$loadMoreStudentsButton.on('click', function () {\n          self.loadFollows();\n        });\n\n        self.$generalChatGroup.on('click', function () {\n          self.changeRoom({\n            currentTarget: self.$generalChatGroup\n          });\n        });\n      }\n\n      self.listenConnectionChanges();\n    },\n\n    authenticate: function authenticate() {\n      var self = app.chat;\n\n      $.ajax({\n        url: window.CHAT_FIREBASE_SERVICE_HOST + '/authenticate',\n        method: 'POST',\n        headers: {\n          'Authorization': self.apiKey\n        }\n      }).success(function (data) {\n        firebase.auth().signInWithCustomToken(data.body.firebase_token).then(function (response) {\n          self.monitorConnectionState(response);\n        }).catch(function (error) {\n          console.error('Error creating custom token:', error);\n        });\n      }).error(function (error) {\n        console.error('Could not authenticate', error);\n      });\n    },\n\n    monitorConnectionState: function monitorConnectionState(response) {\n      var userRef = firebase.database().ref('user_status').child(response.uid);\n\n      // Monitor connection state on browser tab\n      firebase.database().ref('.info/connected').on('value', function (snap) {\n        if (snap.val()) {\n          // if we lose network then remove this user from the list\n          userRef.onDisconnect().set('offline');\n          // set user's online status\n          userRef.set('online');\n        }\n      });\n\n      document.onIdle = function () {\n        userRef.set('idle');\n      };\n\n      document.onAway = function () {\n        userRef.set('away');\n      };\n\n      document.onBack = function () {\n        userRef.set('online');\n      };\n    },\n\n    listenConnectionChanges: function listenConnectionChanges() {\n      var self = app.chat;\n      var connectionsRef = this.database.ref('user_status');\n\n      connectionsRef.on('child_added', function (data) {\n        self.updateStatus(data.val(), data.key);\n      });\n\n      connectionsRef.on('child_changed', function (data) {\n        self.updateStatus(data.val(), data.key);\n      });\n\n      connectionsRef.on('child_removed', function (data) {\n        self.updateStatus(data.val(), 'offline');\n      });\n    },\n\n    updateStatus: function updateStatus(status, userId) {\n      var self = this;\n\n      var $element = $('*[data-id=\"' + userId + '\"]');\n\n      if (self.chatType === 'lesson-chat') {\n        if (status === 'offline') {\n          if ($element.length) {\n            $element.remove();\n          }\n\n          self.lessonRoomUsers.orderByChild('id').equalTo(Number(userId)).once('value').then(function (snapshot) {\n            if (snapshot.hasChildren()) {\n              snapshot.forEach(function (snap) {\n                self.lessonRoomUsers.child(snap.key).remove();\n              });\n            }\n\n            self.$roomUsersCount.html($('.chat-profile-list-item', self.$students).length);\n          });\n        }\n      } else {\n        if ($element.length) {\n          $('.status .icon', $element).first().attr('class', 'icon icon-' + status);\n        }\n      }\n    },\n\n    bindScroll: function bindScroll() {\n      var height = this.$chat.data('height');\n      var parent = this.$chat.data('parent');\n      var parentHeight = parent ? $(parent).height() : $(window).height();\n      var isPercentHeight = height.indexOf('%') > -1;\n      height = Number(height.replace('%', '').replace('px', ''));\n\n      if (isPercentHeight === true) {\n        this.chatHeight = parentHeight / 100 * height;\n      } else {\n        this.chatHeight = height;\n      }\n\n      this.$chat.height(this.chatHeight);\n      this.$chat.find('.js-sidebar-scroll').scrollbar({});\n      this.$chat.find('.js-chat-messages .js-scroll').scrollbar({});\n    },\n\n    sanitizeHtml: function sanitizeHtml($root) {\n      $root.find('div:empty').remove();\n\n      // Removes elements with only '<br/>' children\n      $root.children().each(function (i, el) {\n        var $el = $(el);\n        if (el.tagName !== 'BR' && $el.find('br').length > 0 && $el.find('br').length == $el.children().length) {\n          $el.remove();\n        }\n      });\n\n      // Removes last '<br/>'\n      if ($root.last().get(0).tagName === 'BR') {\n        $root.last().remove();\n      }\n\n      return $root;\n    },\n\n    submitMessage: function submitMessage(event) {\n      event.preventDefault();\n      var self = app.chat;\n\n      var $html = self.sanitizeHtml(self.$text);\n      var text = $html.html();\n\n      if (text.length <= 0) return;\n\n      self.$text.html('').focus();\n\n      function pad(n) {\n        return n < 10 ? '0' + n : n;\n      }\n\n      var date = new Date();\n\n      self.messages.push({\n        id: self.user.id,\n        name: self.user.first_name,\n        avatar_url: self.user.cover_image_url,\n        text: text,\n        timestamp: moment().unix(),\n        schedule: pad(date.getHours()) + ':' + pad(date.getMinutes())\n      });\n    },\n\n    scrollToEnd: function scrollToEnd() {\n      var self = this;\n      self.$messagesScroll.scrollTop(self.$messagesScroll[0].scrollHeight);\n    },\n\n    renderMessage: function renderMessage(data) {\n      var self = app.chat;\n      var html = self.renderTemplate('chat-message', {\n        avatar: data.avatar_url,\n        name: data.name,\n        text: data.text,\n        schedule: moment.unix(data.timestamp).format('LLL')\n      });\n\n      self.$messagesContainer.append(html);\n      self.scrollToEnd();\n    },\n\n    renderTemplate: function renderTemplate(key, data) {\n      var liquid = $('#' + key + '-template').html();\n      var template = Liquid.parse(liquid);\n\n      return template.render(data);\n    },\n\n    loadMessages: function loadMessages() {\n      var self = app.chat;\n      var setMessage = function (data) {\n        self.renderMessage(data.val());\n      }.bind(self);\n\n      self.messages.limitToLast(12).on('child_added', setMessage);\n      self.messages.limitToLast(12).on('child_changed', setMessage);\n    },\n\n    loadRoomOnlineUsers: function loadRoomOnlineUsers() {\n      var self = app.chat;\n      var setUser = function (data) {\n        var $html = $(self.renderTemplate('chat-profile-list-item', data.val()));\n        $('.js-students', self.$chat).append($html);\n        self.$roomUsersCount.html($('.chat-profile-list-item', self.$students).length);\n      }.bind(self);\n\n      var removeUser = function (data) {\n        $('.js-students [data-id=\"' + data.val().id + '\"]').remove();\n        self.$roomUsersCount.html($('.chat-profile-list-item', self.$students).length);\n      }.bind(self);\n\n      self.lessonRoomUsers.on('child_added', setUser);\n      self.lessonRoomUsers.on('child_removed', removeUser);\n    },\n\n    loadSchoolGroup: function loadSchoolGroup() {\n      var self = app.chat;\n      $.ajax({\n        url: window.CORE_HOST + '/chat/school_group',\n        method: 'GET',\n        headers: {\n          'Authorization': 'Token token=' + self.apiKey\n        }\n      }).success(function (data) {\n        data.is_school = true;\n\n        var $html = $(self.renderTemplate('chat-group-list-item', data));\n        $html.on('click', app.chat.changeRoom);\n        self.$groups.prepend($html);\n      });\n    },\n\n    loadGroups: function loadGroups() {\n      var self = app.chat;\n      self.$loadMoreGroupsButton.attr('disabled', 'disabled');\n\n      $.ajax({\n        url: window.CORE_HOST + '/chat/groups?per_page=' + self.groupsPagination.perPage + '&page=' + (self.groupsPagination.page + 1),\n        method: 'GET',\n        headers: {\n          'Authorization': 'Token token=' + self.apiKey\n        }\n      }).success(function (data) {\n        self.groupsPagination.page = self.groupsPagination.page + 1;\n        self.$loadMoreGroupsButton.removeAttr('disabled', 'disabled');\n        self.groupsPagination.totalPages = data.total_pages;\n\n        if (self.groupsPagination.page >= self.groupsPagination.totalPages) {\n          self.$loadMoreGroupsButton.attr('disabled', 'disabled');\n        }\n\n        var groups = data.groups;\n        groups = _.sortBy(groups, { is_school: false });\n        groups = _.map(groups, function (g) {\n          g.is_school = false;\n          return g;\n        });\n\n        groups.forEach(function (group) {\n          var $html = $(self.renderTemplate('chat-group-list-item', group));\n          $html.on('click', app.chat.changeRoom);\n          self.$groups.append($html);\n        });\n\n        self.selectFirstRoomAvailable();\n      });\n    },\n\n    loadCollaborators: function loadCollaborators() {\n      var self = app.chat;\n      self.$loadMoreCollaboratorsButton.attr('disabled', 'disabled');\n\n      $.ajax({\n        url: window.CORE_HOST + '/chat/collaborators?per_page=' + self.collaboratorsPagination.perPage + '&page=' + (self.collaboratorsPagination.page + 1),\n        method: 'GET',\n        headers: {\n          'Authorization': 'Token token=' + self.apiKey\n        }\n      }).success(function (data) {\n        self.collaboratorsPagination.page = self.collaboratorsPagination.page + 1;\n        self.$loadMoreCollaboratorsButton.removeAttr('disabled', 'disabled');\n        self.collaboratorsPagination.totalPages = data.total_pages;\n\n        if (self.collaboratorsPagination.page >= self.collaboratorsPagination.totalPages) {\n          self.$loadMoreCollaboratorsButton.attr('disabled', 'disabled');\n        }\n\n        self.addProfileItems(data.collaborators, 'js-team');\n        self.selectFirstRoomAvailable();\n      });\n    },\n\n    loadFollows: function loadFollows() {\n      var self = app.chat;\n      self.$loadMoreStudentsButton.attr('disabled', 'disabled');\n\n      $.ajax({\n        url: window.CORE_HOST + '/chat/follows?per_page=' + self.followsPagination.perPage + '&page=' + (self.followsPagination.page + 1),\n        method: 'GET',\n        headers: {\n          'Authorization': 'Token token=' + self.apiKey\n        }\n      }).success(function (data) {\n        self.followsPagination.page = self.followsPagination.page + 1;\n        self.$loadMoreStudentsButton.removeAttr('disabled', 'disabled');\n        self.followsPagination.totalPages = data.total_pages;\n\n        if (self.followsPagination.page >= self.followsPagination.totalPages) {\n          self.$loadMoreStudentsButton.attr('disabled', 'disabled');\n        }\n\n        self.addProfileItems(data.users, 'js-students');\n        self.selectFirstRoomAvailable();\n      });\n    },\n\n    registerCurrentUser: function registerCurrentUser() {\n      var self = this;\n\n      self.lessonRoomUsers.orderByChild('id').equalTo(self.user.id).once('value').then(function (snapshot) {\n        if (!snapshot.hasChildren()) {\n          self.lessonRoomUsers.push(self.user).then(function (snap) {\n            self.userFirebase = snap;\n          });\n        }\n      });\n    },\n\n    addProfileItems: function addProfileItems(users, divClass) {\n      var self = app.chat;\n\n      users.forEach(function (user) {\n        var $html = $(self.renderTemplate('chat-profile-list-item', user));\n        $html.on('click', app.chat.changeRoom);\n        $('.' + divClass).append($html);\n      });\n    },\n\n    changeRoom: function changeRoom(event) {\n      var self = app.chat;\n\n      $('.chat-sidebar-list-item').removeClass('active');\n\n      var roomName = 'messages';\n\n      if (self.chatType === 'lesson-chat') {\n        roomName += '_lessons/' + self.chatLesson.id;\n\n        // change room name on div\n        self.$roomTitle.html(self.chatLesson.title);\n        self.$roomUsersCount.html(0);\n      } else {\n        var $element = $(event.currentTarget);\n        $element.addClass('active');\n\n        if ($element.data('type') === 'products') {\n          // room name on firebase\n          roomName += '_products/' + $element.data('id');\n\n          // change room name on div\n          self.$roomTitle.html($('.js-chat-group-name', $element).html());\n          self.$roomUsersCount.html($('.js-chat-group-users-count', $element).html());\n        } else if ($element.data('type') === 'users') {\n          var ids = [self.userId, parseInt($element.data('id'))].sort();\n          roomName += '_users/' + ids[0] + '/' + ids[1];\n\n          // change room name on div\n          self.$roomTitle.html($('.info .name', $element).html());\n          self.$roomUsersCount.html($('.info .location', $element).html());\n        } else if ($element.data('type') === 'schools') {\n          // room name on firebase\n          roomName += '_schools/' + self.schoolId;\n\n          // change room name on div\n          self.$roomTitle.html($('.js-chat-group-name', $element).html());\n          self.$roomUsersCount.html($('.js-chat-group-users-count', $element).html());\n        }\n      }\n\n      self.$messagesContainer.html('');\n\n      if (self.messages) {\n        self.messages.off();\n      }\n\n      self.messages = self.database.ref(roomName);\n      self.loadMessages();\n    },\n\n    selectFirstRoomAvailable: function selectFirstRoomAvailable() {\n      if (!self.$selectedRoom) {\n        // Select first room\n        self.$selectedRoom = $('.chat-sidebar-list-item').first();\n        self.$selectedRoom.click();\n      }\n    }\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.bindCheckout = function () {\n    $('#js-terms-of-use-check').change(function () {\n      if ($(this).is(\":checked\") === true) {\n        $('.cta-checkout-cart').removeClass('disabled');\n      } else {\n        $('.cta-checkout-cart').addClass('disabled');\n      }\n    });\n\n    $(document).trigger('app:bind:checkout');\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.ckeditor = {\n    bindCkeditor: function bindCkeditor() {\n      var src = '//cdn.edools.com/libs/ckeditor/4.5.10/ckeditor.js';\n\n      if ($('.js-ckeditor').length) {\n        loadAsset('window.CKEDITOR', src, function () {\n          var config = {\n            language: 'pt-br',\n            skin: 'bootstrapck'\n          };\n\n          $('.js-ckeditor').each(function (index, ckeditorObj) {\n            if (!$('#cke_' + ckeditorObj.id).length) {\n              config.placeholder = ckeditorObj.placeholder; // TODO: fix it\n\n              CKEDITOR.replace(ckeditorObj.id, config);\n            }\n          });\n\n          app.ckeditor.bindCkeditorSubmit();\n          $(document).trigger('app:bind:ckeditor');\n        });\n      }\n    },\n\n    bindCkeditorSubmit: function bindCkeditorSubmit() {\n      $.each($('.js-ckeditor'), function (index, editor) {\n        var $editor = $(editor);\n        var $form = $editor.parents('form');\n        var editorId = $editor.attr('id');\n\n        if ($form) {\n          var $submitButton = $form.find('button[type=\"submit\"]');\n\n          CKEDITOR.instances[editorId].on('change', function () {\n            if (this.getData().length) {\n              $submitButton.attr('disabled', false);\n            } else {\n              $submitButton.attr('disabled', true);\n            }\n          });\n        }\n      });\n\n      $(document).trigger('app:bind:ckeditor_submit');\n    }\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.bindCollaborativeDiscussion = function () {\n    $(document).on('click', '#collaborative-discussion .js-edit-button', function () {\n      var commentId = $(this).data('comment-id');\n      var $comment = $('#js-comment-' + commentId);\n\n      $comment.find('.js-show-comment').addClass('hide');\n      $comment.find('.js-edit-container').removeClass('hide');\n    });\n\n    $(document).on('click', '#collaborative-discussion .js-cancel-button', function () {\n      var commentId = $(this).data('comment-id');\n      var $comment = $('#js-comment-' + commentId);\n\n      $comment.find('.js-show-comment').removeClass('hide');\n      $comment.find('.js-edit-container').addClass('hide');\n    });\n\n    $(document).trigger('app:bind:collaborative_discussion');\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.accessibility = function () {\n\n    var adjustPricesForAccessibility = function () {\n      //This function generates Aria-Labels for the tags with prices.\n      //Screen Readers can find some issues when reading '$' and ','.\n\n      var arrayOfPrices = new (Function.prototype.bind.apply(Array, [null].concat(_toConsumableArray($('.product-accessibility-list').find('li').find('a')))))();\n\n      arrayOfPrices.forEach(function (element) {\n\n        var price = String(element.innerHTML);\n        var R$Position = price.indexOf('R$');\n        var hasPor = price.indexOf('por');\n        var commaPosition = price.indexOf(',');\n\n        if (R$Position != -1) {\n\n          if (hasPor != -1) {\n\n            price = price.substring(R$Position + 3, price.length).replace(/\\s+/g, ' ').replace('<span>', '').replace('</span>', '').replace('<a>', '').replace('</a>', '');\n\n            var posAfterComma = price.indexOf(',') + 3;\n\n            price = price.slice(0, posAfterComma) + ' reais' + price.slice(posAfterComma, price.length);\n          } else {\n            price = price.substring(R$Position + 3, commaPosition + 3) + ' reais';\n          }\n\n          price = price.replace(',00', '');\n          //console.log(price);                                    \n        }\n        element.setAttribute('aria-label', price);\n      });\n      console.log('criei as labels');\n    }();\n\n    var toggleHighContrast = function toggleHighContrast() {\n      //This function toggles the High Contrast Mode.\n\n      $(\"html\").toggleClass('accessible');\n\n      if ($(\"html\").hasClass('accessible')) {\n        $(\".contrast-on-btn-text\").fadeOut(200, function () {\n          $(\".contrast-on-btn-text\").text(\"Alto Contraste Ligado\").fadeIn(200);\n        });\n      } else {\n        $(\".contrast-on-btn-text\").fadeOut(200, function () {\n          $(\".contrast-on-btn-text\").text(\"Alto Contraste Desligado\").fadeIn(200);\n        });\n      }\n    };\n\n    $(\".contrast-on-btn\").click(function () {\n      toggleHighContrast();\n    });\n\n    var checkPageName = function () {\n      //This function generates a text inside the \"accessibility-location\" div.\n      //It works like a map for Blind Users, since they may find it hard to know exactly on which page they're in.\n      var possibleAddresses = {\n        \"\": \"Página Inicial\",\n        \"cart\": \"Carrinho\",\n        \"sign_in\": \"Fazer Login\",\n        \"enrollments\": \"Meus Cursos\",\n        \"forums\": \"Fóruns\",\n        \"products\": \"Produtos\",\n        \"edit\": \"Meu Perfil\",\n        \"certificates\": \"Meus Certificados\",\n        \"channels\": \"Mensagens\",\n        \"orders\": \"Meus Pedidos\"\n      };\n\n      var address = window.location.href.substring(window.location.href.lastIndexOf('/') + 1, window.location.href.length);\n\n      address = possibleAddresses[address];\n\n      if (address == undefined) {\n        if (window.location.href.search('/profile/')) address = 'Perfil Público';else adress = '';\n      }\n\n      $(\"#accessibility-location\").text('Voc\\xEA est\\xE1 em: ' + address + ' - Topo da P\\xE1gina');\n      var i = 0;\n      i++;\n      console.log(\"rodei\" + i + \"vezes\");\n    }();\n\n    var checkAccessibiltyFunction = function checkAccessibiltyFunction(selectedElement) {\n      // This Function listens to the accessibility-shortcuts.\n      // It helps the Screen Readers' users to navigate through the website.\n      if (selectedElement == null) var selectedElement = $(':focus').attr('id');\n\n      switch (selectedElement) {\n        case 'accessibility-btn-1':\n          $(window).scrollTop($(\"#accessibility-main-content\").offset().top - 50);\n          $(\"#accessibility-main-content\").focus();\n          break;\n        case 'accessibility-btn-2':\n          $(window).scrollTop($(\"#main-navbar\").offset().top - 50);\n          $(\"#main-navbar\").focus();\n          break;\n        case 'accessibility-btn-3':\n          $(window).scrollTop($(\"#accessibility-contact\").offset().top - 50);\n          $(\"#accessibility-contact\").focus();\n          break;\n        case 'accessibility-btn-4':\n          $(window).scrollTop($(\"#accessibility-location\").offset().top - 50);\n          $(\"#accessibility-location\").focus();\n          break;\n      }\n    };\n\n    $(window).keydown(function (e) {\n      if (!$(':focus').is('input')) {\n        //It avoids problems with SHIFT inside 'INPUTS'\n        switch (e.which) {\n          case 13:\n            //Enter\n            checkAccessibiltyFunction();\n            break;\n          case 49:\n            //1\n            if (e.shiftKey) checkAccessibiltyFunction('accessibility-btn-1');\n            break;\n          case 50:\n            //2  \n            if (e.shiftKey) checkAccessibiltyFunction('accessibility-btn-2');\n            break;\n          case 51:\n            //3\n            if (e.shiftKey) checkAccessibiltyFunction('accessibility-btn-3');\n            break;\n          case 52:\n            //4\n            if (e.shiftKey) checkAccessibiltyFunction('accessibility-btn-4');\n            break;\n        }\n      }\n    });\n\n    $(document).trigger('app:bind:accessibility');\n  };\n})();\n(function () {\n  'use strict';\n\n  app.bindCourseRating = function () {\n    $(document).on(\"rate-course\", function (event, courseId) {\n      $('#js-rating-course-' + courseId + '-modal').modal();\n    });\n\n    $(document).on(\"course-rating-created\", function (event, courseId) {\n      $('#js-rating-course-' + courseId + '-modal').modal('hide');\n    });\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.bindDatepicker = function () {\n    // TODO: Handle i18n\n    $.fn.datepicker.defaults.language = 'pt-BR';\n\n    $('.datepicker').each(function (i, el) {\n      var $el = $(el);\n      var $hidden = $('<input type=\"hidden\" />').insertBefore($el.parent());\n      var frontDate = moment($el.val()).utc().format('DD/MM/YYYY');\n      var serverDate = moment($el.val()).utc().format('YYYY-MM-DD');\n      serverDate = serverDate === 'Invalid date' ? null : serverDate;\n\n      $hidden.attr('id', $el.attr('id'));\n      $hidden.attr('name', $el.attr('name'));\n      $hidden.attr('value', serverDate);\n\n      $el.removeAttr('id');\n      $el.removeAttr('name');\n\n      if ($el.val() !== \"\") {\n        $el.val(frontDate);\n      }\n\n      $(el).datepicker().on('change', function () {\n        var date = moment($el.val(), 'DD/MM/YYYY').utc().format('YYYY-MM-DD');\n        date = date === 'Invalid date' ? null : date;\n        $hidden.val(date);\n      });\n    });\n\n    $(document).trigger('app:bind:datepicker');\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.bindExamQuestionForm = function () {\n    $(document).on('click', '#js-remake-exam', function () {\n      $('#answers-container').addClass('hide');\n      $('#form-container').removeClass('hide');\n    });\n\n    $(document).on('click', '.js-clean-associative-options', function () {\n      $(this).parents('.associative-question').find('.js-associative-select option:selected').removeAttr('selected');\n    });\n\n    $(document).on('change', '.js-associative-select', function () {\n      var $question = $(this).parents('.associative-question');\n      var optionIndex = $(this).data('option-index');\n      var assertionId = $(this).find('option:selected').data('first-assertion-id');\n\n      $question.find('.js-associate-assertion[data-option-index=\"' + optionIndex + '\"]').val(assertionId);\n    });\n\n    // bind all form's inputs\n    $(document).on('change', '#exam_answer_form', app.checkFormValidity);\n    // bind all form's textareas for all types of typing\n    $(document).on('input propertychange', '#exam_answer_form', app.checkFormValidity);\n\n    $(document).trigger('app:bind:bind_exam_question_form');\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.bindFixOnScroll = function () {\n    $('.js-fix-on-scroll').each(function (i, el) {\n      if (!$(el).hasClass('js-fix-on-scroll-mobile') && window.innerWidth < 992) {\n        return;\n      }\n\n      var $el = $(el);\n      $el.wrap('<div class=\"js-fix-scroll-wrapper\"/>');\n      var $wrapper = $el.parent('.js-fix-scroll-wrapper');\n\n      var offset = $el.offset();\n      var size = {\n        width: $el.outerWidth(),\n        height: $el.outerHeight()\n      };\n\n      $wrapper.width(size.width);\n      $wrapper.height(size.height);\n\n      $(document).on('scroll', function (e) {\n        var scrollTop = $(document).scrollTop();\n\n        if (scrollTop >= offset.top) {\n          if ($el.css('position') === 'fixed') return;\n\n          $el.parent().addClass('scroll');\n          $el.addClass('scroll');\n          $el.css({\n            position: 'fixed',\n            left: offset.left,\n            top: 0,\n            width: size.width,\n            height: size.height,\n            'z-index': '10000'\n          });\n        } else {\n          if ($el.css('position') === 'static') return;\n\n          $el.removeClass('scroll');\n          $el.parent().removeClass('scroll');\n          $el.css({\n            position: 'static',\n            left: 'auto',\n            top: 'auto',\n            width: 'auto',\n            height: 'auto'\n          });\n        }\n      });\n    });\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.followBind = function () {\n    $(document).on({\n      mouseenter: function mouseenter() {\n        $(this).addClass('hidden');\n        $('#js-unfollow').removeClass('hidden');\n      }\n    }, '#js-following');\n\n    $(document).on({\n      mouseleave: function mouseleave() {\n        $('#js-following').removeClass('hidden');\n        $(this).addClass('hidden');\n      }\n    }, '#js-unfollow');\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.bindForumFeed = function () {\n    $(document).on(\"click\", \".js-collapse-toggle-text\", function (event) {\n      event.preventDefault();\n      var $this = $(this);\n      var openText = $this.data('open-text');\n      var closeText = $this.data('close-text');\n      var $accordionBody = $($this.attr('href'));\n\n      if ($accordionBody.hasClass('in')) {\n        $accordionBody.collapse('hide');\n        $this.html(closeText);\n      } else {\n        $accordionBody.collapse('show');\n        $this.html(openText);\n        app.bindBlazy();\n      }\n    });\n\n    $(document).on(\"fix_forum_feed\", function () {\n      app.fixForumFeed();\n    });\n\n    $(document).on(\"forum_feed_post_created\", function (event, topicId) {\n      var $postsCounter = $(\"#js-topic-item-\" + topicId + \" .js-posts-count\");\n      var $postsCounterSize = $postsCounter.find('.size');\n      var counter = parseInt($postsCounterSize.html());\n\n      $postsCounterSize.html(counter + 1);\n      $postsCounter.removeClass('hidden');\n      $(\"#js-topic-\" + topicId + \"-posts\").removeClass('hidden');\n      $(\"#js-topic-\" + topicId + \"-posts-list-panel\").collapse('show');\n\n      app.fixForumFeed();\n    });\n\n    $('a[data-toggle=\"tab\"]').on('shown.bs.tab', function (e) {\n      app.fixForumFeed();\n    });\n  };\n\n  app.fixForumFeed = function () {\n    app.bindGlobal();\n    app.bindBlazy();\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.lessonList = {\n    init: function init() {\n      var self = this;\n\n      self.courseTreeExists = self.courseTree().length;\n      self.isActive = self.courseTree().data('is-active');\n      self.course = self.courseTree().data('course');\n      self.enrollment = self.courseTree().data('enrollment');\n      self.courseContent = self.courseTree().data('course-content');\n      self.userType = self.courseTree().data('user-type');\n      self.lessonActions = self.courseTree().data('lesson-actions');\n      self.downloadAction = self.courseTree().data('download-action');\n      self.currentLessonId = parseInt(self.courseTree().data('current-lesson-id'));\n      self.apiKey = self.courseTree().data('api-key');\n      self.translations = {};\n      self.translations['lesson.release_at'] = self.courseTree().data('translation-release-at');\n      self.translations['lesson.release_after'] = self.courseTree().data('translation-release-after');\n      self.translations['product.course_content.views'] = self.courseTree().data('translation-course_content-views');\n\n      if (self.lessonProgress() && self.lessonProgress().completed) {\n        $('.btn-next-lesson').removeClass('disabled');\n      }\n\n      if (self.courseTreeExists && !self.isActive) {\n        self.bindClicks();\n        self.handleLessons();\n        self.loadTopModules();\n        self.bindChangeLesson();\n\n        $(document).trigger('app:bind:lesson_sidebar');\n\n        $(document).on('lesson-completed', function (event, lessonProgress) {\n          var $mediaControls = $('.btn-next-lesson');\n          var enrollmentId = lessonProgress.data.enrollment_id;\n\n          if (self.progressIcon('completed').hasClass('hide')) {\n            self.progressIcon('completed').removeClass('hide');\n          }\n\n          if (!self.progressIcon('progress').hasClass('hide')) {\n            self.progressIcon('progress').addClass('hide');\n          }\n\n          if ($mediaControls.size() > 0) {\n            $mediaControls.removeClass('disabled');\n          }\n\n          app.lessonList.requirementsExists(lessonProgress.data, function ($item, content_id) {\n            if ($item && content_id) {\n              app.lessonList.checkLessonCompleted(enrollmentId, content_id, function (completed) {\n                if (completed) {\n                  $item.removeClass('blocked');\n                  $item.find('.right > .icon-lock').remove();\n                }\n              });\n            }\n          });\n        });\n      }\n    },\n\n    // Props\n    courseTree: function courseTree() {\n      return $('.course-content #js-course-tree-ajax');\n    },\n\n    lazyLoadButtons: function lazyLoadButtons() {\n      return $('.course-content #js-course-content-more-link, .course-content #js-course-content-prev-link');\n    },\n\n    lessons: function lessons() {\n      return this.courseTree().find('.js-content');\n    },\n\n    currentLesson: function currentLesson() {\n      return $(this.courseTree().find('.js-content.active')[0]);\n    },\n\n    toggleButton: function toggleButton() {\n      return $('.lesson-list-toggle .btn');\n    },\n\n    lessonListPanel: function lessonListPanel() {\n      return $('.lesson-list-panel');\n    },\n\n    lessonProgress: function lessonProgress() {\n      return $('#js-media-player').data('lesson-progress');\n    },\n\n    progressIcon: function progressIcon(type) {\n      var iconType = {\n        completed: '.js-completed-icon',\n        progress: '.js-in-progress-icon'\n      };\n\n      return this.currentLesson().find(iconType[type]);\n    },\n\n    requirementsExists: function requirementsExists(lessonProgress, cb) {\n      if (!lessonProgress) {\n        return false;\n      }\n\n      var requirementsElements = $('.lesson-list-panel [data-requirements]').filter(function (index, item) {\n        return $(item).data('requirements').length > 0;\n      });\n\n      var requirementsUnified = requirementsElements.map(function (idx, item) {\n        return {\n          item: $(item),\n          requirements: $(item).data('requirements')\n        };\n      }).toArray();\n\n      var exists = _.find(requirementsUnified, { requirements: [{ content_id: lessonProgress.lesson_id }] });\n\n      if (exists) {\n        var $item = exists.item;\n        if (cb) {\n          return cb($item, lessonProgress.lesson_id);\n        }\n      } else {\n        if (cb) {\n          return cb(null);\n        }\n      }\n    },\n\n    checkLessonCompleted: function checkLessonCompleted(enrollmentId, id, cb) {\n      var self = this;\n      var completed = false;\n      var apiKey = $('.course-content #js-course-tree-ajax').data('api-key');\n\n      $.ajax({\n        url: window.CORE_HOST + '/enrollments/' + enrollmentId + '/lessons_progresses?lesson_id=' + id,\n        method: 'GET',\n        headers: {\n          'Authorization': 'Token token=' + apiKey\n        }\n      }).success(function (data) {\n        completed = data.lessons_progresses[0].completed;\n\n        cb(completed);\n      });\n    },\n\n    // Actions\n    bindChangeLesson: function bindChangeLesson() {\n      var self = this;\n\n      if (!self.bindChangeLessonActive) {\n        self.bindChangeLessonActive = true;\n        var course_path_regex = /enrollments\\/\\d+\\/courses\\/\\d+$/;\n        var lesson_path_regex = /enrollments\\/\\d+\\/courses\\/\\d+\\/course_contents\\/\\d+$/;\n\n        $(document).on(\"ready page:load\", function (e) {\n          var path = window.location.pathname;\n          var lesson_path = lesson_path_regex.test(path);\n\n          if (course_path_regex.test(path) || lesson_path) {\n            self.lessons().removeClass('active');\n\n            if (lesson_path) {\n              var path_array = path.split('/');\n              var content_id = path_array[path_array.length - 1];\n\n              $(\"#content-\" + content_id + \".js-content\").addClass('active');\n            }\n          }\n        });\n      }\n    },\n\n    bindClicks: function bindClicks() {\n      var self = this;\n\n      self.lessons().find('a').on('click', function (e) {\n        e.preventDefault();\n        app.lessonList.changeLesson(null, $(this).parents('.js-content'));\n      });\n\n      self.courseTree().on('click', '.module', function (e) {\n        if (!$(e.target).hasClass('module') && !$(e.target).parent().hasClass('module')) {\n          return;\n        }\n\n        e.stopPropagation();\n\n        self.loadChildren($(this));\n      });\n\n      self.courseTree().data('is-active', true);\n\n      self.toggleButton().on('click', this.toggleSidebar);\n    },\n\n    getLessonIcon: function getLessonIcon(lesson) {\n      var lessonIcon = '';\n\n      if (lesson.type === 'ExamLesson' && lesson.activity) {\n        switch (lesson.activity.type) {\n          case 'Quiz':\n            {\n              lessonIcon = 'icon-puzzle';\n              break;\n            }\n          case 'FileUpload':\n            {\n              lessonIcon = 'icon-arrow-up-circle';\n              break;\n            }\n          case 'CollaborativeDiscussion':\n            {\n              lessonIcon = 'icon-people';\n              break;\n            }\n          default:\n            {\n              lessonIcon = 'icon-puzzle';\n            }\n        }\n      } else if (lesson.media) {\n        switch (lesson.media.type) {\n          case 'Video':\n            {\n              lessonIcon = 'icon-camrecorder';\n              break;\n            }\n          case 'Audio':\n            {\n              lessonIcon = 'icon-microphone';\n              break;\n            }\n          case 'Slide':\n            {\n              lessonIcon = 'icon-chart';\n              break;\n            }\n          case 'Document':\n            {\n              lessonIcon = 'icon-doc';\n              break;\n            }\n          case 'Image':\n            {\n              lessonIcon = 'icon-picture';\n              break;\n            }\n          case 'Text':\n            {\n              lessonIcon = 'icon-doc';\n              break;\n            }\n          case 'LiveStream':\n            {\n              lessonIcon = 'icon-control-play';\n              break;\n            }\n          case 'VideoSlide':\n            {\n              lessonIcon = 'icon-film';\n              break;\n            }\n          case 'ScormPackage':\n            {\n              lessonIcon = 'icon-layers';\n              break;\n            }\n          case 'Html':\n            {\n              lessonIcon = 'icon-doc';\n              break;\n            }\n          case 'Html5':\n            {\n              lessonIcon = 'icon-docs';\n              break;\n            }\n          default:\n            {\n              lessonIcon = 'icon-camrecorder';\n            }\n\n        }\n      }\n\n      return lessonIcon;\n    },\n\n    getContentPath: function getContentPath(content) {\n      var self = this;\n\n      var enrollmentId = self.enrollment.id;\n      var courseId = self.course.id;\n\n      var path = enrollmentId ? '/enrollments/' + enrollmentId : '/admin_view';\n      path = path + '/courses/' + courseId + '/course_contents/' + content.id;\n\n      return path;\n    },\n\n    getContentDownloadPath: function getContentDownloadPath(content) {\n      var self = this;\n      return self.getContentPath(content) + '/download';\n    },\n\n    checkLessonAvailability: function checkLessonAvailability(lesson) {\n      var releaseAt = lesson.release_at;\n      var releaseAfter = lesson.release_after;\n\n      if (!releaseAt && !releaseAfter) {\n        return true;\n      }\n\n      var enrollmentActivatedAt = moment(this.enrollment.activated_at);\n\n      var releaseTime = releaseAt ? moment(releaseAt) : enrollmentActivatedAt.add(releaseAfter, 'days');\n\n      return moment() > releaseTime;\n    },\n\n    checkTrialByType: function checkTrialByType(type, id) {\n      var $tree = $('#js-course-tree-ajax');\n      var enrollment = $tree.data('enrollment');\n      var constrains_name = 'trial_' + type + '_ids';\n\n      var payment_method = enrollment && enrollment.payment_method;\n      var constrains_tree = $tree.data('school-product') && $tree.data('school-product').trial_constrains;\n      var constrains = constrains_tree && payment_method && constrains_tree[payment_method];\n\n      if (constrains && !constrains.hasOwnProperty(constrains_name)) {\n        return false;\n      }\n\n      if (enrollment && !enrollment['on_trial?']) {\n        return false;\n      }\n\n      if (constrains_tree && constrains[constrains_name]) {\n        return constrains[constrains_name].indexOf(id) > -1;\n      }\n\n      return false;\n    },\n\n    fetchModules: function fetchModules($parent) {\n      var self = this;\n      var id = $parent.data('id');\n      var level = $parent.data('level');\n      var $list = $parent.find('.list-group').first();\n\n      return $.ajax({\n        url: window.CORE_HOST + '/course_modules/' + id,\n        method: 'GET',\n        headers: {\n          'Authorization': 'Token token=' + self.apiKey\n        },\n        success: function success(res) {\n          var modules = _.sortBy(res.course_modules, 'order');\n\n          modules = _.filter(modules, function (m) {\n            var module = _.find(self.allModules, { id: m.id });\n            return module.available !== false && (module.course_content_ids.length > 0 || module.course_modules.length > 0);\n          });\n\n          var $modules = _.map(modules, function (module) {\n            return $('<li class=\"list-group-item module\" ' + 'data-id=\"' + module.id + '\"' + 'data-level=\"' + (level + 1) + '\">' + '<i class=\"icon icon-arrow-right\"></i>' + '<span>' + module.name + '</span>' + '<i class=\"busy busy-xs\"></i>' + '</li>');\n          });\n\n          $list.append($modules);\n        }\n      });\n    },\n\n    fetchChildren: function fetchChildren($parent) {\n      var self = this;\n      var id = $parent.data('id');\n      var level = $parent.data('level');\n      var $list = $parent.find('.list-group').first();\n\n      return $.ajax({\n        url: window.CORE_HOST + '/course_modules/' + id + '/course_contents',\n        method: 'GET',\n        headers: {\n          'Authorization': 'Token token=' + self.apiKey\n        },\n        success: function success(res) {\n          var courseContents = _.filter(res.course_contents, function (lesson) {\n            return lesson.available !== false;\n          });\n\n          courseContents = _.sortBy(courseContents, 'order');\n\n          if (self.enrollment) {\n            courseContents = _.map(courseContents, function (content) {\n              content.completed = self.enrollment.lessons_info && self.enrollment.lessons_info.completed.indexOf(content.lesson.id) > -1;\n              return content;\n            });\n          }\n\n          var $courseContents = _.map(courseContents, function (content) {\n            var active = self.currentLessonId === content.lesson.id ? 'active js' : '';\n            var lesson = content.lesson;\n            var lessonIcon = self.getLessonIcon(lesson);\n            var hideInProgressIcon = 'hide';\n            var hideCompletedIcon = 'hide';\n            var lessonReleased = null;\n            var releaseType = null;\n            var releaseDate = null;\n            var progress = null;\n            var requirements = content.requirements;\n            var available = true;\n\n            if (self.enrollment) {\n              lessonReleased = self.checkLessonAvailability(lesson) || self.userType === 'Collaborator';\n\n              if (self.enrollment.lessons_info && self.enrollment.lessons_info.completed.indexOf(lesson.id) > -1) {\n                hideInProgressIcon = 'hide';\n                hideCompletedIcon = null;\n              } else {\n                if (self.enrollment.lessons_info && self.enrollment.lessons_info.in_progress.indexOf(lesson.id) > -1) {\n                  hideInProgressIcon = null;\n                  hideCompletedIcon = 'hide';\n                } else {\n                  hideInProgressIcon = 'hide';\n                  hideCompletedIcon = 'hide';\n                }\n              }\n\n              if (lesson.release_at) {\n                releaseType = 'release_at';\n                releaseDate = lesson.release_at;\n              } else if (lesson.release_after) {\n                releaseType = 'release_after';\n                releaseDate = moment(self.enrollment.activated_at).add(lesson.release_after, 'days');\n              }\n\n              if (self.lessonActions) {\n                progress = _.find(self.enrollment.lessons_progresses, { lesson_id: lesson.id });\n              }\n\n              _.each(requirements, function (requirement) {\n                var exists = self.enrollment.lessons_info && self.enrollment.lessons_info.completed.indexOf(requirement.content_id) > -1 || self.userType === 'Collaborator';\n                if (!exists) {\n                  available = false;\n                }\n              });\n            }\n\n            if (content.completed) {\n              $('.btn-next-lesson').removeClass('disabled');\n            }\n\n            var html = '<li class=\"list-group-item content-lesson js-content list-group-item lesson module-item ' + active + (!available || self.enrollment && self.checkTrialByType('content', content.id) ? ' blocked' : '') + '\" ' + 'id=\"content-' + content.id + '\" ' + 'data-requirements=\\'' + JSON.stringify(requirements) + '\\'' + 'data-id=\"' + content.lesson.id + '\"' + 'data-level=\"1\">' + '<div id=\"lesson-' + lesson.id + '\" class=\"js-lesson content-lesson ' + active + (!lessonReleased ? ' not-released' : '') + '\" data-lesson-id=\"' + lesson.id + '\">' + '<div class=\"class-info\">' + '<div class=\"left\"><i class=\"' + lessonIcon + '\"></i></div>' + '<div class=\"center\">' + (self.lessonActions && lessonReleased ? '<a class=\"lesson-title\" href=\"' + self.getContentPath(content) + '\"><span>' + lesson.title + '</span></a>' : '<span class=\"lesson-title\"><span class=\"disabled\">' + lesson.title + '</span></span>') + '</div>' + '<div class=\"right\">' + (!available || self.enrollment && self.checkTrialByType('content', content.id) ? '<i class=\"icon-lock\"></i>' : '') + '<span class=\"progress-icon js-progress-icons\">' + '<i class=\"icon-check js-completed-icon ' + hideCompletedIcon + '\"></i>' + '<i class=\"icon-clock js-in-progress-icon ' + hideInProgressIcon + '\"></i>' + '</span>';\n\n            if (self.lessonActions) {\n              if (progress && progress.views <= self.enrollment.max_attendance_length && self.enrollment.max_attendance_type == 'attempts') {\n                var translation = self.translations['product.course_content.views'];\n\n                translation = translation.replace('{{ progress.views }}', progress.views);\n                translation = translation.replace('{{ enrollment.max_attendance_length }}', self.enrollment.max_attendance_length);\n\n                html += '<span class=\"lesson-views attempt js-attendance badge\" title=\"' + translation + '\" data-tooltip-placement=\"left\" data-toggle=\"tooltip\">' + '<span>' + progress.views + '/' + self.enrollment.max_attendance_length + '</span>' + '</span>';\n              }\n\n              if (!lessonReleased) {\n                var zone = moment.tz.guess();\n                html += '<span class=\"release-date badge\">' + self.translations['lesson.' + releaseType] + '<span> ' + moment.tz(releaseDate, zone).format('DD/MM/YYYY') + '</span>' + '</span>';\n              }\n\n              var isDownloadableMedia = content.lesson.media && ['Document', 'Audio', 'Download'].indexOf(content.lesson.media.type) > -1;\n\n              if ((self.downloadAction || content.downloadable) && isDownloadableMedia) html += '<a class=\"download-link\" href=\"' + self.getContentDownloadPath(content) + '\" data-no-turbolink>' + '<i class=\"icon-cloud-download\"></i>' + '</a>';\n            }\n\n            html += '</div>' + '</div>' + '</li>';\n\n            return $(html);\n          });\n\n          $list.append($courseContents);\n          self.checkNextButtonUnlocked();\n        }\n      });\n    },\n\n    checkNextButtonUnlocked: function checkNextButtonUnlocked() {\n      var lessonProgress = this.lessonProgress();\n\n      app.lessonList.requirementsExists(lessonProgress, function ($item, content_id) {\n        if ($item && content_id) {\n          if (!content_id || !lessonProgress.hasOwnProperty('enrollment_id')) {\n            return;\n          }\n\n          app.lessonList.checkLessonCompleted(lessonProgress.enrollment_id, content_id, function (completed) {\n            if (completed) {\n              $('.btn-next-lesson').removeClass('disabled');\n              $item.removeClass('blocked');\n              $item.find('.right > .icon-lock').remove();\n            }\n          });\n        } else {\n          $('.btn-next-lesson').removeClass('disabled');\n        }\n      });\n    },\n\n    loadTopModules: function loadTopModules() {\n      var self = this;\n\n      if (!self.course) return;\n\n      $.ajax({\n        url: window.CORE_HOST + '/courses/' + self.course.id + '/course_modules',\n        method: 'GET',\n        headers: {\n          'Authorization': 'Token token=' + self.apiKey\n        },\n        success: function success(res) {\n          if (!res.course_modules || res.course_modules.length <= 0) return;\n\n          self.allModules = res.course_modules;\n\n          self.topModules = _.filter(res.course_modules, function (x) {\n            return !x.parent_course_module && x.available !== false && (x.course_content_ids.length > 0 || x.course_modules.length > 0);\n          });\n\n          self.topModules = _.sortBy(self.topModules, 'order');\n\n          var $modules = _.map(self.topModules, function (module) {\n            var disabled = self.enrollment && self.checkTrialByType('module', module.id);\n\n            return $('<li class=\"list-group-item module ' + (disabled ? 'disabled' : '') + '\" ' + 'data-id=\"' + module.id + '\"' + 'data-level=\"1\">' + '<i class=\"icon icon-arrow-right\"></i>' + '<span>' + module.name + '</span>' + '<i class=\"busy busy-xs\"></i>' + '</li>');\n          });\n\n          self.courseTree().prev('.course-content-busy').fadeOut('fast', function () {\n            self.courseTree().css('display', 'none');\n            self.courseTree().html($modules);\n            self.courseTree().fadeIn('fast');\n\n            if (self.courseContent) {\n              self.expandParentModules(self.courseContent.parent_modules_hash);\n            }\n          });\n        }\n      });\n    },\n\n    loadChildren: function loadChildren(parent, cb) {\n      var self = this;\n      var $parent = $(parent);\n\n      var id = $parent.data('id');\n      var level = $parent.data('level');\n      var $list = $parent.find('.list-group').first();\n\n      if ($list.length <= 0) {\n        $parent.find('.busy').css({ opacity: 1 });\n        $list = $('<ul class=\"list-group\" style=\"display: none;\"></ul>');\n        $list.appendTo($parent);\n\n        $.when(self.fetchModules($parent), self.fetchChildren($parent)).then(function () {\n          $parent.addClass('expanded');\n          $parent.find('.busy').css({ opacity: 0 });\n\n          $list.slideDown('fast');\n\n          if (typeof cb === 'function') {\n            cb();\n          }\n        });\n      } else {\n        if ($parent.hasClass('expanded')) {\n          $parent.removeClass('expanded');\n          $list.slideUp('fast');\n        } else {\n          $parent.addClass('expanded');\n          $list.slideDown('fast');\n        }\n\n        if (typeof cb === 'function') {\n          cb();\n        }\n      }\n    },\n\n    handleLessons: function handleLessons() {\n      $(document).on('page:load page:restore', function (e) {\n\n        if (!e.originalEvent || !e.originalEvent.data || e.originalEvent.data.length == 0) return;\n\n        var $html = $(e.originalEvent.data[0]);\n        app.lessonList.lessons().each(function (i, el) {\n          var $el = $(el);\n          var $new = $html.find('#' + $el.attr('id'));\n          $el.html($new.html());\n        });\n      });\n    },\n\n    changeLesson: function changeLesson(direction, lesson) {\n      var $targetLesson = $(lesson);\n\n      if (direction === 'prev') {\n        var $prev = app.lessonList.currentLesson().prevAll('.js-content');\n\n        if ($prev.length > 0 && $prev.find('a').length > 0) $targetLesson = $($prev[0]);\n      } else if (direction === 'next') {\n        var $next = app.lessonList.currentLesson().nextAll('.js-content');\n\n        if ($next.length > 0 && $next.find('a').length > 0) $targetLesson = $($next[0]);\n      }\n\n      $targetLesson.find('a')[0].click();\n    },\n\n    expandParentModules: function expandParentModules(parentModules) {\n      var self = this;\n\n      var modules = [];\n      var loopModule = parentModules.course_module;\n      modules.push(loopModule.id);\n\n      while (loopModule.parent_module) {\n        loopModule = loopModule.parent_module;\n        modules.push(loopModule.id);\n      }\n\n      modules = modules.reverse();\n\n      async.eachSeries(modules, function (moduleId, cb) {\n        var $module = $('.module[data-id=\"' + moduleId + '\"]');\n        self.loadChildren($module, cb);\n      });\n    },\n\n    toggleSidebar: function toggleSidebar() {\n      app.lessonList.toggleButton().toggleClass('active');\n      app.lessonList.lessonListPanel().toggleClass('active');\n    }\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.lessonPage = function () {\n    var REGEX_COLLABORATIVE_DISCUSSIONS = /\\/collaborative_discussions\\/([0-9]+)\\/collaborative_comments/;\n    var REGEX_EXAM_ANSWERS = /\\/exam_answers/;\n\n    var isCollaborativeDiscuttion = function isCollaborativeDiscuttion(value) {\n      return REGEX_COLLABORATIVE_DISCUSSIONS.test(value);\n    };\n\n    var isExamAnswer = function isExamAnswer(value) {\n      return REGEX_EXAM_ANSWERS.test(value);\n    };\n\n    $(document).ajaxSuccess(function (event, xhr, settings) {\n      if (isCollaborativeDiscuttion(settings.url) || isExamAnswer(settings.url)) {\n        var lessonProgress = app.lessonList.lessonProgress();\n\n        app.lessonList.requirementsExists(lessonProgress, function ($item, content_id) {\n          if (content_id && lessonProgress.enrollment_id) {\n            app.lessonList.checkLessonCompleted(lessonProgress.enrollment_id, content_id, function (completed) {\n              if (completed) {\n                var $currentItemIcon = app.lessonList.currentLesson().find('.js-in-progress-icon');\n                $currentItemIcon.removeClass('icon-clock');\n                $currentItemIcon.removeClass('js-in-progress-icon');\n                $currentItemIcon.addClass('js-in-completed-icon');\n                $currentItemIcon.addClass('icon-check');\n\n                $('.btn-next-lesson').removeClass('disabled');\n                $item.removeClass('disabled');\n                $item.removeClass('blocked');\n                $item.find('.right > .icon-lock').remove();\n              }\n            });\n          }\n        }, function () {\n          $('.btn-next-lesson').removeClass('disabled');\n        });\n      }\n    });\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.bindMasks = function () {\n    var phoneMaskBehavior = function phoneMaskBehavior(val) {\n      return val.replace(/\\D/g, '').length === 11 ? '(00) 00000-0000' : '(00) 0000-00009';\n    };\n\n    var phoneMaskOptions = {\n      onKeyPress: function onKeyPress(val, e, field, options) {\n        field.mask(phoneMaskBehavior.apply({}, arguments), options);\n      }\n    };\n\n    $('#user-phone').mask(phoneMaskBehavior, phoneMaskOptions);\n    $('#user-cpf').mask('999.999.999-99');\n    $('#user-cep').mask('99.999-999');\n\n    $(document).trigger('app:bind:masks');\n  };\n})();\n\napp.notepad = {\n  page: 1,\n\n  noteContainer: function noteContainer() {\n    return $('#notepad-container');\n  },\n\n  form: function form() {\n    return $('#js-notepad-form');\n  },\n\n  loadNote: function loadNote(lesson_id, cb) {\n    $.ajax({\n      url: window.location.pathname + '/notepads',\n      method: 'GET',\n      success: function success() {\n        if (typeof cb == 'function') {\n          cb();\n        }\n      }\n    });\n  },\n\n  saveNote: function saveNote(cb) {\n    var note = $(\"#js-note\").html();\n    var note_id = $(\"#js_note_id\").val();\n\n    var $button = $(\"#save_notepad_button\");\n    var buttonLabel = $button.html();\n    $button.html($button.data(\"sending\"));\n    $button.prop('disabled', true);\n\n    $.ajax({\n      url: window.location.pathname + '/notepads',\n      method: 'POST',\n      data: {\n        _id: note_id,\n        note: note\n      },\n      success: function success() {\n        $button.html(buttonLabel);\n        $button.prop('disabled', false);\n        if (typeof cb == 'function') {\n          cb();\n        }\n      }\n    });\n  },\n\n  init: function init() {\n    var self = this;\n    if (this.noteContainer().length <= 0) return;\n    this.loadNote($(\"#lesson_id\").val());\n\n    $(\"#notepad_form\").on('submit', function (event) {\n      event.preventDefault();\n      self.saveNote();\n    });\n  }\n};\n\n(function () {\n  'use strict';\n\n  app.bindPostsForm = function () {\n    $(document).on('click', '.js-post-edit', function () {\n      var post = $(this).parents('.js-post');\n\n      post.find('.js-post-body').addClass('hidden');\n      post.find('.js-post-form').removeClass('hidden');\n    });\n\n    $(document).on('click', '.js-post-cancel', function (e) {\n      var post = $(this).parents('.js-post');\n\n      post.find('.js-post-body').removeClass('hidden');\n      post.find('.js-post-form').addClass('hidden');\n    });\n\n    $(document).trigger('app:bind:bind_posts_form');\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.bindReadMore = function () {\n    $('[role=\"readmore\"]').each(function (i, el) {\n      var speed = $(el).data('speed') || 100;\n      var collapsedHeight = $(el).data('collapsed-height') || 200;\n      var moreText = $(el).data('more-text') || 'Leia Mais';\n      var lessText = $(el).data('less-text') || 'Fechar';\n\n      var currHeight = $(el).innerHeight();\n      var showLink = currHeight <= collapsedHeight;\n\n      $(el).readmore({\n        speed: speed,\n        collapsedHeight: collapsedHeight,\n        moreLink: '<a href=\"#\" class=\"' + (showLink ? 'hidden' : 'readmore-link') + '\">' + moreText + '</a>',\n        lessLink: '<a href=\"#\" class=\"' + (showLink ? 'hidden' : 'readmore-link') + '\">' + lessText + '</a>'\n      });\n    });\n  };\n})();\n\n(function () {\n  'use strict';\n\n  window.onLoadRecaptcha = function () {\n    app.bindRecaptcha();\n  };\n\n  app.bindRecaptcha = function () {\n    var $recaptcha = $('.js-recaptcha');\n\n    if (!$recaptcha.length || typeof grecaptcha === 'undefined') return;\n\n    $recaptcha.each(function (i, el) {\n      var $el = $(el);\n      var sitekey = $el.data('sitekey');\n      var elId = $el.attr('id');\n      var disableButton = $el.data('disable-button') === true;\n      var buttonSelector = $el.data('button-selector');\n\n      var $form = $el.parents('form');\n      var $formButton = buttonSelector ? $form.find(buttonSelector) : $form.find('button[type=\"submit\"], input[type=\"submit\"]');\n\n      if (disableButton) {\n        $formButton.prop('disabled', true);\n      }\n\n      grecaptcha.render(elId, {\n        'sitekey': sitekey,\n        'callback': function callback() {\n          if (disableButton) {\n            $formButton.prop('disabled', false);\n          }\n        }\n      });\n    });\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.simpleEditor = {\n    createShortcut: function createShortcut(bindKey, callback) {\n      var isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;\n\n      var bindFunction = function bindFunction(e) {\n        var character = String.fromCharCode(e.keyCode);\n        var ctrl = e.ctrlKey;\n        var meta = !!e.metaKey;\n        var score = 0;\n\n        if (isMac && meta) {\n          score++;\n        } else if (ctrl) {\n          score++;\n        }\n\n        if (character === bindKey) {\n          score++;\n\n          if (score === 2) {\n            e.stopPropagation();\n            e.preventDefault();\n            return callback();\n          }\n        }\n      };\n\n      $('body').bind('keydown', bindFunction);\n    },\n\n    handleDrag: function handleDrag(e) {\n      e.stopPropagation();\n      e.preventDefault();\n    },\n\n    handleDrop: function handleDrop(e) {\n      e.stopPropagation();\n      e.preventDefault();\n      var x = e.clientX;\n      var y = e.clientY;\n      var file = e.dataTransfer.files[0];\n\n      var URLObj = window.URL || window.webkitURL;\n      var source = URLObj.createObjectURL(file);\n\n      if (file.type.match('image.*')) {\n\n        var img = document.createElement(\"img\");\n\n        img.src = source;\n\n        var range = null;\n\n        if (document.caretPositionFromPoint) {\n          var pos = document.caretPositionFromPoint(x, y);\n          range = document.createRange();\n          range.setStart(pos.offsetNode, pos.offset);\n          range.collapse();\n          range.insertNode(img);\n        } else if (document.caretRangeFromPoint) {\n          range = document.caretRangeFromPoint(x, y);\n          range.insertNode(img);\n        }\n      }\n    },\n\n    updateButtons: function updateButtons() {\n      var bold = document.queryCommandState(\"Bold\");\n      var italic = document.queryCommandState(\"Italic\");\n      var underline = document.queryCommandState(\"Underline\");\n\n      if (bold === true) {\n        $('[data-action=bold]').addClass('active');\n      } else {\n        $('[data-action=bold]').removeClass('active');\n      }\n\n      if (italic === true) {\n        $('[data-action=italic]').addClass('active');\n      } else {\n        $('[data-action=italic]').removeClass('active');\n      }\n\n      if (underline === true) {\n        $('[data-action=underline]').addClass('active');\n      } else {\n        $('[data-action=underline]').removeClass('active');\n      }\n    },\n\n    init: function init(container) {\n      this.$container = $(container);\n\n      if (this.$container.length <= 0) {\n        return;\n      }\n\n      this.$input = this.$container.find('.js-input');\n      this.$btnAction = this.$container.find('.js-btn-action');\n\n      this.registerTriggers();\n      this.registerDropZone();\n      this.registerShortcuts();\n    },\n\n    registerTriggers: function registerTriggers() {\n      var self = this;\n\n      self.$btnAction.on('click', function () {\n        var action = $(this).attr('data-action');\n        document.execCommand(action);\n        app.simpleEditor.updateButtons();\n      });\n\n      self.$input.on('click', function () {\n        app.simpleEditor.updateButtons();\n      });\n\n      self.$input.on('focusin', function () {\n        self.$container.addClass('focused');\n      });\n\n      self.$input.on('focusout', function () {\n        self.$container.removeClass('focused');\n      });\n    },\n\n    registerDropZone: function registerDropZone() {\n      var dropZone = $(this.container).find('.js-input');\n      dropZone.on('dragover', app.simpleEditor.handleDrag, false);\n      dropZone.on('drop', app.simpleEditor.handleDrop, false);\n    },\n\n    registerShortcuts: function registerShortcuts() {\n\n      app.simpleEditor.createShortcut('U', function () {\n        document.execCommand('underline');\n        app.simpleEditor.updateButtons();\n      });\n\n      app.simpleEditor.createShortcut('B', function () {\n        document.execCommand('bold');\n        app.simpleEditor.updateButtons();\n      });\n\n      app.simpleEditor.createShortcut('I', function () {\n        document.execCommand('italic');\n        app.simpleEditor.updateButtons();\n      });\n    }\n  };\n})();\n\napp.studentDoubts = {\n  page: 1,\n\n  doubtsContainer: function doubtsContainer() {\n    return $('#js-doubts-container');\n  },\n\n  form: function form() {\n    return $('#js-student-doubts-form');\n  },\n\n  expandButton: function expandButton() {\n    return $('#js-expand-student-doubts-form');\n  },\n\n  hideButton: function hideButton() {\n    return $('#js-hide-student-doubts-form');\n  },\n\n  loadMoreButton: function loadMoreButton() {\n    return $('#js-load-more-doubts');\n  },\n\n  loadDoubts: function loadDoubts(cb) {\n    var self = this;\n\n    $.ajax({\n      url: window.location.pathname + '/student_doubts/page/' + self.page,\n      method: 'GET',\n      data: {\n        per_page: 3\n      },\n      complete: function complete() {\n        if (typeof cb == 'function') {\n          cb();\n        }\n      }\n    });\n  },\n\n  init: function init() {\n    var self = this;\n\n    if (self.doubtsContainer().length <= 0) return;\n\n    self.expandButton().on('click', function () {\n      self.expandButton().hide();\n      self.form().slideDown('fast');\n    });\n\n    self.hideButton().on('click', function () {\n      self.form().slideUp('fast', function () {\n        self.expandButton().fadeIn('fast');\n      });\n    });\n\n    self.loadMoreButton().on('click', function () {\n      self.page = self.page + 1;\n      var $btn = $(this);\n\n      $btn.attr('disabled', 'disabled');\n      self.loadDoubts(function () {\n        $btn.removeAttr('disabled');\n      });\n    });\n\n    self.loadDoubts();\n  }\n};\n\n(function () {\n  'use strict';\n\n  app.timeTags = function () {\n    var $edoolsPlayerContainer = $('.js-edools-player');\n    if ($edoolsPlayerContainer.length <= 0) {\n      return;\n    }\n\n    var edoolsPlayer = $edoolsPlayerContainer[0].edoolsPlayer;\n\n    $('.js-timetags .list-group-item').on('click', function (e) {\n      e.preventDefault();\n\n      if ($edoolsPlayerContainer.length > 0) {\n        var time = $(this).data('time');\n\n        edoolsPlayer.setTime(time);\n      }\n    });\n  };\n})();\n\n(function () {\n  'use strict';\n\n  app.changeTimeZone = function () {\n    $('.js-to-client-timezone').each(function (i, el) {\n      var $el = $(el);\n      var format = $el.data('format');\n      var zone = moment.tz.guess();\n      var time = $el.data('timezone');\n\n      $el.html(moment.tz(time, zone).format(format));\n    });\n\n    $(document).trigger('app:change:timezone');\n  };\n\n  // TODO: FIXME: Essa chamada é para funcionar no primeiro load. Não deveria\n  // ser assim, parece ser algum erro com a inserção de cod no tema\n  app.changeTimeZone();\n})();\n\n(function () {\n  $(document).on('page:load', function () {\n    app.init();\n  });\n\n  $(document).on('page:partial-load', function () {\n    app.bindBlazy();\n  });\n\n  $(document).ready(function () {\n    app.init();\n  });\n})();","(function () {\n  'use strict';\n\n  window.app = {\n    bindGlobal: function () {\n      FastClick.attach(document.body);\n\n      $('.timeago').timeago();\n\n      $(document).trigger('app:bind:global');\n    },\n\n    bindOpenOnLoad: function () {\n      var toOpen = $('.js-open-on-load');\n      if (toOpen.length > 0) {\n        $.each(toOpen, function (i, elem) {\n          window.open($(elem).attr('href'));\n        });\n      }\n\n      $(document).trigger('app:bind:open_on_load');\n    },\n\n    bindTooltips: function () {\n      $(\"body\")\n        .tooltip(\"destroy\")\n        .tooltip({\n          selector: '[data-toggle=\"tooltip\"]'\n        });\n\n      $(document).trigger('app:bind:tooltips');\n    },\n\n    checkFormValidity: function (event) {\n      var form = event.currentTarget;\n      var submitButton = $(form).find('button[type=\"submit\"]');\n\n      if (form.checkValidity()) {\n        submitButton.removeAttr('disabled');\n      } else {\n        submitButton.attr('disabled', 'disabled');\n      }\n\n      $(document).trigger('app:bind:check_form_validity');\n    },\n\n    init: function () {\n      app.bindGlobal();\n      app.bindRecaptcha();\n      app.bindBlazy();\n      app.bindOpenOnLoad();\n      app.bindMasks();\n      app.bindTooltips();\n      app.bindReadMore();\n      app.bindDatepicker();\n      app.bindFixOnScroll();\n      app.ckeditor.bindCkeditor();\n      app.bindCheckout();\n      app.bindForumFeed();\n      app.bindCourseRating();\n      app.lessonList.init();\n      app.chat.init();\n      app.studentDoubts.init();\n      app.notepad.init();\n      app.categoryList.init();\n      app.bindExamQuestionForm();\n      app.changeTimeZone();\n      app.followBind();\n      app.lessonPage();\n      app.timeTags();\n      app.bindPostsForm();\n      app.accessibility();\n\n      $(document).on('app:bind:ckeditor_submit', app.bindCollaborativeDiscussion);\n    }\n  }\n})();\n","(function () {\n  'use strict';\n\n  app.bindBlazy = function (e) {\n    new Blazy();\n\n    $(document).trigger('app:bind:blazy');\n  };\n})();\n","(function () {\n  'use strict';\n\n  app.categoryList = {\n    init: function () {\n      var self = this;\n      self.$categoryList = $('#js-category-list');\n\n      if (self.$categoryList.length == 0) return;\n\n      self.isActive = self.$categoryList.data('is-active') || self.isActive;\n\n      if (!self.isActive) {\n        self.bindClicks();\n        self.$categoryList.attr('data-is-active', true);\n        self.isActive = true;\n      }\n\n      self.expandParents();\n    },\n\n    bindClicks: function () {\n      var self = this;\n\n      $(document).on('click', '#js-category-list .category-item .toggle-btn', function () {\n        self.expandParent($(this).parent('.category-item'), true);\n      });\n    },\n\n    expandParent: function ($parent, animate) {\n      var $nextListGroup = $parent.find('.list-group').first();\n      var $parentCategoryItem = $parent;\n\n      if (animate) {\n        $nextListGroup.stop().slideToggle('fast');\n      } else {\n        $nextListGroup.stop().toggle();\n      }\n\n      $parentCategoryItem.toggleClass('expanded');\n    },\n\n    expandParents: function () {\n      var self = this;\n      var $loopItem = self.$categoryList.find('.category-item.current').first();\n\n      while ($loopItem) {\n        self.expandParent($loopItem, false);\n\n        var $parent = $loopItem\n          .parents('.category-item')\n          .first();\n\n        if ($parent.length > 0) {\n          $loopItem = $parent;\n        } else {\n          $loopItem = null;\n        }\n      }\n    }\n  }\n\n})();\n","(function () {\n  'use strict';\n\n  app.chat = {\n    groupsPagination: {\n      page: 0,\n      perPage: 5,\n      totalPages: 0\n    },\n    collaboratorsPagination: {\n      page: 0,\n      perPage: 5,\n      totalPages: 0\n    },\n    followsPagination: {\n      page: 0,\n      perPage: 5,\n      totalPages: 0\n    },\n\n    init: function () {\n      var self = this;\n\n      self.$chat = $('.js-chat');\n\n      if (self.$chat.length <= 0) {\n        return\n      }\n\n      self.$groups = $('.js-groups', self.$chat);\n      self.$students = $('.js-students', self.$chat);\n      self.$roomTitle = $('#js-room-title');\n      self.$roomUsersCount = $('#js-room-users-count');\n      self.$text = $('.js-chat-text');\n      self.$messagesContainer = $('.js-chat-messages .js-content');\n      self.$messagesScroll = $('.js-chat-messages .js-scroll');\n      self.$sendForm = $('#js-send-messages');\n      self.$loadMoreGroupsButton = self.$chat.find('.js-load-more-groups');\n      self.$loadMoreCollaboratorsButton = self.$chat.find('.js-load-more-collaborators');\n      self.$loadMoreStudentsButton = self.$chat.find('.js-load-more-students');\n      self.$generalChatGroup = self.$chat.find('.js-chat-group-general');\n\n      self.user = self.$chat.data('user');\n      self.schoolId = self.$chat.data('school-id');\n      self.apiKey = self.$chat.data('api-key');\n      self.userId = self.user.id;\n      self.chatType = self.$chat.data('type');\n      self.chatLesson = self.$chat.data('lesson');\n\n      self.bindScroll();\n\n      self.$messagesContainer.empty();\n\n      // bind form\n      self.$text.keyup(function (e) {\n        var code = e.keyCode ? e.keyCode : e.which;\n        if (code === 13 && !e.shiftKey) {\n          self.submitMessage(e);\n        }\n      });\n\n      app.simpleEditor.init('#js-send-messages');\n      self.$sendForm.on('submit', self.submitMessage);\n\n      if (firebase.apps.length <= 0) {\n        firebase.initializeApp(window.CHAT_CONFIG);\n      }\n\n      self.database = firebase.database();\n\n      self.authenticate();\n\n      if (self.chatType === 'lesson-chat') {\n        self.lessonRoomUsers = self.database.ref('lesson_room_users/' + self.chatLesson.id);\n        self.$loadMoreStudentsButton.hide();\n        self.changeRoom(null);\n        self.registerCurrentUser();\n        self.loadRoomOnlineUsers();\n\n        $(document).off('page:before-change')\n          .on('page:before-change', function () {\n            if (self.userFirebase) {\n              self.userFirebase.remove();\n            }\n          });\n\n      } else {\n        self.loadSchoolGroup();\n        self.loadGroups();\n        self.loadCollaborators();\n        self.loadFollows();\n\n        self.$loadMoreGroupsButton.on('click', function () {\n          self.loadGroups();\n        });\n\n        self.$loadMoreCollaboratorsButton.on('click', function () {\n          self.loadCollaborators();\n        });\n\n        self.$loadMoreStudentsButton.on('click', function () {\n          self.loadFollows();\n        });\n\n        self.$generalChatGroup.on('click', function () {\n          self.changeRoom({\n            currentTarget: self.$generalChatGroup\n          })\n        });\n      }\n\n      self.listenConnectionChanges();\n    },\n\n    authenticate: function () {\n      var self = app.chat;\n\n      $.ajax({\n        url: window.CHAT_FIREBASE_SERVICE_HOST + '/authenticate',\n        method: 'POST',\n        headers: {\n          'Authorization': self.apiKey\n        }\n      }).success(function (data) {\n        firebase.auth().signInWithCustomToken(data.body.firebase_token)\n          .then(function (response) {\n            self.monitorConnectionState(response);\n          })\n          .catch(function (error) {\n            console.error('Error creating custom token:', error);\n          });\n      }).error(function (error) {\n        console.error('Could not authenticate', error);\n      });\n    },\n\n    monitorConnectionState: function (response) {\n      const userRef = firebase.database().ref('user_status').child(response.uid);\n\n      // Monitor connection state on browser tab\n      firebase.database().ref('.info/connected')\n        .on('value', function (snap) {\n          if (snap.val()) {\n            // if we lose network then remove this user from the list\n            userRef.onDisconnect().set('offline');\n            // set user's online status\n            userRef.set('online');\n          }\n        });\n\n      document.onIdle = function () {\n        userRef.set('idle');\n      };\n\n      document.onAway = function () {\n        userRef.set('away');\n      };\n\n      document.onBack = function () {\n        userRef.set('online');\n      }\n    },\n\n    listenConnectionChanges: function () {\n      var self = app.chat;\n      var connectionsRef = this.database.ref('user_status');\n\n      connectionsRef.on('child_added', function (data) {\n        self.updateStatus(data.val(), data.key);\n      });\n\n      connectionsRef.on('child_changed', function (data) {\n        self.updateStatus(data.val(), data.key);\n      });\n\n      connectionsRef.on('child_removed', function (data) {\n        self.updateStatus(data.val(), 'offline');\n      });\n    },\n\n    updateStatus: function (status, userId) {\n      var self = this;\n\n      var $element = $('*[data-id=\"' + userId + '\"]');\n\n      if (self.chatType === 'lesson-chat') {\n        if (status === 'offline') {\n          if ($element.length) {\n            $element.remove();\n          }\n\n          self.lessonRoomUsers\n            .orderByChild('id')\n            .equalTo(Number(userId))\n            .once('value')\n            .then(function (snapshot) {\n              if (snapshot.hasChildren()) {\n                snapshot.forEach(function (snap) {\n                  self.lessonRoomUsers.child(snap.key).remove();\n                });\n              }\n\n              self.$roomUsersCount.html($('.chat-profile-list-item', self.$students).length);\n            });\n        }\n      } else {\n        if ($element.length) {\n          $('.status .icon', $element).first().attr('class', 'icon icon-' + status);\n        }\n      }\n    },\n\n    bindScroll: function () {\n      var height = this.$chat.data('height');\n      var parent = this.$chat.data('parent');\n      var parentHeight = parent ? $(parent).height() : $(window).height();\n      var isPercentHeight = height.indexOf('%') > -1;\n      height = Number(height.replace('%', '').replace('px', ''));\n\n      if (isPercentHeight === true) {\n        this.chatHeight = (parentHeight / 100) * height;\n      } else {\n        this.chatHeight = height;\n      }\n\n      this.$chat.height(this.chatHeight);\n      this.$chat.find('.js-sidebar-scroll').scrollbar({});\n      this.$chat.find('.js-chat-messages .js-scroll').scrollbar({});\n    },\n\n    sanitizeHtml: function ($root) {\n      $root.find('div:empty').remove();\n\n      // Removes elements with only '<br/>' children\n      $root.children().each(function (i, el) {\n        var $el = $(el);\n        if (el.tagName !== 'BR' && $el.find('br').length > 0 && $el.find('br').length == $el.children().length) {\n          $el.remove();\n        }\n      });\n\n      // Removes last '<br/>'\n      if ($root.last().get(0).tagName === 'BR') {\n        $root.last().remove();\n      }\n\n      return $root;\n    },\n\n    submitMessage: function (event) {\n      event.preventDefault();\n      var self = app.chat;\n\n      var $html = self.sanitizeHtml(self.$text);\n      var text = $html.html();\n\n      if (text.length <= 0) return;\n\n      self.$text.html('').focus();\n\n      function pad(n) {\n        return (n < 10) ? ('0' + n) : n;\n      }\n\n      var date = new Date();\n\n      self.messages.push({\n        id: self.user.id,\n        name: self.user.first_name,\n        avatar_url: self.user.cover_image_url,\n        text: text,\n        timestamp: moment().unix(),\n        schedule: pad(date.getHours()) + ':' + pad(date.getMinutes())\n      });\n    },\n\n    scrollToEnd: function () {\n      var self = this;\n      self.$messagesScroll.scrollTop(self.$messagesScroll[0].scrollHeight);\n    },\n\n    renderMessage: function (data) {\n      var self = app.chat;\n      var html = self.renderTemplate('chat-message', {\n        avatar: data.avatar_url,\n        name: data.name,\n        text: data.text,\n        schedule: moment.unix(data.timestamp).format('LLL')\n      });\n\n      self.$messagesContainer.append(html);\n      self.scrollToEnd();\n    },\n\n    renderTemplate: function (key, data) {\n      var liquid = $('#' + key + '-template').html();\n      var template = Liquid.parse(liquid);\n\n      return template.render(data);\n    },\n\n    loadMessages: function () {\n      var self = app.chat;\n      const setMessage = function (data) {\n        self.renderMessage(data.val());\n      }.bind(self);\n\n      self.messages.limitToLast(12).on('child_added', setMessage);\n      self.messages.limitToLast(12).on('child_changed', setMessage);\n    },\n\n    loadRoomOnlineUsers: function () {\n      var self = app.chat;\n      const setUser = function (data) {\n        var $html = $(self.renderTemplate('chat-profile-list-item', data.val()));\n        $('.js-students', self.$chat).append($html);\n        self.$roomUsersCount.html($('.chat-profile-list-item', self.$students).length);\n      }.bind(self);\n\n      const removeUser = function (data) {\n        $('.js-students [data-id=\"' + data.val().id + '\"]').remove();\n        self.$roomUsersCount.html($('.chat-profile-list-item', self.$students).length);\n      }.bind(self);\n\n      self.lessonRoomUsers.on('child_added', setUser);\n      self.lessonRoomUsers.on('child_removed', removeUser);\n    },\n\n    loadSchoolGroup: function () {\n      var self = app.chat;\n      $.ajax({\n        url: window.CORE_HOST + '/chat/school_group',\n        method: 'GET',\n        headers: {\n          'Authorization': 'Token token=' + self.apiKey\n        }\n      }).success(function (data) {\n        data.is_school = true;\n\n        var $html = $(self.renderTemplate('chat-group-list-item', data));\n        $html.on('click', app.chat.changeRoom);\n        self.$groups.prepend($html);\n      });\n    },\n\n    loadGroups: function () {\n      var self = app.chat;\n      self.$loadMoreGroupsButton.attr('disabled', 'disabled');\n\n      $.ajax({\n        url: window.CORE_HOST + '/chat/groups?per_page=' + self.groupsPagination.perPage + '&page=' + (self.groupsPagination.page + 1),\n        method: 'GET',\n        headers: {\n          'Authorization': 'Token token=' + self.apiKey\n        }\n      }).success(function (data) {\n        self.groupsPagination.page = self.groupsPagination.page + 1;\n        self.$loadMoreGroupsButton.removeAttr('disabled', 'disabled');\n        self.groupsPagination.totalPages = data.total_pages;\n\n        if (self.groupsPagination.page >= self.groupsPagination.totalPages) {\n          self.$loadMoreGroupsButton.attr('disabled', 'disabled');\n        }\n\n        var groups = data.groups;\n        groups = _.sortBy(groups, {is_school: false});\n        groups = _.map(groups, function (g) {\n          g.is_school = false;\n          return g;\n        });\n\n        groups.forEach(function (group) {\n          var $html = $(self.renderTemplate('chat-group-list-item', group));\n          $html.on('click', app.chat.changeRoom);\n          self.$groups.append($html);\n        });\n\n        self.selectFirstRoomAvailable();\n      });\n    },\n\n    loadCollaborators: function () {\n      var self = app.chat;\n      self.$loadMoreCollaboratorsButton.attr('disabled', 'disabled');\n\n      $.ajax({\n        url: window.CORE_HOST + '/chat/collaborators?per_page=' + self.collaboratorsPagination.perPage + '&page=' + (self.collaboratorsPagination.page + 1),\n        method: 'GET',\n        headers: {\n          'Authorization': 'Token token=' + self.apiKey\n        }\n      }).success(function (data) {\n        self.collaboratorsPagination.page = self.collaboratorsPagination.page + 1;\n        self.$loadMoreCollaboratorsButton.removeAttr('disabled', 'disabled');\n        self.collaboratorsPagination.totalPages = data.total_pages;\n\n        if (self.collaboratorsPagination.page >= self.collaboratorsPagination.totalPages) {\n          self.$loadMoreCollaboratorsButton.attr('disabled', 'disabled');\n        }\n\n        self.addProfileItems(data.collaborators, 'js-team');\n        self.selectFirstRoomAvailable();\n      });\n    },\n\n    loadFollows: function () {\n      var self = app.chat;\n      self.$loadMoreStudentsButton.attr('disabled', 'disabled');\n\n      $.ajax({\n        url: window.CORE_HOST + '/chat/follows?per_page=' + self.followsPagination.perPage + '&page=' + (self.followsPagination.page + 1),\n        method: 'GET',\n        headers: {\n          'Authorization': 'Token token=' + self.apiKey\n        }\n      }).success(function (data) {\n        self.followsPagination.page = self.followsPagination.page + 1;\n        self.$loadMoreStudentsButton.removeAttr('disabled', 'disabled');\n        self.followsPagination.totalPages = data.total_pages;\n\n        if (self.followsPagination.page >= self.followsPagination.totalPages) {\n          self.$loadMoreStudentsButton.attr('disabled', 'disabled');\n        }\n\n        self.addProfileItems(data.users, 'js-students');\n        self.selectFirstRoomAvailable();\n      });\n    },\n\n    registerCurrentUser: function () {\n      var self = this;\n\n      self.lessonRoomUsers\n        .orderByChild('id')\n        .equalTo(self.user.id)\n        .once('value')\n        .then(function (snapshot) {\n          if (!snapshot.hasChildren()) {\n            self.lessonRoomUsers.push(self.user).then(function (snap) {\n              self.userFirebase = snap;\n            });\n          }\n        });\n    },\n\n    addProfileItems: function (users, divClass) {\n      var self = app.chat;\n\n      users.forEach(function (user) {\n        var $html = $(self.renderTemplate('chat-profile-list-item', user));\n        $html.on('click', app.chat.changeRoom);\n        $('.' + divClass).append($html);\n      });\n    },\n\n    changeRoom: function (event) {\n      var self = app.chat;\n\n      $('.chat-sidebar-list-item').removeClass('active');\n\n      var roomName = 'messages';\n\n      if (self.chatType === 'lesson-chat') {\n        roomName += '_lessons/' + self.chatLesson.id;\n\n        // change room name on div\n        self.$roomTitle.html(self.chatLesson.title);\n        self.$roomUsersCount.html(0);\n      } else {\n        var $element = $(event.currentTarget);\n        $element.addClass('active');\n\n        if ($element.data('type') === 'products') {\n          // room name on firebase\n          roomName += '_products/' + $element.data('id');\n\n          // change room name on div\n          self.$roomTitle.html($('.js-chat-group-name', $element).html());\n          self.$roomUsersCount.html($('.js-chat-group-users-count', $element).html());\n        } else if ($element.data('type') === 'users') {\n          var ids = [self.userId, parseInt($element.data('id'))].sort();\n          roomName += '_users/' + ids[0] + '/' + ids[1];\n\n          // change room name on div\n          self.$roomTitle.html($('.info .name', $element).html());\n          self.$roomUsersCount.html($('.info .location', $element).html());\n        } else if ($element.data('type') === 'schools') {\n          // room name on firebase\n          roomName += '_schools/' + self.schoolId;\n\n          // change room name on div\n          self.$roomTitle.html($('.js-chat-group-name', $element).html());\n          self.$roomUsersCount.html($('.js-chat-group-users-count', $element).html());\n        }\n      }\n\n      self.$messagesContainer.html('');\n\n      if (self.messages) {\n        self.messages.off();\n      }\n\n      self.messages = self.database.ref(roomName);\n      self.loadMessages();\n    },\n\n    selectFirstRoomAvailable: function () {\n      if (!self.$selectedRoom) {\n        // Select first room\n        self.$selectedRoom = $('.chat-sidebar-list-item').first();\n        self.$selectedRoom.click();\n      }\n    }\n  }\n\n})();\n","(function () {\n  'use strict';\n\n  app.bindCheckout = function () {\n    $('#js-terms-of-use-check').change(function () {\n      if ($(this).is(\":checked\") === true) {\n        $('.cta-checkout-cart').removeClass('disabled');\n      } else {\n        $('.cta-checkout-cart').addClass('disabled');\n      }\n    });\n\n    $(document).trigger('app:bind:checkout');\n  };\n})();\n","(function () {\n  'use strict';\n\n  app.ckeditor = {\n    bindCkeditor: function () {\n      var src = '//cdn.edools.com/libs/ckeditor/4.5.10/ckeditor.js';\n\n      if ($('.js-ckeditor').length) {\n        loadAsset('window.CKEDITOR', src, function () {\n          var config = {\n            language: 'pt-br',\n            skin: 'bootstrapck'\n          };\n\n          $('.js-ckeditor').each(function (index, ckeditorObj) {\n            if (!$('#cke_' + ckeditorObj.id).length) {\n              config.placeholder = ckeditorObj.placeholder; // TODO: fix it\n\n              CKEDITOR.replace(ckeditorObj.id, config);\n            }\n          });\n\n          app.ckeditor.bindCkeditorSubmit();\n          $(document).trigger('app:bind:ckeditor');\n        });\n      }\n    },\n\n    bindCkeditorSubmit: function () {\n      $.each($('.js-ckeditor'), function (index, editor) {\n        var $editor = $(editor);\n        var $form = $editor.parents('form');\n        var editorId = $editor.attr('id');\n\n        if ($form) {\n          var $submitButton = $form.find('button[type=\"submit\"]');\n\n          CKEDITOR.instances[editorId].on('change', function () {\n            if (this.getData().length) {\n              $submitButton.attr('disabled', false);\n            } else {\n              $submitButton.attr('disabled', true);\n            }\n          });\n        }\n      });\n\n      $(document).trigger('app:bind:ckeditor_submit');\n    }\n  }\n})();\n","(function () {\n  'use strict';\n\n  app.bindCollaborativeDiscussion = function() {\n    $(document).on('click', '#collaborative-discussion .js-edit-button' ,function () {\n      var commentId = $(this).data('comment-id');\n      var $comment = $('#js-comment-' + commentId);\n\n      $comment.find('.js-show-comment').addClass('hide');\n      $comment.find('.js-edit-container').removeClass('hide');\n    });\n\n    $(document).on('click', '#collaborative-discussion .js-cancel-button' ,function () {\n      var commentId = $(this).data('comment-id');\n      var $comment = $('#js-comment-' + commentId);\n\n      $comment.find('.js-show-comment').removeClass('hide');\n      $comment.find('.js-edit-container').addClass('hide');\n    });\n\n\n    $(document).trigger('app:bind:collaborative_discussion');\n  };\n})();\n","(function () {\n     'use strict';\n\n     app.accessibility = function () {\n\n          var adjustPricesForAccessibility = function() { \n          //This function generates Aria-Labels for the tags with prices.\n          //Screen Readers can find some issues when reading '$' and ','.\n\n               var arrayOfPrices = new Array(...$('.product-accessibility-list')\n               .find('li')\n               .find('a'));\n\n               arrayOfPrices.forEach(element => {\n\n                    var price = String((element.innerHTML));\n                    var R$Position = price.indexOf('R$');\n                    var hasPor = price.indexOf('por');\n                    var commaPosition = price.indexOf(',');\n                    \n                    if(R$Position != -1) {\n\n                         if (hasPor != -1) {\n\n                              price = price.substring(R$Position + 3, price.length)\n                                   .replace(/\\s+/g,' ')\n                                   .replace('<span>', '')\n                                   .replace('</span>', '')\n                                   .replace('<a>', '')\n                                   .replace('</a>', '');\n\n                              var posAfterComma = price.indexOf(',') + 3;\n\n                              price = price.slice(0, posAfterComma) + ' reais' + price.slice( posAfterComma , price.length);\n                         }\n\n                         else {\n                              price = price.substring(R$Position + 3, commaPosition + 3)+' reais';\n                         }\n\n                         price = price.replace(',00', '');\n                         //console.log(price);                                    \n                    }                              \n                    element.setAttribute('aria-label', price);\n               });\n               console.log('criei as labels');\n          }();\n\n          var toggleHighContrast = function() {\n          //This function toggles the High Contrast Mode.\n\n               $(\"html\").toggleClass('accessible');\n                    \n                    if ($(\"html\").hasClass('accessible')) {\n                         $(\".contrast-on-btn-text\").fadeOut(200, function(){\n                              $(\".contrast-on-btn-text\").text(\"Alto Contraste Ligado\").fadeIn(200);\n                         })\n                    }\n                    else {\n                         $(\".contrast-on-btn-text\").fadeOut(200, function(){\n                              $(\".contrast-on-btn-text\").text(\"Alto Contraste Desligado\").fadeIn(200);\n                         })\n                    }     \n          }\n\n          $(\".contrast-on-btn\").click(function(){\n               toggleHighContrast();\n          });\n\n          var checkPageName = function() {\n          //This function generates a text inside the \"accessibility-location\" div.\n          //It works like a map for Blind Users, since they may find it hard to know exactly on which page they're in.\n               var possibleAddresses =\n               {\n                    \"\": \"Página Inicial\",\n                    \"cart\": \"Carrinho\",\n                    \"sign_in\": \"Fazer Login\",\n                    \"enrollments\": \"Meus Cursos\",\n                    \"forums\": \"Fóruns\",\n                    \"products\": \"Produtos\",\n                    \"edit\": \"Meu Perfil\",\n                    \"certificates\": \"Meus Certificados\",\n                    \"channels\": \"Mensagens\",\n                    \"orders\": \"Meus Pedidos\"\n               };\n          \n               var address = (window.location.href).\n                    substring(window.location.href.\n                    lastIndexOf('/') + 1, window.location.href.length);\n               \n               address = possibleAddresses[address];\n          \n               if (address == undefined) {\n                    if (window.location.href.search('/profile/'))\n                         address = 'Perfil Público';\n                    else\n                         adress = '';  \n               }           \n          \n               $(\"#accessibility-location\").text(`Você está em: ${address} - Topo da Página`);\n               var i = 0;\n               i++; \n               console.log(\"rodei\" + i + \"vezes\");  \n          }();         \n\n          var checkAccessibiltyFunction = function(selectedElement) {\n               // This Function listens to the accessibility-shortcuts.\n               // It helps the Screen Readers' users to navigate through the website.\n               if (selectedElement == null) \n                    var selectedElement = $(':focus').attr('id');\n          \n               switch(selectedElement) {\n                    case 'accessibility-btn-1':\n                         $(window).scrollTop($(\"#accessibility-main-content\").offset().top - 50);\n                         $(\"#accessibility-main-content\").focus();                        \n                    break;\n                    case 'accessibility-btn-2':\n                         $(window).scrollTop($(\"#main-navbar\").offset().top - 50);\n                         $(\"#main-navbar\").focus();\n                    break;\n                    case 'accessibility-btn-3':\n                         $(window).scrollTop($(\"#accessibility-contact\").offset().top - 50);\n                         $(\"#accessibility-contact\").focus();\n                    break;\n                    case 'accessibility-btn-4':\n                         $(window).scrollTop($(\"#accessibility-location\").offset().top - 50);\n                         $(\"#accessibility-location\").focus();\n                    break;\n               }    \n          };\n\n          $(window).keydown(function(e){\n               if(!$(':focus').is('input')) { //It avoids problems with SHIFT inside 'INPUTS'\n                    switch (e.which) {\n                         case 13: //Enter\n                              checkAccessibiltyFunction(); \n                              break;\n                         case 49: //1\n                              if (e.shiftKey)\n                                   checkAccessibiltyFunction('accessibility-btn-1'); \n                                   break;\n                         case 50: //2  \n                         if (e.shiftKey)\n                              checkAccessibiltyFunction('accessibility-btn-2'); \n                              break;\n                         case 51: //3\n                              if (e.shiftKey)\n                                   checkAccessibiltyFunction('accessibility-btn-3'); \n                                   break;\n                         case 52: //4\n                              if (e.shiftKey)\n                                   checkAccessibiltyFunction('accessibility-btn-4'); \n                                   break;\n                    }         \n               }\n          });\n\n          $(document).trigger('app:bind:accessibility');  \n     };\n})();","(function () {\n  'use strict';\n\n  app.bindCourseRating = function () {\n    $(document).on(\"rate-course\", function (event, courseId) {\n      $('#js-rating-course-'+courseId+'-modal').modal();\n    });\n\n    $(document).on(\"course-rating-created\", function (event, courseId) {\n      $('#js-rating-course-' + courseId + '-modal').modal('hide');\n    });\n  };\n})();\n","(function () {\n  'use strict';\n\n  app.bindDatepicker = function () {\n    // TODO: Handle i18n\n    $.fn.datepicker.defaults.language = 'pt-BR';\n\n    $('.datepicker').each(function (i, el) {\n      var $el = $(el);\n      var $hidden = $('<input type=\"hidden\" />').insertBefore($el.parent());\n      var frontDate = moment($el.val()).utc().format('DD/MM/YYYY');\n      var serverDate = moment($el.val()).utc().format('YYYY-MM-DD');\n      serverDate = (serverDate === 'Invalid date') ? null : serverDate;\n\n      $hidden.attr('id', $el.attr('id'));\n      $hidden.attr('name', $el.attr('name'));\n      $hidden.attr('value', serverDate);\n\n      $el.removeAttr('id');\n      $el.removeAttr('name');\n\n      if ($el.val() !== \"\") {\n        $el.val(frontDate);\n      }\n\n      $(el).datepicker()\n        .on('change', function () {\n          var date = moment($el.val(), 'DD/MM/YYYY').utc().format('YYYY-MM-DD');\n          date = (date === 'Invalid date') ? null : date;\n          $hidden.val(date);\n        });\n    });\n\n    $(document).trigger('app:bind:datepicker');\n  };\n\n})();\n","(function () {\n  'use strict';\n\n  app.bindExamQuestionForm = function () {\n    $(document).on('click', '#js-remake-exam', function () {\n      $('#answers-container').addClass('hide');\n      $('#form-container').removeClass('hide');\n    });\n\n    $(document).on('click', '.js-clean-associative-options', function () {\n      $(this).parents('.associative-question')\n        .find('.js-associative-select option:selected')\n        .removeAttr('selected')\n    });\n\n    $(document).on('change', '.js-associative-select', function () {\n      var $question = $(this).parents('.associative-question');\n      var optionIndex = $(this).data('option-index');\n      var assertionId = $(this).find('option:selected').data('first-assertion-id');\n\n      $question.find('.js-associate-assertion[data-option-index=\"' + optionIndex + '\"]').val(assertionId);\n    });\n\n    // bind all form's inputs\n    $(document).on('change', '#exam_answer_form', app.checkFormValidity);\n    // bind all form's textareas for all types of typing\n    $(document).on('input propertychange', '#exam_answer_form', app.checkFormValidity);\n\n    $(document).trigger('app:bind:bind_exam_question_form');\n  };\n})();\n","(function () {\n  'use strict';\n\n  app.bindFixOnScroll = function () {\n    $('.js-fix-on-scroll').each(function (i, el) {\n      if (!$(el).hasClass('js-fix-on-scroll-mobile') && window.innerWidth < 992) {\n        return;\n      }\n\n      var $el = $(el);\n      $el.wrap('<div class=\"js-fix-scroll-wrapper\"/>');\n      var $wrapper = $el.parent('.js-fix-scroll-wrapper');\n\n      var offset = $el.offset();\n      var size = {\n        width: $el.outerWidth(),\n        height: $el.outerHeight()\n      };\n\n      $wrapper.width(size.width);\n      $wrapper.height(size.height);\n\n      $(document).on('scroll', function (e) {\n        var scrollTop = $(document).scrollTop();\n\n        if (scrollTop >= offset.top) {\n          if ($el.css('position') === 'fixed') return;\n\n          $el.parent().addClass('scroll');\n          $el.addClass('scroll');\n          $el.css({\n            position: 'fixed',\n            left: offset.left,\n            top: 0,\n            width: size.width,\n            height: size.height,\n            'z-index': '10000'\n          });\n        } else {\n          if ($el.css('position') === 'static') return;\n\n          $el.removeClass('scroll');\n          $el.parent().removeClass('scroll');\n          $el.css({\n            position: 'static',\n            left: 'auto',\n            top: 'auto',\n            width: 'auto',\n            height: 'auto'\n          });\n        }\n      })\n\n    });\n  }\n})();\n","(function () {\n  'use strict';\n\n  app.followBind = function () {\n    $(document).on({\n        mouseenter: function(){\n          $(this).addClass('hidden');\n          $('#js-unfollow').removeClass('hidden');\n        }\n    }, '#js-following');\n\n    $(document).on({\n        mouseleave: function(){\n          $('#js-following').removeClass('hidden');\n          $(this).addClass('hidden');\n        }\n    }, '#js-unfollow');\n  };\n})();\n","(function () {\n  'use strict';\n\n  app.bindForumFeed = function () {\n    $(document).on(\"click\", \".js-collapse-toggle-text\", function (event) {\n        event.preventDefault();\n        var $this          = $(this);\n        var openText       = $this.data('open-text');\n        var closeText      = $this.data('close-text');\n        var $accordionBody = $($this.attr('href'));\n\n        if ($accordionBody.hasClass('in')) {\n          $accordionBody.collapse('hide');\n          $this.html(closeText);\n        } else {\n          $accordionBody.collapse('show');\n          $this.html(openText);\n          app.bindBlazy();\n        }\n    });\n\n    $(document).on(\"fix_forum_feed\", function () {\n      app.fixForumFeed();\n    });\n\n    $(document).on(\"forum_feed_post_created\", function (event, topicId) {\n      var $postsCounter     = $(\"#js-topic-item-\" + topicId + \" .js-posts-count\");\n      var $postsCounterSize = $postsCounter.find('.size');\n      var counter           = parseInt($postsCounterSize.html());\n\n      $postsCounterSize.html(counter + 1);\n      $postsCounter.removeClass('hidden');\n      $(\"#js-topic-\" + topicId + \"-posts\").removeClass('hidden');\n      $(\"#js-topic-\" + topicId + \"-posts-list-panel\").collapse('show');\n\n      app.fixForumFeed();\n    });\n\n    $('a[data-toggle=\"tab\"]').on('shown.bs.tab', function (e) {\n      app.fixForumFeed();\n    });\n  };\n\n  app.fixForumFeed = function () {\n    app.bindGlobal();\n    app.bindBlazy();\n  }\n})();\n","(function () {\n  'use strict';\n\n  app.lessonList = {\n    init: function () {\n      var self = this;\n\n      self.courseTreeExists = self.courseTree().length;\n      self.isActive = self.courseTree().data('is-active');\n      self.course = self.courseTree().data('course');\n      self.enrollment = self.courseTree().data('enrollment');\n      self.courseContent = self.courseTree().data('course-content');\n      self.userType = self.courseTree().data('user-type');\n      self.lessonActions = self.courseTree().data('lesson-actions');\n      self.downloadAction = self.courseTree().data('download-action');\n      self.currentLessonId = parseInt(self.courseTree().data('current-lesson-id'));\n      self.apiKey = self.courseTree().data('api-key');\n      self.translations = {};\n      self.translations['lesson.release_at'] = self.courseTree().data('translation-release-at');\n      self.translations['lesson.release_after'] = self.courseTree().data('translation-release-after');\n      self.translations['product.course_content.views'] = self.courseTree().data('translation-course_content-views');\n\n      if (self.lessonProgress() && self.lessonProgress().completed) {\n        $('.btn-next-lesson').removeClass('disabled');\n      }\n\n      if (self.courseTreeExists && !self.isActive) {\n        self.bindClicks();\n        self.handleLessons();\n        self.loadTopModules();\n        self.bindChangeLesson();\n\n        $(document).trigger('app:bind:lesson_sidebar');\n\n        $(document).on('lesson-completed', function (event, lessonProgress) {\n          var $mediaControls = $('.btn-next-lesson');\n          var enrollmentId = lessonProgress.data.enrollment_id;\n\n          if (self.progressIcon('completed').hasClass('hide')) {\n            self.progressIcon('completed').removeClass('hide');\n          }\n\n          if (!self.progressIcon('progress').hasClass('hide')) {\n            self.progressIcon('progress').addClass('hide');\n          }\n\n          if ($mediaControls.size() > 0) {\n            $mediaControls.removeClass('disabled');\n          }\n\n          app.lessonList.requirementsExists(lessonProgress.data, function ($item, content_id) {\n            if ($item && content_id) {\n              app.lessonList.checkLessonCompleted(enrollmentId, content_id, function (completed) {\n                if (completed) {\n                  $item.removeClass('blocked');\n                  $item.find('.right > .icon-lock').remove();\n                }\n              });\n            }\n          });\n        });\n      }\n    },\n\n    // Props\n    courseTree: function () {\n      return $('.course-content #js-course-tree-ajax');\n    },\n\n    lazyLoadButtons: function () {\n      return $('.course-content #js-course-content-more-link, .course-content #js-course-content-prev-link');\n    },\n\n    lessons: function () {\n      return this.courseTree().find('.js-content');\n    },\n\n    currentLesson: function () {\n      return $(this.courseTree().find('.js-content.active')[0]);\n    },\n\n    toggleButton: function () {\n      return $('.lesson-list-toggle .btn');\n    },\n\n    lessonListPanel: function () {\n      return $('.lesson-list-panel');\n    },\n\n    lessonProgress: function () {\n      return $('#js-media-player').data('lesson-progress');\n    },\n\n    progressIcon: function (type) {\n      var iconType = {\n        completed: '.js-completed-icon',\n        progress: '.js-in-progress-icon'\n      };\n\n      return this.currentLesson().find(iconType[type]);\n    },\n\n    requirementsExists: function (lessonProgress, cb) {\n      if (!lessonProgress) {\n        return false;\n      }\n\n      var requirementsElements = $('.lesson-list-panel [data-requirements]')\n        .filter(function (index, item) {\n          return $(item).data('requirements').length > 0;\n        });\n\n      var requirementsUnified = requirementsElements.map(function (idx, item) {\n        return {\n          item: $(item),\n          requirements: $(item).data('requirements')\n        }\n      }).toArray();\n\n      var exists = _.find(requirementsUnified, {requirements: [{content_id: lessonProgress.lesson_id}]});\n\n      if (exists) {\n        var $item = exists.item;\n        if (cb) {\n          return cb($item, lessonProgress.lesson_id);\n        }\n      } else {\n        if (cb) {\n          return cb(null);\n        }\n      }\n    },\n\n    checkLessonCompleted: function (enrollmentId, id, cb) {\n      var self = this;\n      var completed = false;\n      var apiKey = $('.course-content #js-course-tree-ajax').data('api-key');\n\n      $.ajax({\n        url: window.CORE_HOST + '/enrollments/' + enrollmentId + '/lessons_progresses?lesson_id=' + id,\n        method: 'GET',\n        headers: {\n          'Authorization': 'Token token=' + apiKey\n        }\n      }).success(function (data) {\n        completed = data.lessons_progresses[0].completed;\n\n        cb(completed);\n      });\n    },\n\n    // Actions\n    bindChangeLesson: function () {\n      var self = this;\n\n      if (!self.bindChangeLessonActive) {\n        self.bindChangeLessonActive = true;\n        var course_path_regex = /enrollments\\/\\d+\\/courses\\/\\d+$/;\n        var lesson_path_regex = /enrollments\\/\\d+\\/courses\\/\\d+\\/course_contents\\/\\d+$/;\n\n        $(document).on(\"ready page:load\", function (e) {\n          var path = window.location.pathname;\n          var lesson_path = lesson_path_regex.test(path);\n\n          if (course_path_regex.test(path) || lesson_path) {\n            self.lessons().removeClass('active');\n\n            if (lesson_path) {\n              var path_array = path.split('/');\n              var content_id = path_array[path_array.length - 1];\n\n              $(\"#content-\" + content_id + \".js-content\").addClass('active');\n            }\n          }\n        })\n      }\n    },\n\n    bindClicks: function () {\n      var self = this;\n\n      self.lessons().find('a').on('click', function (e) {\n        e.preventDefault();\n        app.lessonList.changeLesson(null, $(this).parents('.js-content'));\n      });\n\n      self.courseTree().on('click', '.module', function (e) {\n        if (!$(e.target).hasClass('module') && !$(e.target).parent().hasClass('module')) {\n          return;\n        }\n\n        e.stopPropagation();\n\n        self.loadChildren($(this));\n      });\n\n      self.courseTree().data('is-active', true);\n\n      self.toggleButton().on('click', this.toggleSidebar);\n    },\n\n    getLessonIcon: function (lesson) {\n      var lessonIcon = '';\n\n      if (lesson.type === 'ExamLesson' && lesson.activity) {\n        switch (lesson.activity.type) {\n          case 'Quiz': {\n            lessonIcon = 'icon-puzzle';\n            break;\n          }\n          case 'FileUpload': {\n            lessonIcon = 'icon-arrow-up-circle';\n            break;\n          }\n          case 'CollaborativeDiscussion': {\n            lessonIcon = 'icon-people';\n            break;\n          }\n          default: {\n            lessonIcon = 'icon-puzzle'\n          }\n        }\n      } else if (lesson.media) {\n        switch (lesson.media.type) {\n          case 'Video': {\n            lessonIcon = 'icon-camrecorder';\n            break;\n          }\n          case 'Audio': {\n            lessonIcon = 'icon-microphone';\n            break;\n          }\n          case 'Slide': {\n            lessonIcon = 'icon-chart';\n            break;\n          }\n          case 'Document': {\n            lessonIcon = 'icon-doc';\n            break;\n          }\n          case 'Image': {\n            lessonIcon = 'icon-picture';\n            break;\n          }\n          case 'Text': {\n            lessonIcon = 'icon-doc';\n            break;\n          }\n          case 'LiveStream': {\n            lessonIcon = 'icon-control-play';\n            break;\n          }\n          case 'VideoSlide': {\n            lessonIcon = 'icon-film';\n            break;\n          }\n          case 'ScormPackage': {\n            lessonIcon = 'icon-layers';\n            break;\n          }\n          case 'Html': {\n            lessonIcon = 'icon-doc';\n            break;\n          }\n          case 'Html5': {\n            lessonIcon = 'icon-docs';\n            break;\n          }\n          default: {\n            lessonIcon = 'icon-camrecorder';\n          }\n\n        }\n      }\n\n      return lessonIcon;\n    },\n\n    getContentPath: function (content) {\n      var self = this;\n\n      var enrollmentId = self.enrollment.id;\n      var courseId = self.course.id;\n\n      var path = enrollmentId ? '/enrollments/' + enrollmentId : '/admin_view';\n      path = path + '/courses/' + courseId + '/course_contents/' + content.id;\n\n      return path;\n    },\n\n    getContentDownloadPath: function (content) {\n      var self = this;\n      return self.getContentPath(content) + '/download';\n    },\n\n    checkLessonAvailability: function (lesson) {\n      var releaseAt = lesson.release_at;\n      var releaseAfter = lesson.release_after;\n\n      if (!releaseAt && !releaseAfter) {\n        return true;\n      }\n\n      var enrollmentActivatedAt = moment(this.enrollment.activated_at);\n\n      var releaseTime = releaseAt ? moment(releaseAt) : enrollmentActivatedAt.add(releaseAfter, 'days');\n\n      return moment() > releaseTime;\n    },\n\n    checkTrialByType: function (type, id) {\n      var $tree = $('#js-course-tree-ajax');\n      var enrollment = $tree.data('enrollment');\n      var constrains_name = 'trial_' + type + '_ids';\n\n      var payment_method = enrollment && enrollment.payment_method;\n      var constrains_tree = $tree.data('school-product') && $tree.data('school-product').trial_constrains;\n      var constrains = constrains_tree && payment_method && constrains_tree[payment_method];\n\n      if (constrains && !constrains.hasOwnProperty(constrains_name)) {\n        return false;\n      }\n\n      if (enrollment && !enrollment['on_trial?']) {\n        return false;\n      }\n\n      if (constrains_tree && constrains[constrains_name]) {\n        return constrains[constrains_name].indexOf(id) > -1;\n      }\n\n      return false;\n    },\n\n    fetchModules: function ($parent) {\n      var self = this;\n      var id = $parent.data('id');\n      var level = $parent.data('level');\n      var $list = $parent.find('.list-group').first();\n\n      return $.ajax({\n        url: window.CORE_HOST + '/course_modules/' + id,\n        method: 'GET',\n        headers: {\n          'Authorization': 'Token token=' + self.apiKey\n        },\n        success: function (res) {\n          var modules = _.sortBy(res.course_modules, 'order');\n\n          modules = _.filter(modules, function (m) {\n            var module = _.find(self.allModules, {id: m.id});\n            return module.available !== false && (module.course_content_ids.length > 0 || module.course_modules.length > 0);\n          });\n\n          var $modules = _.map(modules, function (module) {\n            return $(\n              '<li class=\"list-group-item module\" ' +\n              'data-id=\"' + module.id + '\"' +\n              'data-level=\"' + (level + 1) + '\">' +\n              '<i class=\"icon icon-arrow-right\"></i>' +\n              '<span>' + module.name + '</span>' +\n              '<i class=\"busy busy-xs\"></i>' +\n              '</li>');\n          });\n\n          $list.append($modules);\n        }\n      })\n    },\n\n    fetchChildren: function ($parent) {\n      var self = this;\n      var id = $parent.data('id');\n      var level = $parent.data('level');\n      var $list = $parent.find('.list-group').first();\n\n      return $.ajax({\n        url: window.CORE_HOST + '/course_modules/' + id + '/course_contents',\n        method: 'GET',\n        headers: {\n          'Authorization': 'Token token=' + self.apiKey\n        },\n        success: function (res) {\n          var courseContents = _.filter(res.course_contents, function (lesson) {\n            return lesson.available !== false;\n          });\n\n          courseContents = _.sortBy(courseContents, 'order');\n\n          if (self.enrollment) {\n            courseContents = _.map(courseContents, function (content) {\n              content.completed = self.enrollment.lessons_info && self.enrollment.lessons_info.completed.indexOf(content.lesson.id) > -1;\n              return content;\n            });\n          }\n\n          var $courseContents = _.map(courseContents, function (content) {\n              var active = (self.currentLessonId === content.lesson.id ? 'active js' : '');\n              var lesson = content.lesson;\n              var lessonIcon = self.getLessonIcon(lesson);\n              var hideInProgressIcon = 'hide';\n              var hideCompletedIcon = 'hide';\n              var lessonReleased = null;\n              var releaseType = null;\n              var releaseDate = null;\n              var progress = null;\n              var requirements = content.requirements;\n              var available = true;\n\n              if (self.enrollment) {\n                lessonReleased = self.checkLessonAvailability(lesson) || self.userType === 'Collaborator';\n\n                if (self.enrollment.lessons_info && self.enrollment.lessons_info.completed.indexOf(lesson.id) > -1) {\n                  hideInProgressIcon = 'hide';\n                  hideCompletedIcon = null;\n                } else {\n                  if (self.enrollment.lessons_info && self.enrollment.lessons_info.in_progress.indexOf(lesson.id) > -1) {\n                    hideInProgressIcon = null;\n                    hideCompletedIcon = 'hide';\n                  } else {\n                    hideInProgressIcon = 'hide';\n                    hideCompletedIcon = 'hide';\n                  }\n                }\n\n                if (lesson.release_at) {\n                  releaseType = 'release_at';\n                  releaseDate = lesson.release_at;\n                } else if (lesson.release_after) {\n                  releaseType = 'release_after';\n                  releaseDate = moment(self.enrollment.activated_at).add(lesson.release_after, 'days');\n                }\n\n                if (self.lessonActions) {\n                  progress = _.find(self.enrollment.lessons_progresses, {lesson_id: lesson.id});\n                }\n\n                _.each(requirements, function (requirement) {\n                  var exists = (self.enrollment.lessons_info && self.enrollment.lessons_info.completed.indexOf(requirement.content_id) > -1) || self.userType === 'Collaborator';\n                  if (!exists) {\n                    available = false;\n                  }\n                });\n              }\n\n              if (content.completed) {\n                $('.btn-next-lesson').removeClass('disabled');\n              }\n\n              var html = '<li class=\"list-group-item content-lesson js-content list-group-item lesson module-item ' + active + (!available || (self.enrollment && self.checkTrialByType('content', content.id)) ? ' blocked' : '') + '\" ' +\n                'id=\"content-' + content.id + '\" ' +\n                'data-requirements=\\'' + JSON.stringify(requirements) + '\\'' +\n                'data-id=\"' + content.lesson.id + '\"' +\n                'data-level=\"1\">' +\n                '<div id=\"lesson-' + lesson.id + '\" class=\"js-lesson content-lesson ' + active + (!lessonReleased ? ' not-released' : '') + '\" data-lesson-id=\"' + lesson.id + '\">' +\n                '<div class=\"class-info\">' +\n\n                '<div class=\"left\"><i class=\"' + lessonIcon + '\"></i></div>' +\n\n                '<div class=\"center\">' +\n                (self.lessonActions && lessonReleased ?\n                  '<a class=\"lesson-title\" href=\"' + self.getContentPath(content) + '\"><span>' + lesson.title + '</span></a>' :\n                  '<span class=\"lesson-title\"><span class=\"disabled\">' + lesson.title + '</span></span>') +\n                '</div>' +\n\n                '<div class=\"right\">' +\n                ((!available || (self.enrollment && self.checkTrialByType('content', content.id))) ? '<i class=\"icon-lock\"></i>' : '') +\n                '<span class=\"progress-icon js-progress-icons\">' +\n                '<i class=\"icon-check js-completed-icon ' + hideCompletedIcon + '\"></i>' +\n                '<i class=\"icon-clock js-in-progress-icon ' + hideInProgressIcon + '\"></i>' +\n                '</span>';\n\n              if (self.lessonActions) {\n                if (progress && progress.views <= self.enrollment.max_attendance_length && self.enrollment.max_attendance_type == 'attempts') {\n                  var translation = self.translations['product.course_content.views'];\n\n                  translation = translation.replace('{{ progress.views }}', progress.views);\n                  translation = translation.replace('{{ enrollment.max_attendance_length }}', self.enrollment.max_attendance_length);\n\n                  html += '<span class=\"lesson-views attempt js-attendance badge\" title=\"' + translation + '\" data-tooltip-placement=\"left\" data-toggle=\"tooltip\">' +\n                    '<span>' + progress.views + '/' + self.enrollment.max_attendance_length + '</span>' +\n                    '</span>';\n                }\n\n                if (!lessonReleased) {\n                  var zone = moment.tz.guess();\n                  html += '<span class=\"release-date badge\">' + self.translations['lesson.' + releaseType] + '<span> ' + moment.tz(releaseDate, zone).format('DD/MM/YYYY') + '</span>' + '</span>';\n                }\n\n                var isDownloadableMedia = content.lesson.media && ['Document', 'Audio', 'Download'].indexOf(content.lesson.media.type) > -1;\n\n                if ((self.downloadAction || content.downloadable) && isDownloadableMedia)\n                  html += '<a class=\"download-link\" href=\"' + self.getContentDownloadPath(content) + '\" data-no-turbolink>' +\n                    '<i class=\"icon-cloud-download\"></i>' +\n                    '</a>';\n                }\n\n              html += '</div>' +\n                '</div>' +\n                '</li>';\n\n              return $(html);\n            }\n          );\n\n          $list.append($courseContents);\n          self.checkNextButtonUnlocked();\n\n        }\n      });\n    },\n\n    checkNextButtonUnlocked: function () {\n      var lessonProgress = this.lessonProgress();\n\n      app.lessonList.requirementsExists(lessonProgress, function ($item, content_id) {\n        if ($item && content_id) {\n          if (!content_id || !lessonProgress.hasOwnProperty('enrollment_id')) {\n            return;\n          }\n\n          app.lessonList.checkLessonCompleted(lessonProgress.enrollment_id, content_id, function (completed) {\n            if (completed) {\n              $('.btn-next-lesson').removeClass('disabled');\n              $item.removeClass('blocked');\n              $item.find('.right > .icon-lock').remove();\n            }\n          });\n        }\n        else {\n          $('.btn-next-lesson').removeClass('disabled');\n        }\n      });\n    },\n\n    loadTopModules: function () {\n      var self = this;\n\n      if (!self.course) return;\n\n      $.ajax({\n        url: window.CORE_HOST + '/courses/' + self.course.id + '/course_modules',\n        method: 'GET',\n        headers: {\n          'Authorization': 'Token token=' + self.apiKey\n        },\n        success: function (res) {\n          if (!res.course_modules || res.course_modules.length <= 0) return;\n\n          self.allModules = res.course_modules;\n\n          self.topModules = _.filter(res.course_modules, function (x) {\n            return (!x.parent_course_module && x.available !== false) &&\n              (x.course_content_ids.length > 0 || x.course_modules.length > 0);\n          });\n\n          self.topModules = _.sortBy(self.topModules, 'order');\n\n          var $modules = _.map(self.topModules, function (module) {\n            var disabled = self.enrollment && self.checkTrialByType('module', module.id);\n\n            return $(\n              '<li class=\"list-group-item module ' + (disabled ? 'disabled' : '') + '\" ' +\n              'data-id=\"' + module.id + '\"' +\n              'data-level=\"1\">' +\n              '<i class=\"icon icon-arrow-right\"></i>' +\n              '<span>' + module.name + '</span>' +\n              '<i class=\"busy busy-xs\"></i>' +\n              '</li>');\n          });\n\n          self.courseTree().prev('.course-content-busy').fadeOut('fast', function () {\n            self.courseTree().css('display', 'none');\n            self.courseTree().html($modules);\n            self.courseTree().fadeIn('fast');\n\n            if (self.courseContent) {\n              self.expandParentModules(self.courseContent.parent_modules_hash);\n            }\n          });\n        }\n      })\n    },\n\n    loadChildren: function (parent, cb) {\n      var self = this;\n      var $parent = $(parent);\n\n      var id = $parent.data('id');\n      var level = $parent.data('level');\n      var $list = $parent.find('.list-group').first();\n\n      if ($list.length <= 0) {\n        $parent.find('.busy').css({opacity: 1});\n        $list = $('<ul class=\"list-group\" style=\"display: none;\"></ul>');\n        $list.appendTo($parent);\n\n        $.when(self.fetchModules($parent), self.fetchChildren($parent))\n          .then(function () {\n            $parent.addClass('expanded');\n            $parent.find('.busy').css({opacity: 0});\n\n            $list.slideDown('fast');\n\n            if (typeof cb === 'function') {\n              cb();\n            }\n          });\n      } else {\n        if ($parent.hasClass('expanded')) {\n          $parent.removeClass('expanded');\n          $list.slideUp('fast');\n        } else {\n          $parent.addClass('expanded');\n          $list.slideDown('fast');\n        }\n\n        if (typeof cb === 'function') {\n          cb();\n        }\n      }\n    },\n\n    handleLessons: function () {\n      $(document).on('page:load page:restore', function (e) {\n\n        if (!e.originalEvent || !e.originalEvent.data || e.originalEvent.data.length == 0) return;\n\n        var $html = $(e.originalEvent.data[0]);\n        app.lessonList.lessons().each(function (i, el) {\n          var $el = $(el);\n          var $new = $html.find('#' + $el.attr('id'));\n          $el.html($new.html());\n        });\n      })\n    },\n\n    changeLesson: function (direction, lesson) {\n      var $targetLesson = $(lesson);\n\n      if (direction === 'prev') {\n        var $prev = app.lessonList\n          .currentLesson()\n          .prevAll('.js-content');\n\n        if ($prev.length > 0 && $prev.find('a').length > 0)\n          $targetLesson = $($prev[0]);\n      } else if (direction === 'next') {\n        var $next = app.lessonList\n          .currentLesson()\n          .nextAll('.js-content');\n\n        if ($next.length > 0 && $next.find('a').length > 0)\n          $targetLesson = $($next[0]);\n      }\n\n      $targetLesson.find('a')[0].click();\n    },\n\n    expandParentModules: function (parentModules) {\n      var self = this;\n\n      var modules = [];\n      var loopModule = parentModules.course_module;\n      modules.push(loopModule.id);\n\n      while (loopModule.parent_module) {\n        loopModule = loopModule.parent_module;\n        modules.push(loopModule.id);\n      }\n\n      modules = modules.reverse();\n\n      async.eachSeries(modules, function (moduleId, cb) {\n        var $module = $('.module[data-id=\"' + moduleId + '\"]');\n        self.loadChildren($module, cb);\n      });\n\n    },\n\n    toggleSidebar: function () {\n      app.lessonList.toggleButton().toggleClass('active');\n      app.lessonList.lessonListPanel().toggleClass('active');\n    }\n  };\n\n})();\n","(function () {\n  'use strict';\n\n  app.lessonPage = function () {\n    var REGEX_COLLABORATIVE_DISCUSSIONS = /\\/collaborative_discussions\\/([0-9]+)\\/collaborative_comments/;\n    var REGEX_EXAM_ANSWERS = /\\/exam_answers/;\n\n    var isCollaborativeDiscuttion = function (value) {\n      return REGEX_COLLABORATIVE_DISCUSSIONS.test(value);\n    };\n\n    var isExamAnswer = function (value) {\n      return REGEX_EXAM_ANSWERS.test(value);\n    };\n\n    $(document).ajaxSuccess(function (event, xhr, settings) {\n      if (isCollaborativeDiscuttion(settings.url) || isExamAnswer(settings.url)) {\n        var lessonProgress = app.lessonList.lessonProgress();\n\n        app.lessonList.requirementsExists(lessonProgress, function ($item, content_id) {\n          if (content_id && lessonProgress.enrollment_id) {\n            app.lessonList.checkLessonCompleted(lessonProgress.enrollment_id, content_id, function (completed) {\n              if (completed) {\n                var $currentItemIcon = app.lessonList.currentLesson().find('.js-in-progress-icon');\n                $currentItemIcon.removeClass('icon-clock');\n                $currentItemIcon.removeClass('js-in-progress-icon');\n                $currentItemIcon.addClass('js-in-completed-icon');\n                $currentItemIcon.addClass('icon-check');\n\n                $('.btn-next-lesson').removeClass('disabled');\n                $item.removeClass('disabled');\n                $item.removeClass('blocked');\n                $item.find('.right > .icon-lock').remove();\n              }\n            });\n          }\n        }, function () {\n          $('.btn-next-lesson').removeClass('disabled');\n        });\n\n      }\n    });\n  };\n})();\n","(function () {\n  'use strict';\n\n  app.bindMasks = function () {\n    var phoneMaskBehavior = function (val) {\n      return val.replace(/\\D/g, '').length === 11 ? '(00) 00000-0000' : '(00) 0000-00009';\n    };\n\n    var phoneMaskOptions = {\n      onKeyPress: function (val, e, field, options) {\n        field.mask(phoneMaskBehavior.apply({}, arguments), options);\n      }\n    };\n\n    $('#user-phone').mask(phoneMaskBehavior, phoneMaskOptions);\n    $('#user-cpf').mask('999.999.999-99');\n    $('#user-cep').mask('99.999-999');\n\n    $(document).trigger('app:bind:masks');\n  };\n})();\n","app.notepad = {\n  page: 1,\n\n  noteContainer: function () {\n    return $('#notepad-container');\n  },\n\n  form: function () {\n    return $('#js-notepad-form');\n  },\n\n  loadNote: function (lesson_id, cb) {\n    $.ajax({\n      url: window.location.pathname + '/notepads',\n      method: 'GET',\n      success: function () {\n        if (typeof cb == 'function') {\n          cb();\n        }\n      }\n    })\n  },\n\n  saveNote: function (cb) {\n    var note = $(\"#js-note\").html();\n    var note_id = $(\"#js_note_id\").val();\n\n    var $button = $(\"#save_notepad_button\");\n    var buttonLabel = $button.html();\n    $button.html($button.data(\"sending\"));\n    $button.prop('disabled', true);\n\n    $.ajax({\n      url: window.location.pathname + '/notepads',\n      method: 'POST',\n      data: {\n        _id: note_id,\n        note: note\n      },\n      success: function () {\n        $button.html(buttonLabel);\n        $button.prop('disabled', false);\n        if (typeof cb == 'function') {\n          cb();\n        }\n      }\n    });\n  },\n\n  init: function () {\n    var self = this;\n    if (this.noteContainer().length <= 0) return;\n    this.loadNote($(\"#lesson_id\").val());\n\n    $(\"#notepad_form\").on('submit', function(event) {\n      event.preventDefault();\n      self.saveNote();\n    });\n  }\n};\n","(function () {\n  'use strict';\n\n  app.bindPostsForm = function () {\n    $(document).on('click', '.js-post-edit', function () {\n      var post = $(this).parents('.js-post');\n\n      post.find('.js-post-body').addClass('hidden');\n      post.find('.js-post-form').removeClass('hidden');\n    });\n\n    $(document).on('click', '.js-post-cancel', function (e) {\n      var post = $(this).parents('.js-post');\n\n      post.find('.js-post-body').removeClass('hidden');\n      post.find('.js-post-form').addClass('hidden');\n    });\n\n    $(document).trigger('app:bind:bind_posts_form');\n  };\n})();\n","(function () {\n  'use strict';\n\n  app.bindReadMore = function () {\n    $('[role=\"readmore\"]').each(function (i, el) {\n      var speed = $(el).data('speed') || 100;\n      var collapsedHeight = $(el).data('collapsed-height') || 200;\n      var moreText = $(el).data('more-text') || 'Leia Mais';\n      var lessText = $(el).data('less-text') || 'Fechar';\n\n      var currHeight = $(el).innerHeight();\n      var showLink = currHeight <= collapsedHeight;\n\n      $(el).readmore({\n        speed: speed,\n        collapsedHeight: collapsedHeight,\n        moreLink: '<a href=\"#\" class=\"' + (showLink ? 'hidden' : 'readmore-link') + '\">' + moreText + '</a>',\n        lessLink: '<a href=\"#\" class=\"' + (showLink ? 'hidden' : 'readmore-link') + '\">' + lessText + '</a>'\n      })\n    });\n  }\n})();\n","(function () {\n  'use strict';\n\n  window.onLoadRecaptcha = function () {\n    app.bindRecaptcha();\n  };\n\n  app.bindRecaptcha = function () {\n    var $recaptcha = $('.js-recaptcha');\n\n    if (!$recaptcha.length || typeof grecaptcha === 'undefined') return;\n\n    $recaptcha.each(function (i, el) {\n      const $el = $(el);\n      const sitekey = $el.data('sitekey');\n      const elId = $el.attr('id');\n      const disableButton = $el.data('disable-button') === true;\n      const buttonSelector = $el.data('button-selector');\n\n      const $form = $el.parents('form');\n      const $formButton = buttonSelector ? $form.find(buttonSelector) : $form.find('button[type=\"submit\"], input[type=\"submit\"]');\n\n      if (disableButton) {\n        $formButton.prop('disabled', true);\n      }\n\n      grecaptcha.render(elId, {\n        'sitekey': sitekey,\n        'callback': function () {\n          if (disableButton) {\n            $formButton.prop('disabled', false);\n          }\n        }\n      });\n    });\n  };\n})();\n","(function () {\n  'use strict';\n\n  app.simpleEditor = {\n    createShortcut: function (bindKey, callback) {\n      var isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;\n\n      var bindFunction = function (e) {\n        var character = String.fromCharCode(e.keyCode);\n        var ctrl = e.ctrlKey;\n        var meta = !!e.metaKey;\n        var score = 0;\n\n        if (isMac && meta) {\n          score++;\n        } else if (ctrl) {\n          score++;\n        }\n\n        if (character === bindKey) {\n          score++;\n\n          if (score === 2) {\n            e.stopPropagation();\n            e.preventDefault();\n            return callback();\n          }\n        }\n      };\n\n      $('body').bind('keydown', bindFunction);\n    },\n\n    handleDrag: function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n    },\n\n    handleDrop: function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n      var x = e.clientX;\n      var y = e.clientY;\n      var file = e.dataTransfer.files[0];\n\n      var URLObj = window.URL || window.webkitURL;\n      var source = URLObj.createObjectURL(file);\n\n      if (file.type.match('image.*')) {\n\n        var img = document.createElement(\"img\");\n\n        img.src = source;\n\n        var range = null;\n\n        if (document.caretPositionFromPoint) {\n          var pos = document.caretPositionFromPoint(x, y);\n          range = document.createRange();\n          range.setStart(pos.offsetNode, pos.offset);\n          range.collapse();\n          range.insertNode(img);\n        } else if (document.caretRangeFromPoint) {\n          range = document.caretRangeFromPoint(x, y);\n          range.insertNode(img);\n        }\n      }\n    },\n\n    updateButtons: function () {\n      var bold = document.queryCommandState(\"Bold\");\n      var italic = document.queryCommandState(\"Italic\");\n      var underline = document.queryCommandState(\"Underline\");\n\n      if (bold === true) {\n        $('[data-action=bold]').addClass('active');\n      } else {\n        $('[data-action=bold]').removeClass('active');\n      }\n\n      if (italic === true) {\n        $('[data-action=italic]').addClass('active');\n      } else {\n        $('[data-action=italic]').removeClass('active');\n      }\n\n      if (underline === true) {\n        $('[data-action=underline]').addClass('active');\n      } else {\n        $('[data-action=underline]').removeClass('active');\n      }\n    },\n\n    init: function (container) {\n      this.$container = $(container);\n\n      if(this.$container.length <= 0) {\n        return;\n      }\n\n      this.$input = this.$container.find('.js-input');\n      this.$btnAction = this.$container.find('.js-btn-action');\n\n      this.registerTriggers();\n      this.registerDropZone();\n      this.registerShortcuts();\n    },\n\n    registerTriggers: function () {\n      var self = this;\n\n      self.$btnAction.on('click', function () {\n        var action = $(this).attr('data-action');\n        document.execCommand(action);\n        app.simpleEditor.updateButtons();\n      });\n\n      self.$input.on('click', function () {\n        app.simpleEditor.updateButtons();\n      });\n\n      self.$input.on('focusin', function () {\n        self.$container.addClass('focused');\n      });\n\n      self.$input.on('focusout', function () {\n        self.$container.removeClass('focused');\n      });\n    },\n\n    registerDropZone: function () {\n      var dropZone = $(this.container).find('.js-input');\n      dropZone.on('dragover', app.simpleEditor.handleDrag, false);\n      dropZone.on('drop', app.simpleEditor.handleDrop, false);\n    },\n\n    registerShortcuts: function () {\n\n      app.simpleEditor.createShortcut('U', function () {\n        document.execCommand('underline');\n        app.simpleEditor.updateButtons();\n      });\n\n      app.simpleEditor.createShortcut('B', function () {\n        document.execCommand('bold');\n        app.simpleEditor.updateButtons();\n      });\n\n      app.simpleEditor.createShortcut('I', function () {\n        document.execCommand('italic');\n        app.simpleEditor.updateButtons();\n      });\n    }\n  };\n\n})();\n","app.studentDoubts = {\n  page: 1,\n\n  doubtsContainer: function () {\n    return $('#js-doubts-container');\n  },\n\n  form: function () {\n    return $('#js-student-doubts-form');\n  },\n\n  expandButton: function () {\n    return $('#js-expand-student-doubts-form');\n  },\n\n  hideButton: function () {\n    return $('#js-hide-student-doubts-form');\n  },\n\n  loadMoreButton: function () {\n    return $('#js-load-more-doubts');\n  },\n\n  loadDoubts: function (cb) {\n    var self = this;\n\n    $.ajax({\n      url: window.location.pathname + '/student_doubts/page/' + self.page,\n      method: 'GET',\n      data: {\n        per_page: 3\n      },\n      complete: function () {\n        if (typeof cb == 'function') {\n          cb();\n        }\n      }\n    })\n  },\n\n  init: function () {\n    var self = this;\n\n    if (self.doubtsContainer().length <= 0) return;\n\n    self.expandButton().on('click', function () {\n      self.expandButton().hide();\n      self.form().slideDown('fast');\n    });\n\n    self.hideButton().on('click', function () {\n      self.form().slideUp('fast', function () {\n        self.expandButton().fadeIn('fast');\n      });\n    });\n\n    self.loadMoreButton().on('click', function () {\n      self.page = self.page + 1;\n      var $btn = $(this);\n\n      $btn.attr('disabled', 'disabled');\n      self.loadDoubts(function () {\n        $btn.removeAttr('disabled');\n      });\n    });\n\n    self.loadDoubts();\n  }\n};\n","(function () {\n  'use strict';\n\n  app.timeTags = function () {\n    var $edoolsPlayerContainer = $('.js-edools-player');\n    if ($edoolsPlayerContainer.length <= 0) {\n      return;\n    }\n\n    var edoolsPlayer = $edoolsPlayerContainer[0].edoolsPlayer;\n\n    $('.js-timetags .list-group-item').on('click', function (e) {\n      e.preventDefault();\n\n      if ($edoolsPlayerContainer.length > 0) {\n        var time = $(this).data('time');\n\n        edoolsPlayer.setTime(time);\n      }\n    })\n  };\n})();\n","(function () {\n  'use strict';\n\n  app.changeTimeZone = function () {\n    $('.js-to-client-timezone').each(function (i, el) {\n      var $el = $(el);\n      var format = $el.data('format');\n      var zone = moment.tz.guess();\n      var time = $el.data('timezone');\n\n      $el.html(moment.tz(time, zone).format(format));\n    });\n\n    $(document).trigger('app:change:timezone');\n  };\n\n  // TODO: FIXME: Essa chamada é para funcionar no primeiro load. Não deveria\n  // ser assim, parece ser algum erro com a inserção de cod no tema\n  app.changeTimeZone();\n})();\n","(function () {\n  $(document).on('page:load', function () {\n    app.init();\n  });\n\n  $(document).on('page:partial-load', function () {\n    app.bindBlazy();\n  });\n\n  $(document).ready(function () {\n    app.init();\n  });\n})();\n"]}