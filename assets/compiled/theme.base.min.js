"use strict";!function(){window.app={bindGlobal:function(){FastClick.attach(document.body),$(".timeago").timeago(),$(document).trigger("app:bind:global")},bindOpenOnLoad:function(){var n=$(".js-open-on-load");n.length>0&&$.each(n,function(n,e){window.open($(e).attr("href"))}),$(document).trigger("app:bind:open_on_load")},bindTooltips:function(){$("[data-toggle='tooltip']").tooltip("destroy").tooltip(),$(document).trigger("app:bind:tooltips")},checkFormValidity:function(n){var e=n.currentTarget,t=$(e).find('button[type="submit"]');e.checkValidity()?t.removeAttr("disabled"):t.attr("disabled","disabled"),$(document).trigger("app:bind:check_form_validity")},init:function(){app.pagarme.init(),app.bindGlobal(),app.bindBlazy(),app.bindOpenOnLoad(),app.bindMasks(),app.bindTooltips(),app.bindReadMore(),app.bindDatepicker(),app.bindFixOnScroll(),app.ckeditor.bindCkeditor(),app.bindCheckout(),app.lessonList.init(),app.lessonSidebar.init(),app.bindExamQuestionForm(),app.changeTimeZone(),app.followBind(),app.bindPostsForm(),$(document).on("app:bind:ckeditor_submit",app.bindCollaborativeDiscussion)}}}(),function(){app.bindBlazy=function(n){console.log(n),new Blazy,$(document).trigger("app:bind:blazy")}}(),function(){app.bindCheckout=function(){$("#js-terms-of-use-check").change(function(){$(this).is(":checked")===!0?$(".cta-checkout-cart").removeClass("disabled"):$(".cta-checkout-cart").addClass("disabled")}),$(document).trigger("app:bind:checkout")}}(),function(){app.ckeditor={bindCkeditor:function(){var n="//cdn.edools.com/libs/ckeditor/4.5.10/ckeditor.js";$(".js-ckeditor").length&&loadAsset("window.CKEDITOR",n,function(){var n={language:"pt-br",skin:"bootstrapck"};$(".js-ckeditor").each(function(e,t){$("#cke_"+t.id).length||(n.placeholder=t.placeholder,CKEDITOR.replace(t.id,n))}),app.ckeditor.bindCkeditorSubmit(),$(document).trigger("app:bind:ckeditor")})},bindCkeditorSubmit:function(){$.each($(".js-ckeditor"),function(n,e){var t=$(e),o=t.parents("form"),i=t.attr("id");if(o){var a=o.find('button[type="submit"]');CKEDITOR.instances[i].on("change",function(){this.getData().length?a.attr("disabled",!1):a.attr("disabled",!0)})}}),$(document).trigger("app:bind:ckeditor_submit")}}}(),function(){app.bindCollaborativeDiscussion=function(){$(document).on("click","#collaborative-discussion .js-edit-button",function(){var n=$(this).data("comment-id"),e=$("#js-comment-"+n);e.find(".js-show-comment").addClass("hide"),e.find(".js-edit-container").removeClass("hide")}),$(document).on("click","#collaborative-discussion .js-cancel-button",function(){var n=$(this).data("comment-id"),e=$("#js-comment-"+n);e.find(".js-show-comment").removeClass("hide"),e.find(".js-edit-container").addClass("hide")}),$(document).trigger("app:bind:collaborative_discussion")}}(),function(){app.bindDatepicker=function(){$.fn.datepicker.defaults.language="pt-BR",$(".datepicker").each(function(n,e){var t=$(e),o=$('<input type="hidden" />').insertBefore(t.parent()),i=moment(t.val()).utc().format("DD/MM/YYYY"),a=moment(t.val()).utc().format("YYYY-MM-DD");a="Invalid date"===a?null:a,o.attr("id",t.attr("id")),o.attr("name",t.attr("name")),o.attr("value",a),t.removeAttr("id"),t.removeAttr("name"),""!==t.val()&&t.val(i),$(e).datepicker().on("change",function(){var n=moment(t.val(),"DD/MM/YYYY").utc().format("YYYY-MM-DD");n="Invalid date"===n?null:n,o.val(n)})}),$(document).trigger("app:bind:datepicker")}}(),function(){app.bindExamQuestionForm=function(){$(document).on("click","#js-remake-exam",function(){$("#answers-container").addClass("hide"),$("#form-container").removeClass("hide")}),$(document).on("click","#js-clean-associative-options",function(n){$(".js-associative-select option:selected").removeAttr("selected")}),$(document).on("change",".js-associative-select",function(n){var e=$(this).data("option-index"),t=$(this).find("option:selected").data("first-assertion-id");$('.js-associate-assertion[data-option-index="'+e+'"]').val(t)}),$(document).on("change","#exam_answer_form",app.checkFormValidity),$(document).on("input propertychange","#exam_answer_form",app.checkFormValidity),$(document).trigger("app:bind:bind_exam_question_form")}}(),function(){app.bindFixOnScroll=function(){window.innerWidth<992||$(".js-fix-on-scroll").each(function(n,e){var t=$(e);t.wrap('<div class="js-fix-scroll-wrapper"/>');var o=t.parent(".js-fix-scroll-wrapper"),i=t.offset(),a={width:t.outerWidth(),height:t.outerHeight()};o.width(a.width),o.height(a.height),$(document).on("scroll",function(n){var e=$(document).scrollTop();if(e>=i.top){if("fixed"===t.css("position"))return;t.addClass("scroll"),t.css({position:"fixed",left:i.left,top:0,width:a.width,height:a.height,"z-index":"10000"})}else{if("static"===t.css("position"))return;t.removeClass("scroll"),t.css({position:"static",left:"auto",top:"auto",width:"auto",height:"auto"})}})})}}(),function(){app.followBind=function(){$(document).on({mouseenter:function(){$(this).addClass("hidden"),$("#js-unfollow").removeClass("hidden")}},"#js-following"),$(document).on({mouseleave:function(){$("#js-following").removeClass("hidden"),$(this).addClass("hidden")}},"#js-unfollow")}}(),function(){app.lessonList={getModuleIndex:function(n){var e=null;return $(n.attr("class").split(" ")).each(function(n,t){t.indexOf("sub-")>-1&&(e=parseInt(t.replace("sub-","")))}),e},expandParentModule:function(n){var e=[],t=!1;$(n).prevAll(".module").each(function(n,o){var i=$(o);t||e.push(i),1==app.lessonList.getModuleIndex(i)&&(t=!0)}),e=e.filter(function(e,t){return 0==t||app.lessonList.getModuleIndex($(e))<app.lessonList.getModuleIndex($(n))-1}),e=e.reverse(),$(e).each(function(n,e){app.lessonList.toggleChildren(e,"expand")})},toggleChildren:function(n,e,t){if(!(n.length<=0)){var o=$(n),i=app.lessonList.getModuleIndex(o),a=o.nextUntil(".sub-"+i).filter(function(){return app.lessonList.getModuleIndex($(this))==app.lessonList.getModuleIndex(o)+1}),s=a.filter(function(){return $(this).hasClass("module")});"expand"==e?(o.addClass("expanded"),a.removeClass("hidden")):"collapse"==e&&(o.removeClass("expanded"),a.addClass("hidden")),s.each(function(n,e){app.lessonList.toggleChildren(e,"collapse")}),t&&t()}},init:function(){var n=$(".course-content");if(!(n.length<=0)){var e=n.find(".module.sub-1").first();app.lessonList.toggleChildren(e,"expand"),$(document).on("page:change",function(){n.find(".module.expanded").each(function(n,e){app.lessonList.toggleChildren($(e),"collapse",function(){app.lessonList.toggleChildren($(e),"expand")})})}),n.off("click").on("click",".module",function(){$(this).hasClass("expanded")?app.lessonList.toggleChildren($(this),"collapse"):app.lessonList.toggleChildren($(this),"expand")})}}}}(),function(){app.lessonSidebar={init:function(){this.nextButton().on("click",this.nextLesson),this.prevButton().on("click",this.prevLesson),this.lessons().find("a").on("click",function(n){n.preventDefault(),app.lessonSidebar.changeLesson(null,$(this).parents(".js-content"))}),this.lazyLoadButtons().on("click",app.lessonSidebar.resetTooltips),this.handleButtons(),this.handleLessons(),$(document).trigger("app:bind:lesson_sidebar")},lazyLoadButtons:function(){return $("#js-course-content-more-link, #js-course-content-prev-link")},prevButton:function(){return $("#js-lesson-content-player").find(".js-btn-prev")},nextButton:function(){return $("#js-lesson-content-player").find(".js-btn-next")},handleButtons:function(){var n=this.currentLesson().nextAll(".js-content"),e=this.currentLesson().prevAll(".js-content");n.length<=0||n.find("a").length<=0?app.lessonSidebar.nextButton().attr("disabled","disabled"):app.lessonSidebar.nextButton().removeAttr("disabled"),e.length<=0||e.find("a").length<=0?app.lessonSidebar.prevButton().attr("disabled","disabled"):app.lessonSidebar.prevButton().removeAttr("disabled")},handleLessons:function(){app.lessonList.expandParentModule(app.lessonSidebar.currentLesson()),$(document).on("page:load page:restore",function(n){if(n.originalEvent.data&&0!=n.originalEvent.data.length){var e=$(n.originalEvent.data[0]);app.lessonSidebar.lessons().each(function(n,t){var o=$(t),i=e.find("#"+o.attr("id"));o.html(i.html())})}})},lessons:function(){return $(".lesson-page #js-course-tree").find(".js-content")},currentLesson:function(){return $($(".lesson-page #js-course-tree").find(".js-content.active")[0])},changeLesson:function(n,e){var t=$(e);if("prev"==n){var o=app.lessonSidebar.currentLesson().prevAll(".js-content");o.length>0&&o.find("a").length>0&&(t=$(o[0]))}else if("next"==n){var i=app.lessonSidebar.currentLesson().nextAll(".js-content");i.length>0&&i.find("a").length>0&&(t=$(i[0]))}app.lessonList.expandParentModule(t),t.find("a")[0].click()},prevLesson:function(){app.lessonSidebar.changeLesson("prev")},nextLesson:function(){app.lessonSidebar.changeLesson("next")}}}(),function(){app.bindMasks=function(){var n=function(n){return 11===n.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},e={onKeyPress:function(e,t,o,i){o.mask(n.apply({},arguments),i)}};$("#user-phone").mask(n,e),$("#user-cpf").mask("999.999.999-99"),$("#user-cep").mask("99.999-999"),$(document).trigger("app:bind:masks")}}(),function(){app.pagarme={buildCreditCard:function(){var n=new PagarMe.creditCard,e=$("#card-form #card-expiration").val().split("/");return n.cardExpirationMonth=parseInt(e[0]),n.cardExpirationYear=parseInt(e[1]),n.cardHolderName=$("#card-form #card-holder-name").val(),n.cardNumber=$("#card-form #card-number").val(),n.cardCVV=$("#card-form #card-cvc").val(),n},submitFormCreditCardHash:function(n){var e=app.pagarme.buildCreditCard(),t=e.fieldErrors(),o=!1;for(var i in t){o=!0;break}console.log(1),window.creditCardTest=e,o?(window.fieldErrors=t,console.log(window.fieldErrors)):e.generateHash(function(e){$("#card_hash").val(e),n.get(0).submit()})},init:function(){var n="https://assets.pagar.me/js/pagarme.min.js",e=$("#card-form"),t=$("#pagarme").val();e.length&&t&&loadAsset("PagarMe",n,function(){PagarMe.encryption_key=t,e.submit(function(n){n.preventDefault(),app.pagarme.submitFormCreditCardHash(e)}),$(document).trigger("app:bind:pagarme")})}}}(),function(){app.bindPostsForm=function(){$(document).on("click",".js-post-edit",function(){var n=$(this).parents(".js-post");n.find(".js-post-body").addClass("hidden"),n.find(".js-post-form").removeClass("hidden")}),$(document).on("click",".js-post-cancel",function(n){var e=$(this).parents(".js-post");e.find(".js-post-body").removeClass("hidden"),e.find(".js-post-form").addClass("hidden")}),$(document).trigger("app:bind:bind_posts_form")}}(),function(){app.bindReadMore=function(){$('[role="readmore"]').each(function(n,e){var t=$(e).data("speed")||100,o=$(e).data("collapsed-height")||200,i=$(e).data("more-text")||"Leia Mais",a=$(e).data("less-text")||"Fechar",s=$(e).innerHeight(),d=s<=o;$(e).readmore({speed:t,collapsedHeight:o,moreLink:'<a href="#" class="'+(d?"hidden":"readmore-link")+'">'+i+"</a>",lessLink:'<a href="#" class="'+(d?"hidden":"readmore-link")+'">'+a+"</a>"})})}}(),function(){app.changeTimeZone=function(){$(".js-to-client-timezone").each(function(n,e){var t=$(e),o=t.data("format"),i=moment.tz.guess(),a=t.data("timezone");t.html(moment.tz(a,i).format(o))}),$(document).trigger("app:change:timezone")},app.changeTimeZone()}(),function(){$(document).on("page:load",function(){app.init()}),$(document).on("page:partial-load",function(){app.bindBlazy()}),$(document).ready(function(){app.init()})}();
//# sourceMappingURL=theme.base.min.js.map
